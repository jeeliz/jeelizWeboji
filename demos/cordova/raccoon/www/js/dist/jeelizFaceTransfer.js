 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2018 Jeeliz ( https://jeeliz.com )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function ia(b){var d=new XMLHttpRequest;d.open("GET",a.Wa+a.save,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||b(d.responseText)};d.send()}function ua(){for(var b=a.Cb,d=Array(b),e=0;e<b;++e)d[e]=0;return d}function xa(b,d,e){b=Math.min(Math.max((e-b)/(d-b),0),1);return b*b*(3-2*b)}function za(b,d,e){return Math.min(Math.max((e-b)/(d-b),0),1)}function Ba(b,d,e,h){return Math.pow(Math.min(Math.max((h-b)/(d-b),0),1),e)}
function Da(b){switch(b){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ea(b,d){var e=d%8;return b[(d-e)/8]>>7-e&1}
function Fa(b){var d=JSON.parse(b);b=d.ne;var e=d.nf,h=d.n,k="undefined"===typeof btoa?Buffer.from(d.data,"base64").toString("latin1"):atob(d.data),l=k.length,q;d=new Uint8Array(l);for(q=0;q<l;++q)d[q]=k.charCodeAt(q);k=new Float32Array(h);l=new Float32Array(e);q=b+e+1;var m,n;for(m=0;m<h;++m){var g=q*m;var t=0===Ea(d,g)?1:-1;var u=g+1;var B=1,H=0;for(n=u+b-1;n>=u;--n)H+=B*Ea(d,n),B*=2;n=H;u=d;B=g+1+b;H=l;var D=0,L=H.length;for(g=B;g<B+L;++g)H[D]=Ea(u,g),++D;for(g=u=0;g<e;++g)u+=l[g]*Math.pow(2,-g-
1);t=0===u&&0===n?0:t*(1+u)*Math.pow(2,1+n-Math.pow(2,b-1));k[m]=t}return k}
var v=function(){function b(f,w){f=r.createShader(f);r.shaderSource(f,w);r.compileShader(f);return r.getShaderParameter(f,r.COMPILE_STATUS)?f:!1}function d(f,w){f=b(r.VERTEX_SHADER,f);w=b(r.FRAGMENT_SHADER,w);var A=r.createProgram();r.attachShader(A,f);r.attachShader(A,w);r.linkProgram(A);return A}function e(f){void 0===f.ca&&(f.ca="precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5,.5);}");void 0===f.fa&&(f.fa=["a0"]);void 0===f.W&&(f.W=
[2]);if(void 0===f.precision||"highp"===f.precision)f.precision=n;f.id=q++;void 0!==f.ed&&f.ed.forEach(function(A,ba){f.c=f.c.replace(A,f.ta[ba])});f.Va=0;f.W.forEach(function(A){f.Va+=4*A});f.sa=d(f.ca,"precision "+f.precision+" float;\n"+f.c);f.l={};f.f.forEach(function(A){f.l[A]=r.getUniformLocation(f.sa,A)});f.attributes={};f.X=[];f.fa.forEach(function(A){var ba=r.getAttribLocation(f.sa,A);f.attributes[A]=ba;f.X.push(ba)});if(f.h){r.useProgram(f.sa);l=f;k=f.id;for(var w in f.h)r.uniform1i(f.l[w],
f.h[w])}f.Vd=!0}function h(f){Ga.ld(N);k!==f.id&&(N.U(),k=f.id,l=f,r.useProgram(f.sa),f.X.forEach(function(w){0!==w&&r.enableVertexAttribArray(w)}))}var k=-1,l=!1,q=0,m=!1,n="highp",g=["u1"],t=["u0"],u={u1:0},B={u0:0},H={u1:0,u2:1},D={u3:0},L={s0:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u},s1:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:g,h:u,precision:"lowp"},s2:{c:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",
f:["u1","u2"],h:H},s3:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",f:g,h:u},s4:{c:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",f:["u1","mask"],h:H},s5:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",f:g,h:u},s6:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",
f:g,h:u},s7:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u4;}",f:["u0","u4"],h:B},s8:{c:"uniform sampler2D u0;uniform float u4;varying vec2 vv0;const vec4 g=vec4(.25,.25,.25,.25),e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u4,g);gl_FragColor=b*e;}",f:["u0","u4"],h:B},s9:{c:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",
f:g,h:u},s10:{c:"uniform sampler2D u1,u5;uniform float u6;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);gl_FragColor=mix(b,a,u6*f);}",f:["u1","u5","u6"],h:{u1:0,u5:1}},s11:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u7)+texture2D(u1,vv0+u7*vec2(1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,-1.))+texture2D(u1,vv0+u7*vec2(-1.,1.)));}",f:["u1","u7"],h:u},s12:{c:"uniform sampler2D u1;uniform vec4 u8;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 k(float a){if(a==0.)return vec4(0.,0.,0.,0.);float l=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),m=c+127.,b=(a/exp2(c)-1.)*8388608.,d=m/2.,n=fract(d)*2.,o=floor(d),p=e(b,0.,8.),q=e(b,8.,16.),r=n*128.+e(b,16.,23.),j=l+o;return vec4(p,q,r,j)/255.;}void main(){float a=dot(texture2D(u1,vv0),u8);gl_FragColor=k(a);}",
f:["u1","u8"],h:u},s13:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",f:t,h:B},s14:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(e,a);}",f:t,h:B},s15:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-e,a,step(0.,a));}",f:t,h:B},s16:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-e;gl_FragColor=mix(.1*b,a,step(0.,a));}",
f:t,h:B},s17:{c:"uniform sampler2D u0,u6,u9;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u6,vv0),d=texture2D(u9,vv0),b=a/d;gl_FragColor=c*mix(exp(-abs(b))-f,b,step(0.,a));}",f:["u0","u6","u9"],h:{u0:0,u6:1,u9:2}},s18:{c:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",f:t,h:B},s19:{c:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(.5,.5,.5,.5);void main(){vec4 a=texture2D(u0,vv0),b=log(e+a);gl_FragColor=b;}",
f:t,h:B},s20:{c:"uniform sampler2D u0;uniform float gain;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=exp(a);}",f:["u0","u10"],h:B},s21:{c:"uniform sampler2D u0,u11;uniform float u12;const vec2 f=vec2(.5,.5);const float g=1e-5;const vec4 h=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u11,f);float b=u12*u12;vec4 c=max(b*a,g*h);gl_FragColor=texture2D(u0,vv0)/c;}",f:["u0","u13","u12"],h:{u0:0,u13:1}},s22:{c:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),g=floor(u14.x*fract(b*u14.y)),f=(g*u14.y+d)/a;gl_FragColor=texture2D(u1,f+c/a);}",
f:["u1","u14"],h:u},s23:{c:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),e=texture2D(u16,c);gl_FragColor=d*e;}",f:["u15","u16","u17"],h:{u16:0,u15:1,u17:2}},s24:{c:"uniform float u18;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 a=fract(vv0*u18);vec4 b=texture2D(u15,vv0),c=texture2D(u16,a);gl_FragColor=b*c;}",f:["u16","u15","u18"],h:{u16:0,u15:1}},s25:{c:"uniform float u18;uniform sampler2D u15,u16,u19,u20,u21,u22;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 i=vv0*u18,m=floor(i),c=i-m;vec4 n=texture2D(u15,vv0),d=texture2D(u16,c),a=texture2D(u22,vv0);a=a*255.;vec4 o=texture2D(u19,c),p=texture2D(u20,c),q=texture2D(u21,c),j=step(-g,-a),b=e-j,k=b*step(-e-g,-a);b*=e-k;vec4 h=b*step(-2.*e-g,-a);b*=e-h;vec4 l=b;d=j*d+k*o+h*p+l*q,gl_FragColor=n*d;}",
f:"u15 u16 u18 u22 u19 u20 u21".split(" "),h:{u16:0,u15:1,u22:3,u19:4,u20:5,u21:6}},s26:{c:"uniform sampler2D u15,u16,u23;uniform float u18,u24,u25,u26;varying vec2 vv0;const vec2 j=vec2(1.,1.);void main(){vec2 a=floor(u24*vv0),g=u24*vv0-a;float b=u18/u24;vec2 c=floor(g*b),d=g*b-c,h=(a+d)/u24;float l=u24*u26/u18;vec2 m=l*c,i=(m+d*u25)/u26,e=step(i,j);vec4 n=texture2D(u15,h),o=texture2D(u16,i),p=n*o*e.x*e.y,k=texture2D(u23,h);gl_FragColor=p*u25*u25+k;}",f:"u15 u16 u18 u24 u25 u26 u23".split(" "),h:{u16:0,
u15:1,u23:2}},s27:{c:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",f:["u15","u16"],h:{u16:0,u15:1}},s28:{c:"uniform sampler2D u1,u23;uniform float u27;varying vec2 vv0;void main(){gl_FragColor=texture2D(u23,vv0)+u27*texture2D(u1,vv0);}",f:["u1","u23","u27"],h:{u1:0,u23:1}},s29:{c:"varying vec2 vv0;uniform sampler2D u1;const vec4 g=vec4(1.,1.,1.,1.),e=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,e)*g;}",
f:g,h:u,precision:"lowp"},s30:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 e=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(dot(a,e),dot(b,e),dot(c,e),dot(d,e));}",f:["u1","u28"],h:u,precision:"lowp"},s31:{c:"varying vec2 vv0;uniform sampler2D u1;uniform float u28;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u28)).rgb,c=texture2D(u1,vv0+vec2(u28,u28)).rgb,d=texture2D(u1,vv0+vec2(u28,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
f:["u1","u28"],h:u,precision:"lowp"},s32:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 g=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u29,vv0.y-u29))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u29))*2.,b-=texture2D(u1,vec2(vv0.x+u29,vv0.y-u29))*1.,b+=texture2D(u1,vec2(vv0.x-u29,vv0.y+u29))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u29))*2.,b+=texture2D(u1,vec2(vv0.x+u29,vv0.y+u29))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),f=texture2D(u2,vv0);gl_FragColor=f.a*e.r*g;}",
f:["u1","u2","u29"],h:H},s33:{c:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u29;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float i=0.;vec2 l=k*u29,b,c;float d,a,g=0.;for(float f=-4.;f<=4.;f+=1.)for(float e=-4.;e<=4.;e+=1.)b=vec2(f,e),d=length(b)/2.,a=exp(-d*d),c=vv0+l*b,a=1.,i+=a*texture2D(u1,c).r,g+=a;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,c).r-i/g)*j;}",f:["u1","u2","u29"],h:H},s34:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 h=vec2(.5,.5),i=vec2(1.,0.),j=vec2(0.,1.);void main(){vec2 a=vv0-u7*h;vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*i),d=texture2D(u3,a+u7*j),k=texture2D(u3,a+u7),l=e(b,c),g=e(d,k);gl_FragColor=e(l,g);}",
f:["u3","u7"],h:D},s35:{c:"uniform sampler2D u3;uniform vec2 u7;varying vec2 vv0;const vec2 j=vec2(1.,0.),k=vec2(0.,1.),l=vec2(2.,0.),m=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u3,a),c=texture2D(u3,a+u7*j),d=texture2D(u3,a+u7*k),g=texture2D(u3,a+u7),i=e(b,c),h=e(d,g);return e(i,h);}void main(){vec2 a=vv0+u7*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u7*l),d=f(a+u7*2.),g=f(a+u7*m),i=e(b,c),h=e(d,g);gl_FragColor=e(i,h);}",f:["u3","u7"],h:D},s36:{c:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",
f:["u1"],h:u,precision:"lowp"},s37:{c:"uniform sampler2D u1;uniform vec2 u7;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float d=15444.;void main(){vec4 a=1001./d*texture2D(u1,vv0-3.*u7)+2002./d*texture2D(u1,vv0-2.*u7)+3003./d*texture2D(u1,vv0-u7)+3432./d*texture2D(u1,vv0)+3003./d*texture2D(u1,vv0+u7)+2002./d*texture2D(u1,vv0+2.*u7)+1001./d*texture2D(u1,vv0+3.*u7);gl_FragColor=a;}",f:["u7","u1"],h:u,precision:"lowp"},s38:{c:"uniform sampler2D u1,u30,u31;varying vec2 vv0;const vec4 g=vec4(1.,1.,1.,1.);const float h=.1;void main(){vec4 a=texture2D(u30,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(g*h,b-a*a),f=sqrt(d);gl_FragColor=(c-a)/f;}",
f:["u1","u30","u31"],h:{u1:0,u30:1,u31:2}}},Q={s39:{c:"uniform float u18,u32;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:["u18","u15","u16","u23","u32"],ta:["1.1111","gl_FragColor\\*=2.2222;"]},s40:{c:"uniform float u18,u32,u26;uniform sampler2D u15,u16,u23;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u23,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u26,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u26;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u26,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
f:"u18 u26 u15 u16 u23 u32".split(" "),ta:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},N={Ma:function(){return m},i:function(){if(!m){n="highp";for(var f in L)e(L[f],f);v.set("s0");r.enableVertexAttribArray(0);f=Ha.i();m=!0;return f}},Xb:function(f){f.forEach(function(w){N.$a(w)})},$a:function(f){L[f.id]=f;e(f,f.id)},qb:function(f,w,A){w||(w=f);L[w]=Object.create(Q[f]);Q[f].ta&&Q[f].ta.forEach(function(ba,pa){L[w].c=L[w].c.replace(new RegExp(ba,"g"),A[pa])});e(L[w],w)},set:function(f){h(L[f])},
uc:function(f){return"undefined"!==typeof L[f]},Hd:function(){return l.Ed},U:function(){-1!==k&&(k=-1,l.X.forEach(function(f){0!==f&&r.disableVertexAttribArray(f)}))},Sa:function(){var f=0;l.X.forEach(function(w,A){A=l.W[A];r.vertexAttribPointer(w,A,r.FLOAT,!1,l.Va,f);f+=4*A})},Dd:function(){r.enableVertexAttribArray(0)},Ta:function(){r.vertexAttribPointer(l.X[0],2,r.FLOAT,!1,8,0)},ge:function(f,w){r.uniform1i(l.l[f],w)},A:function(f,w){r.uniform1f(l.l[f],w)},I:function(f,w,A){r.uniform2f(l.l[f],
w,A)},he:function(f,w){r.uniform2fv(l.l[f],w)},ie:function(f,w){r.uniform3fv(l.l[f],w)},Mb:function(f,w,A,ba){r.uniform3f(l.l[f],w,A,ba)},Nb:function(f,w){r.uniform4fv(l.l[f],w)},je:function(f,w){r.uniformMatrix2fv(l.l[f],!1,w)},ke:function(f,w){r.uniformMatrix3fv(l.l[f],!1,w)},le:function(f,w){r.uniformMatrix4fv(l.l[f],!1,w)},C:function(f,w){N.set(f);w.forEach(function(A){switch(A.type){case "4f":r.uniform4fv(l.l[A.name],A.value);break;case "3f":r.uniform3fv(l.l[A.name],A.value);break;case "2f":r.uniform2fv(l.l[A.name],
A.value);break;case "1f":r.uniform1f(l.l[A.name],A.value);break;case "1i":r.uniform1i(l.l[A.name],A.value);break;case "mat2":r.uniformMatrix2fv(l.l[A.name],!1,A.value);break;case "mat3":r.uniformMatrix3fv(l.l[A.name],!1,A.value);break;case "mat4":r.uniformMatrix4fv(l.l[A.name],!1,A.value)}})},Od:function(){return"lowp"}};return N}(),r=!1,Ja=function(){function b(g){console.log("ERROR in ContextFeedForward : ",g);return!1}function d(){if(/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream){var g=
navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);g=[parseInt(g[1],10),parseInt(g[2],10),parseInt(g[3]||0,10)];return 12===g[0]||13===g[0]?!0:!1}return/(Mac)/i.test(navigator.platform)&&((g=navigator.userAgent)?(g=g.match(/Mac OS X (\d+)_(\d+)/)||g.match(/Mac OS X (\d+).(\d+)/),g=!g||3>g.length?!1:[parseInt(g[1],10),parseInt(g[2],10)]):g=!1,g&&10===g[0]&&15===g[1])?!0:!1}var e=!1,h=!1,k=!1,l=!1,q=!0,m=!1,n={o:function(){return e.width},F:function(){return e.height},la:function(){return e},Gd:function(){return r},
m:function(){return q},flush:function(){r.flush()},yc:function(){m||(m=new Uint8Array(e.width*e.height*4));r.readPixels(0,0,e.width,e.height,r.RGBA,r.UNSIGNED_BYTE,m);return m},Jd:function(){return e.toDataURL("image/jpeg")},Kd:function(){E.D();h||(h=document.createElement("canvas"),k=h.getContext("2d"));h.width=e.width;h.height=e.height;var g=n.yc(),t=k.createImageData(h.width,h.height),u,B,H=h.width,D=h.height,L=t.data;for(B=0;B<D;++B){var Q=D-B-1;for(u=0;u<H;++u){var N=4*(B*H+u);var f=4*(Q*H+u);
L[N]=g[f];L[N+1]=g[f+1];L[N+2]=g[f+2];L[N+3]=g[f+3]}}k.putImageData(t,0,0);return h.toDataURL("image/png")},Id:function(g){!h&&g&&(h=document.createElement("canvas"),k=h.getContext("2d"));var t=g?h:document.createElement("canvas");t.width=e.width;t.height=e.height;(g?k:t.getContext("2d")).drawImage(e,0,0);return t},i:function(g){g.ib&&!g.ia?e=document.getElementById(g.ib):g.ia&&(e=g.ia);e||(e=document.createElement("canvas"));e.width=g&&void 0!==g.width?g.width:512;e.height=g&&void 0!==g.height?g.height:
512;"undefined"===typeof g&&(g={});void 0===g.premultipliedAlpha&&(g.premultipliedAlpha=!1);void 0===g.La&&(g.La=!0);void 0===g.antialias&&(g.antialias=!1);var t={antialias:g.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:g.premultipliedAlpha,stencil:!1,depth:g.La};d()||(r=e.getContext("webgl2",t));r?q=!0:((r=e.getContext("webgl",t))||(r=e.getContext("experimental-webgl",t)),q=!1);if(!r)return b("WebGL is not enabled");(l=r.getExtension("WEBGL_lose_context"))&&e.addEventListener("webglcontextlost",
g.Zc,!1);if(!Ia.i())return b("Not enough capabilities");if(!Ia.fc()&&q)return b("Your configuration cannot process color buffer float");r.clearColor(0,0,0,0);r.disable(r.DEPTH_TEST);r.disable(r.BLEND);r.disable(r.DITHER);r.disable(r.STENCIL_TEST);r.GENERATE_MIPMAP_HINT&&r.hint(r.GENERATE_MIPMAP_HINT,r.FASTEST);r.disable(r.SAMPLE_ALPHA_TO_COVERAGE);r.disable(r.SAMPLE_COVERAGE);return!0},Ud:function(){if(!v.i())return!1;r.depthFunc(r.LEQUAL);r.clearDepth(1);return!0}};return n}(),Ga=function(){var b=
"undefined"===typeof v?JEShaders:v;return{ld:function(d){b!==d&&(b.U(),b=d)},Ma:function(){return b.Ma()},Ta:function(){b.Ta()},Sa:function(){b.Sa()},U:function(){b.U()},set:function(d){b.set(d)}}}(),I=function(){var b,d,e=0,h=-2,k=-2,l=!1,q={reset:function(){k=h=-2},i:function(){l||(b=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,b),r.bufferData(r.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),r.STATIC_DRAW),d=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,d),r.bufferData(r.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),r.STATIC_DRAW),q.Ca(),l=!0)},a:function(m){var n=e++,g=m.L?m.L.length:0,t="undefined"===typeof m.mode?r.STATIC_DRAW:m.mode,u=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,u);r.bufferData(r.ARRAY_BUFFER,m.Tb instanceof Float32Array?m.Tb:new Float32Array(m.Tb),t);h=n;if(m.L){var B=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,B);if(65536>m.L.length){var H=Uint16Array;var D=r.UNSIGNED_SHORT;var L=2}else H=Uint32Array,D=r.UNSIGNED_INT,L=4;r.bufferData(r.ELEMENT_ARRAY_BUFFER,
m.L instanceof H?m.L:new H(m.L),t);k=n}var Q={ec:function(N){h!==n&&(r.bindBuffer(r.ARRAY_BUFFER,u),h=n);N&&Ga.Sa()},cc:function(){k!==n&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,B),k=n)},bind:function(N){Q.ec(N);Q.cc()},Bd:function(){r.drawElements(r.TRIANGLES,g,D,0)},Cd:function(N,f){r.drawElements(r.TRIANGLES,N,D,f*L)},remove:function(){r.deleteBuffer(u);m.L&&r.deleteBuffer(B);Q=null}};return Q},Ca:function(){-1!==h&&(r.bindBuffer(r.ARRAY_BUFFER,b),h=-1);-1!==k&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,
d),k=-1)},g:function(m,n){m&&I.Ca();n&&Ga.Ta();r.drawElements(r.TRIANGLES,3,r.UNSIGNED_SHORT,0)},xc:function(){r.deleteBuffer(b);r.deleteBuffer(d)}};return q}(),E=function(){var b,d,e,h=!1,k={s:-2,vc:1};return{i:function(){if(!h){b=r.createFramebuffer();var l=Ia.m();d=l&&r.DRAW_FRAMEBUFFER?r.DRAW_FRAMEBUFFER:r.FRAMEBUFFER;e=l&&r.READ_FRAMEBUFFER?r.READ_FRAMEBUFFER:r.FRAMEBUFFER;h=!0}},Md:function(){return d},Ha:function(){return e},R:function(){return r.FRAMEBUFFER},Pd:function(){return k},Fd:function(){return b},
a:function(l){void 0===l.sb&&(l.sb=!1);var q=l.ba?l.ba:!1,m=l.width,n=void 0!==l.height?l.height:l.width,g=b,t=!1,u=!1,B=0;q&&(m=m?m:q.o(),n=n?n:q.F());var H={Kb:function(){u||(g=r.createFramebuffer(),u=!0,B=k.vc++)},Wb:function(){H.Kb();H.j();t=r.createRenderbuffer();r.bindRenderbuffer(r.RENDERBUFFER,t);r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,m,n);r.framebufferRenderbuffer(d,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,t);r.clearDepth(1)},bind:function(D,L){B!==k.s&&(r.bindFramebuffer(d,g),
k.s=B);q&&q.j();L&&r.viewport(0,0,m,n);D&&r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},vd:function(){B!==k.s&&(r.bindFramebuffer(d,g),k.s=B)},clear:function(){r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},yd:function(){r.clear(r.COLOR_BUFFER_BIT)},zd:function(){r.clear(r.DEPTH_BUFFER_BIT)},md:function(){r.viewport(0,0,m,n)},j:function(){B!==k.s&&(r.bindFramebuffer(d,g),k.s=B)},rtt:function(D){q=D;k.s!==B&&(r.bindFramebuffer(r.FRAMEBUFFER,g),k.s=B);D.j()},D:function(){r.bindFramebuffer(d,null);
k.s=-1},resize:function(D,L){m=D;n=L;t&&(r.bindRenderbuffer(r.RENDERBUFFER,t),r.renderbufferStorage(r.RENDERBUFFER,r.DEPTH_COMPONENT16,m,n))},remove:function(){r.bindFramebuffer(d,g);r.framebufferTexture2D(d,r.COLOR_ATTACHMENT0,r.TEXTURE_2D,null,0);t&&r.framebufferRenderbuffer(d,r.DEPTH_ATTACHMENT,r.RENDERBUFFER,null);r.bindFramebuffer(d,null);r.deleteFramebuffer(g);t&&r.deleteRenderbuffer(t);H=null}};l.sb&&H.Wb();return H},D:function(){r.bindFramebuffer(d,null);k.s=-1},rd:function(){r.bindFramebuffer(d,
null);r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT);r.viewport(0,0,Ia.o(),Ia.F());k.s=-1},reset:function(){k.s=-2},H:function(){0!==k.s&&(r.bindFramebuffer(d,b),k.s=0)},clear:function(){r.viewport(0,0,Ia.o(),Ia.F());r.clear(r.COLOR_BUFFER_BIT)}}}(),K=function(){function b(c){r.bindTexture(r.TEXTURE_2D,c)}function d(c){pa[0]=c;c=sa[0];var C=c>>16&32768,J=c>>12&2047,O=c>>23&255;return 103>O?C:142<O?C|31744|((255==O?0:1)&&c&8388607):113>O?(J|=2048,C|(J>>114-O)+(J>>113-O&1)):C=(C|O-112<<10|J>>1)+(J&
1)}function e(c){var C=new Uint16Array(c.length);c.forEach(function(J,O){C[O]=d(J)});return C}function h(){if(null!==ma.Ia)return ma.Ia;var c=l(e([1,1,1,1]));return null===c?!0:ma.Ia=c}function k(){if(null!==ma.Ja)return ma.Ja;var c=l(new Uint8Array([255,255,255,255]));return null===c?!0:ma.Ja=c}function l(c){if(!Ga.Ma()||!D)return null;try{var C=r.getError(),J=W.a({isFloat:!1,B:!0,array:c,width:1});C=r.getError();if(C!==r.NO_ERROR)return!1}catch(O){return!1}E.D();r.viewport(0,0,1,1);r.clearColor(0,
0,0,0);r.clear(r.COLOR_BUFFER_BIT);Ga.set("s0");J.eb(0);I.g(!1,!0);c=new Uint8Array(4);r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,c);c=.9<c[0];J.remove();E.H();return c}var q=0,m,n=0,g,t=!1,u,B,H,D=!1,L=!1,Q,N,f,w=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],A=!1,ba=!1,pa=new Float32Array(1),sa=new Int32Array(pa.buffer),ma={Ia:null,Ja:null},W={i:function(){if(!D){B=[r.RGB,!1,r.RGB,r.RGBA];H=[r.RGB,!1,r.RGB,r.RGBA];m=[r.TEXTURE0,r.TEXTURE1,r.TEXTURE2,r.TEXTURE3,r.TEXTURE4,r.TEXTURE5,r.TEXTURE6,r.TEXTURE7];
A="undefined"!==typeof JEContext;ba="undefined"!==typeof Ia;A&&JEContext.ae()&&m.push(r.TEXTURE8,r.TEXTURE9);g=[-1,-1,-1,-1,-1,-1,-1,-1];u=[r.UNSIGNED_BYTE,r.FLOAT,r.FLOAT];if(!t){for(var c=new Float32Array(16384),C=0;16384>C;++C)c[C]=2*Math.random()-1;t={random:W.a({isFloat:!0,isPot:!0,array:c,width:64}),Rb:W.a({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}D=!0}},Ic:function(){W.sd()},Sd:function(){return t.Rb},sd:function(){u[1]=Ia.ma()},gd:function(){H=B=[r.RGBA,r.RGBA,r.RGBA,
r.RGBA]},bd:function(c,C){v.set("s1");E.D();var J=c.o(),O=c.F();r.viewport(0,0,J,O);c.b(0);I.g(!1,!1);r.readPixels(0,0,J,O,r.RGBA,r.UNSIGNED_BYTE,C)},wc:function(c,C,J){r.activeTexture(r.TEXTURE0);q=0;var O=r.createTexture();b(O);var X=Ia.m()&&r.RGBA32F?r.RGBA32F:r.FLOAT;C=C instanceof Float32Array?C:new Float32Array(C);var Y=Math.log2(C.length);Y!==Math.floor(Y)&&(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));r.texParameteri(r.TEXTURE_2D,
r.TEXTURE_MAG_FILTER,r.NEAREST);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,J);r.texImage2D(r.TEXTURE_2D,0,r.RGBA,c.o(),c.F(),0,r.RGBA,X,C);b(null);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);E.H();v.set("s0");c.u();r.clearColor(0,0,0,0);r.clear(r.COLOR_BUFFER_BIT);b(O);I.g(!0,!1);r.deleteTexture(O)},a:function(c){function C(){b(ca);qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,qa);c.isPot?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,c.ub?r.MIRRORED_REPEAT:
r.REPEAT),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,c.M?r.MIRRORED_REPEAT:r.REPEAT)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE));c.pa&&"undefined"!==typeof JESETTINGS&&r.texParameterf(r.TEXTURE_2D,JEContext.Ld().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ud);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,c.isLinear?r.LINEAR:r.NEAREST);c.isLinear?r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,c.isMipmap&&!va?r.NEAREST_MIPMAP_LINEAR:
r.LINEAR):r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,c.isMipmap&&!va?r.NEAREST_MIPMAP_NEAREST:r.NEAREST);ja=B[c.aa-1];da=H[c.aa-1];la=u[J];if(Ia.m()){var p=r.RGBA32F;ja===r.RGBA&&la===r.FLOAT&&p&&(da=p);ja===r.RGB&&la===r.FLOAT&&p&&(da=p,ja=r.RGBA)}if(c.B&&!c.isFloat||c.isFloat&&c.isMipmap&&Ha.Lc())(p=r.RGBA16F)&&(da=p),la=Ia.ma();c.xb&&"undefined"!==typeof r.texStorage2D&&(y=c.xb);c.vb&&4===c.aa&&(ja=JEContext.Qd());if(c.v)r.texImage2D(r.TEXTURE_2D,0,da,ja,la,c.v);else if(c.url)r.texImage2D(r.TEXTURE_2D,
0,da,ja,la,na);else if(S){try{r.getError(),r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,la,S),r.getError()!==r.NO_ERROR&&(r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,la,null),r.getError()!==r.NO_ERROR&&r.texImage2D(r.TEXTURE_2D,0,r.RGBA,M,z,0,r.RGBA,r.UNSIGNED_BYTE,null))}catch(fa){r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,la,null)}c.isKeepArray||(S=null)}else r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,la,null);if(c.isMipmap)if(!va&&F)F.Ga(),G=!0;else if(va){p=Math.log(Math.min(M,z))/Math.log(2);var x;ka=Array(1+
p);ka[0]=ca;for(x=1;x<=p;++x){var P=Math.pow(2,x);var oa=M/P;P=z/P;var ea=r.createTexture();b(ea);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);r.texImage2D(r.TEXTURE_2D,0,da,oa,P,0,ja,la,null);b(null);ka[x]=ea}G=!0}b(null);g[q]=-1;qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1);T=!0;Z&&F&&(Z(F),Z=!1)}"undefined"===typeof c.isFloat&&(c.isFloat=!1);"undefined"===typeof c.B&&(c.B=!1);"undefined"===typeof c.isPot&&(c.isPot=!0);"undefined"===
typeof c.isLinear&&(c.isLinear=!1);"undefined"===typeof c.isMipmap&&(c.isMipmap=!1);"undefined"===typeof c.Da&&(c.Da=!1);void 0===c.pa&&(c.pa=!1);void 0===c.M&&(c.M=!1);void 0===c.ub&&(c.ub=!1);void 0===c.vb&&(c.vb=!1);void 0===c.aa&&(c.aa=4);void 0===c.tb&&(c.tb=!1);"undefined"===typeof c.isFlipY&&(c.isFlipY=c.url||c.array?!0:!1);"undefined"===typeof c.isKeepArray&&(c.isKeepArray=!1);c.data&&(c.array="string"===typeof c.data?Fa(c.data):c.isFloat?new Float32Array(c.data):new Uint8Array(c.data),c.isFlipY=
!1);var J=0,O=c.v?!0:!1,X=null,Y=null,aa=!1,ra=null;c.isFloat&&(c.B=!0);c.B&&(J=1);c.tb||Ia.m()||!c.isFloat||!ba||Ia.gb()||(c.isFloat=!1);c.isFloat&&(J=2);c.pa&&A&&!JEContext.Wd()&&(c.pa=!1);var ca=r.createTexture(),Z=c.Da,na=null,S=!1,M=0,z=0,T=!1,U=n++,R=!1,ha,ta,Ca,Aa,da,ja,la,qa=c.isFlipY,va=c.B&&c.isMipmap&&"undefined"!==typeof Ha&&!Ha.hc()?!0:!1,ka,y=-1,G=!1;"undefined"!==typeof c.width&&c.width&&(M=c.width,z="undefined"!==typeof c.height&&c.height?c.height:M);var F={get:function(){return ca},
o:function(){return M},F:function(){return z},Td:function(){return c.url},Xd:function(){return c.isFloat},Zd:function(){return c.B},$d:function(){return c.isLinear},Ga:function(){r.generateMipmap(r.TEXTURE_2D)},fb:function(p,x){va?(p||(p=F.lb()),F.Ba(x),b(ka[p]),g[x]=-1):F.b(x)},lb:function(){-1===y&&(y=Math.log(M)/Math.log(2));return y},kb:function(p){if(va){p||(p=F.lb());v.set("s11");F.Ba(0);var x,P=M,oa=z;for(x=1;x<=p;++x)P/=2,oa/=2,v.I("u7",.25/P,.25/oa),r.viewport(0,0,P,oa),b(ka[x-1]),r.framebufferTexture2D(E.R(),
r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ka[x],0),I.g(!1,1===x);g[0]=-1}else F.Ga()},Ba:function(p){p!==q&&(r.activeTexture(m[p]),q=p)},b:function(p){if(!T)return!1;F.Ba(p);if(g[p]===U)return!1;b(ca);g[p]=U;return!0},eb:function(p){r.activeTexture(m[p]);q=p;b(ca);g[p]=U},j:function(){r.framebufferTexture2D(E.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ca,0)},u:function(){r.viewport(0,0,M,z);r.framebufferTexture2D(E.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,ca,0)},pe:function(){r.framebufferTexture2D(E.R(),r.COLOR_ATTACHMENT0,
r.TEXTURE_2D,null,0)},resize:function(p,x){M=p;z=x;C()},clone:function(p){p=W.a({width:M,height:z,B:c.B,isFloat:c.isFloat,isLinear:c.isLinear,M:c.M,isFlipY:p?!qa:qa,isPot:c.isPot});Ga.set("s0");E.H();p.j();r.viewport(0,0,M,z);F.b(0);I.g(!0,!0);return p},md:function(){r.viewport(0,0,M,z)},remove:function(){r.deleteTexture(ca);F=null},refresh:function(){F.eb(0);qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0);O?r.texImage2D(r.TEXTURE_2D,0,da,ja,r.UNSIGNED_BYTE,c.v):r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,
la,S);qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1)},hb:function(){var p=M*z*4;ta=[new Uint8Array(p),new Uint8Array(p),new Uint8Array(p),new Uint8Array(p)];ha=[new Float32Array(ta[0].buffer),new Float32Array(ta[1].buffer),new Float32Array(ta[2].buffer),new Float32Array(ta[3].buffer)];Ca=new Uint8Array(4*p);Aa=new Float32Array(Ca.buffer);R=!0},Ra:function(){R||F.hb();r.readPixels(0,0,M,4*z,r.RGBA,r.UNSIGNED_BYTE,Ca);var p,x=M*z,P=2*x,oa=3*x;for(p=0;p<x;++p)ha[0][p]=Aa[p],ha[1][p]=Aa[p+x],ha[2][p]=Aa[p+
P],ha[3][p]=Aa[p+oa];return ha},Ea:function(){E.D();v.set("s12");F.b(0);for(var p=0;4>p;++p)r.viewport(0,z*p,M,z),v.Nb("u8",w[p]),I.g(!1,0===p)},qe:function(p){var x=la===u[0]&&!k();b(ca);qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,qa);x?(aa||(X=document.createElement("canvas"),X.width=M,X.height=z,Y=X.getContext("2d"),ra=Y.createImageData(M,z),aa=!0),ra.data.set(p),Y.putImageData(ra,0,0),r.texImage2D(r.TEXTURE_2D,0,da,ja,la,X)):r.texImage2D(r.TEXTURE_2D,0,da,M,z,0,ja,la,p);g[q]=U;qa&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,
!1)},re:function(p,x){b(ca);r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,x);r.texImage2D(r.TEXTURE_2D,0,da,ja,la,p);g[q]=U;x&&r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1)},ee:function(p,x){var P=M*z,oa=4*P;p=c.B?p?"RGBE":"JSON":"RGBA";x&&(p=x);x=Ia.m()&&!1;switch(p){case "RGBE":var ea="s41";break;case "JSON":ea=x?"s0":"s12";break;case "RGBA":case "RGBAARRAY":ea="s6"}R||("RGBA"===p||"RGBE"===p||"RGBAARRAY"===p?(ta=new Uint8Array(oa),R=!0):"JSON"!==p||x||F.hb());E.D();v.set(ea);F.b(0);if("RGBA"===p||"RGBE"===p||
"RGBAARRAY"===p){r.viewport(0,0,M,z);I.g(!0,!0);r.readPixels(0,0,M,z,r.RGBA,r.UNSIGNED_BYTE,ta);if("RGBAARRAY"===p)return{data:ta};L||(Q=document.createElement("canvas"),N=Q.getContext("2d"),L=!0);Q.width=M;Q.height=z;f=N.createImageData(M,z);f.data.set(ta);N.putImageData(f,0,0);var fa=Q.toDataURL("image/png")}else if("JSON"===p)if(x)fa=new Float32Array(P),r.viewport(0,0,M,z),I.g(!0,!0),r.readPixels(0,0,M,z,r.RGBA,r.FLOAT,fa);else{for(fa=0;4>fa;++fa)r.viewport(0,z*fa,M,z),v.Nb("u8",w[fa]),I.g(!fa,
!fa);F.Ra();fa=Array(P);for(ea=0;ea<P;++ea)fa[4*ea]=ha[0][ea],fa[4*ea+1]=ha[1][ea],fa[4*ea+2]=ha[2][ea],fa[4*ea+3]=ha[3][ea]}return{format:p,data:fa,width:M,height:z,isMirrorY:c.M,isFlipY:"RGBA"===p?c.isFlipY:!c.isFlipY}}};c.isMipmap&&!va&&T&&!G&&(F.Ga(),G=!0);if(c.url)b(ca),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,1,1,0,r.RGBA,r.UNSIGNED_BYTE,null),na=new Image,na.Ad="Anonymous",na.crossOrigin="Anonymous",na.src=c.url,na.onload=function(){M=na.width;z=na.height;C()};else if(c.v){var ya=function(){M=void 0!==
c.v.videoWidth?c.v.videoWidth:c.v.width;z=void 0!==c.v.videoHeight?c.v.videoHeight:c.v.height;M?C():setTimeout(ya,1)};ya()}else c.array?(c.B&&!c.isFloat?c.array instanceof Uint16Array?(S=c.array,C()):h()?(S=e(c.array),C()):(C(),W.wc(F,c.array,qa)):(S=c.isFloat?c.array instanceof Float32Array?c.array:new Float32Array(c.array):c.array instanceof Uint8Array?c.array:new Uint8Array(c.array),C()),c.isKeepArray||(S&&S!==c.array&&(S=null),delete c.array)):C();F.Fc=F.o;Z&&T&&(Z(F),Z=!1);return F},D:function(c){c!==
q&&(r.activeTexture(m[c]),q=c);g[c]=-1;b(null)},wd:function(c){t.random.b(c)},reset:function(){for(var c=0;c<m.length;++c)g[c]=-1;q=-1},de:function(){q=-1},me:function(){for(var c=0;c<m.length;++c)W.D(c)},xc:function(){t&&(t.random.remove(),t.Rb.remove())},oe:function(c,C){if("RGBA"===c.format||"RGBE"===c.format){var J=new Image;J.src=c.data;J.onload=function(){W.a({M:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,v:J,Da:function(O){if("RGBA"===c.format)C(O);else{var X=c.width,Y=c.height,aa=W.a({M:c.isMirrorY,
isFloat:!0,width:X,height:Y,isFlipY:c.isFlipY});E.H();r.viewport(0,0,X,Y);v.set("s42");aa.j();O.b(0);I.g(!0,!0);W.D(0);C(aa);r.flush();setTimeout(O.remove,50)}}})}}else"JSON"===c.format?C(W.a({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):C(!1)}};return W}(),Ka={a:function(b){var d=[K.a(b),K.a(b)],e=[d[1],d[0]],h=e,k={Lb:function(l){h[1].j();h[0].b(l);k.Qb()},fe:function(l){h[1].u();h[0].b(l);k.Qb()},Qb:function(){h=h===d?e:d},refresh:function(){h[0].refresh();
h[1].refresh()},b:function(l){h[0].b(l)},Ac:function(){return h[0]}};return k}},Ia=function(){function b(){d="undefined"===typeof Ja?JEContext:Ja;e=!0}var d,e=!1,h=!1,k=!1,l=!1,q=!1,m=!1,n=!1,g=!1,t=!1,u=!1,B=!1,H=!0,D=!0,L=!0,Q=!1,N="undefined"===typeof window?{}:window,f={i:function(){if(e)return!0;b();f.jb();f.Fa();f.sc();f.tc();E.i();K.i();if(!f.nc())return!1;I.i();K.Ic();return!0},o:function(){e||b();return d.o()},F:function(){e||b();return d.F()},m:function(){e||b();return d.m()},sc:function(){B=
(u=r.getExtension("EXT_color_buffer_float")||r.getExtension("WEBGL_color_buffer_float")||r.getExtension("OES_color_buffer_float"))?!0:!1;N.GL_EXT_COLORBUFFERFLOAT=u},tc:function(){r.getExtension("EXT_color_buffer_half_float")||r.getExtension("WEBGL_color_buffer_half_float")||r.getExtension("OES_color_buffer_half_float")},jb:function(){if(!h){this.m()||(k=r.getExtension("OES_texture_float")||r.getExtension("MOZ_OES_texture_float")||r.getExtension("WEBKIT_OES_texture_float"),q=(N.GL_EXT_FLOAT=k)?!0:
!1);if(q||this.m())l=r.getExtension("OES_texture_float_linear")||r.getExtension("MOZ_OES_texture_float_linear")||r.getExtension("WEBKIT_OES_texture_float_linear"),N.GL_EXT_FLOATLINEAR=l;h=!0}},Fa:function(){if(!t){if(!this.m()){if(m=r.getExtension("OES_texture_half_float")||r.getExtension("MOZ_OES_texture_half_float")||r.getExtension("WEBKIT_OES_texture_half_float"))Q=m.HALF_FLOAT_OES,n=!0;!Q&&r.HALF_FLOAT&&(Q=r.HALF_FLOAT);!Q&&r.FLOAT&&(Q=r.FLOAT);N.GL_EXT_HALFFLOAT=m}if(n||this.m())g=r.getExtension("OES_texture_half_float_linear")||
r.getExtension("MOZ_OES_texture_half_float_linear")||r.getExtension("WEBKIT_OES_texture_half_float_linear"),N.GL_EXT_HALFFLOATLINEAR=g;t=!0}},ma:function(){if(f.m())return r.HALF_FLOAT;f.Fa();return n?Q:r.FLOAT},gb:function(){return H},gc:function(){return D},xd:function(){return L},fc:function(){return B},pc:function(){D=H=!0;var w=r.createFramebuffer();r.bindFramebuffer(r.FRAMEBUFFER,w);var A=r.createTexture();r.bindTexture(r.TEXTURE_2D,A);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);
r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST);r.texImage2D(r.TEXTURE_2D,0,f.m()&&r.RGBA32F?r.RGBA32F:r.RGBA,1,1,0,r.RGBA,r.FLOAT,null);r.framebufferTexture2D(E.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,A,0);var ba=r.checkFramebufferStatus(E.Ha());ba!==r.FRAMEBUFFER_COMPLETE&&(H=!1);r.texImage2D(r.TEXTURE_2D,0,f.m()&&r.RGBA16F?r.RGBA16F:r.RGBA,1,1,0,r.RGBA,f.ma(),null);r.framebufferTexture2D(E.R(),r.COLOR_ATTACHMENT0,r.TEXTURE_2D,A,0);ba=r.checkFramebufferStatus(E.Ha());ba!==r.FRAMEBUFFER_COMPLETE&&
(D=!1);r.bindTexture(r.TEXTURE_2D,null);r.bindFramebuffer(r.FRAMEBUFFER,null);r.deleteTexture(A);r.deleteFramebuffer(w)},oc:function(){var w=E.a({width:1});w.Kb();var A=K.a({width:1,isFloat:!0,aa:3});w.j();A.j();r.flush();r.checkFramebufferStatus(E.Ha())!==r.FRAMEBUFFER_COMPLETE?(K.gd(),L=!1):L=!0;w.remove();A.remove()},nc:function(){f.pc();if(!H&&!D)return!1;f.oc();return!0}};return f}(),Ha=function(){function b(D,L,Q,N){r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,N?r.NEAREST_MIPMAP_NEAREST:
r.LINEAR);try{var f=r.getError();f!==r.NO_ERROR&&console.log("GLERR in test_mipmapping() :",f);r.texImage2D(r.TEXTURE_2D,0,D,2,2,0,r.RGBA,L,Q);f=r.getError();if(f!==r.NO_ERROR)return!1}catch(w){return!1}N&&r.generateMipmap(r.TEXTURE_2D);I.Ca();I.g(!1,!0);r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,m);f=r.getError();f===r.INVALID_OPERATION&&"undefined"!==typeof r.PIXEL_PACK_BUFFER&&(r.bindBuffer(r.PIXEL_PACK_BUFFER,null),r.readPixels(0,0,1,1,r.RGBA,r.UNSIGNED_BYTE,m),f=r.getError());return f!==r.NO_ERROR?
!1:0!==m[0]}function d(D){return Ia.gb()&&b(u,r.FLOAT,new Float32Array(g),D)?(l=k.Ya,!0):!1}function e(D){return Ia.gc()?b(B,Ia.ma(),new Uint16Array(g),D)||b(B,r.FLOAT,new Float32Array(g),D)?(l=k.xa,!0):!1:!1}var h=!1,k={Ya:3,xa:2,RGBA8:0},l=k.RGBA8,q,m=new Uint8Array(4),n=[.8,1,.8,1],g=n.concat(n,n,n),t=!0,u,B,H={i:function(){Ia.jb();Ia.Fa();B=u=r.RGBA;if(Ja.m()){var D=r.RGBA32F;D&&(u=D);(D=r.RGBA16F)&&(B=D)}I.i();E.reset();E.D();r.viewport(0,0,1,1);v.set("s0");h=!0;q=r.createTexture();r.activeTexture(r.TEXTURE0);
r.bindTexture(r.TEXTURE_2D,q);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.REPEAT);r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST);if(e(!0)||d(!0))return!0;t=!1;if(e(!1)||d(!1))return!0;if(Ja.m()){B=u=r.RGBA;if(e(!0)||d(!0))return!0;t=!1;if(e(!1)||d(!1))return!0}return!1},hc:function(){return t},Nd:function(){return l},Yd:function(){h||H.i();return l===k.Ya},Lc:function(){h||H.i();return l===k.xa}};return H}(),La={a:function(b){var d=
K.a(b.alpha),e=K.a(b.beta);return{rc:function(){d.b(1);e.b(2)}}}},Oa={a:function(b){var d=b.od;d.index=b.index;d.N=b.N;d.parent=b.parent;switch(d.type){case "input":b=Ma.a(d);break;default:b=Na.a(d)}return b}},Ma={a:function(b){"undefined"===typeof b.sift&&(b.sift=!1);"undefined"===typeof b.DWT&&(b.DWT=!1);"undefined"===typeof b.blur&&(b.blur=!1);"undefined"===typeof b.siftOutWidth&&(b.siftOutWidth=!1);"undefined"===typeof b.density&&(b.density=1);var d=!1;if(b.mask){d=!0;a&&void 0!==a.ac&&(b.mask=
a.ac+b.mask);var e=K.a({isFloat:!1,url:b.mask})}var h=!1,k="undefined"!==typeof b.preprocessing?b.preprocessing:!1,l=!1,q=!1;b.sift?Sift.i({Hc:r,ia:!1,width:b.size,ce:b.siftOutWidth}):b.DWT&&DWT.i({Hc:r,ia:!1,width:b.size});var m=!1;b.customInputShader&&(m="s43",v.$a({name:"_",id:m,c:b.customInputShader,f:["uSource"],precision:"lowp"}),v.C(m,[{type:"1i",name:"_",value:0}]));switch(k){case "sobel":var n="s32";l=!0;break;case "meanNormalization":n="s33";l=!0;break;case "grayScale":n="s29";l=!1;break;
case "grayScaleTilt":n="s30";q=!0;l=!1;break;case "rgbGrayTilt":n="s31";q=!0;l=!1;break;case "copy":n=m?m:"s0";break;case "inputLightRegulation":n=m?m:"s29";Pa.i({width:b.size,zb:b.nBlurPass,Kc:!1});h=!0;break;case "direct":case "none":n=!1;break;default:n="s3"}q&&v.C(n,[{name:"u28",type:"1f",value:b.tilt}]);d&&(n+="Mask");if(b.blur)var g=K.a({isFloat:!1,isPot:!1,width:b.size});var t=K.a({isFloat:!1,isPot:!1,width:b.size}),u={o:function(){return b.sift?Sift.$():b.size},$:function(){return u.o()},
Dc:function(){return b.sift?Sift.na():b.DWT?DWT.na():h?Pa.na():t},w:function(){E.H();b.blur&&(g.u(),v.set("s44"),v.I("u7",1/b.size,1/b.size),I.g(!1,!0),g.b(0));n&&(v.set(n),l&&v.A("u29",1/b.size),t.u(),d&&e.b(1),I.g(!1,!1),t.b(0),h?Pa.Qa(t):b.sift?(v.U(),Sift.Qa()):b.DWT&&(v.U(),DWT.Qa(4)))}};return u}},Na={a:function(b){"undefined"===typeof b.disableNormalize&&(b.disableNormalize=1);var d=[],e=[],h,k,l=!1,q,m=!0,n,g,t=b.isReorganize?b.isReorganize:!1,u=b.kernelsCount?!0:!1,B=b.dynPelu?La.a(b.dynPelu):
!1,H=B?!0:!1,D={isEnabled:!1},L;if("softmax"===b.type){b.activation="softmax";b.size=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(b.num_classes))));b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.N.$();b.gain="undefined"!==typeof b.gain?b.gain:1;v.C("s20",[{type:"1f",name:"u10",value:b.gain}]);var Q=K.a({isFloat:!0,isPot:!1,width:b.size}),N=K.a({isFloat:!0,isPot:!1,width:b.size,isMipmap:!0});m=!1;var f=new Uint8Array(Math.pow(4*b.size,2)),w;for(w=0;w<b.size*b.size;++w){var A=w<b.num_classes?255:
0;f[4*w]=A;f[4*w+1]=A;f[4*w+2]=A;f[4*w+3]=A}var ba=K.a({isFloat:!1,isPot:!1,width:b.size,array:f})}else b.cost?(b.sparsity="undefined"!==typeof b.sparsity?b.sparsity:b.N.$(),m=!1):"full"===b.connectivityUp&&(b.sparsity=b.N.$());var pa={elu:"s15",elu01:"s16",relu:"s14",arctan:"s18",sigmoid:"s13",copy:"s0",softplus:"s19",softmax:"s20",dynPelu:"s17"}[b.activation],sa=b.sparsity*b.sparsity,ma=!1,W=b.size;if(b.maxPooling){switch(b.maxPooling.size){case 2:var c="s34";break;case 4:c="s35"}ma=!0;W/=b.maxPooling.size;
var C=K.a({isFloat:!0,isPot:!1,width:W})}var J=void 0!==b.Yc&&b.Yc?!0:!1,O=null,X=null,Y=null;J&&(O="s45"+b.index.toString(),v.qb("s45",O,[((b.normalization.n-1)/2).toFixed(1)]),v.C(O,[{type:"1i",name:"u1",value:0},{type:"2f",name:"u7",value:[1/b.size,1/b.size]},{type:"1f",name:"u6",value:b.normalization.alpha},{type:"1f",name:"u9",value:b.normalization.beta},{type:"1f",name:"u33",value:b.normalization.k}]),X=K.a({isFloat:!0,isPot:!0,width:b.size}),Y=K.a({isFloat:!0,isPot:!0,width:b.size}));var aa,
ra,ca,Z;m&&(Z=K.a({isFloat:!0,isPot:!1,width:b.size}));var na=K.a(b.bias),S,M={o:function(){return b.size},$:function(){return W},mb:function(){return b.num_classes},dc:function(z){L.b(z)},ad:function(){b.remap&&b.remap.isEnabled&&(D={isEnabled:!0,Nc:K.a({isFloat:!1,isFlipY:!1,array:new Uint8Array(b.remap.maskTexture.data),width:b.remap.maskTexture.width,isPot:!1}),layers:b.remap.layers.map(function(z){return b.parent.Bc(z)}),depth:b.remap.depth})},jd:function(){switch(b.connectivityUp){case "gaussian":S=
Qa.a(b.connectivity);break;case "direct":S=Ra.a(b.connectivity);break;case "square":S=Sa.a(b.connectivity);break;case "squareFast":S=Ta.a(b.connectivity,b.activation);break;case "full":S=Ua.a(b.connectivity);break;case "conv":g=b.kernelsCount,S=Va.a(b.connectivity),t&&(n=K.a({width:W,isFloat:!0,isFlipY:!1,isPot:!1}))}if(S.O){var z=b.size*b.sparsity;ra=Math.log(z/b.size)/Math.log(2);aa=K.a({isMipmap:!0,isFloat:!0,isPot:!0,width:z,xb:ra});ca=K.a({isFloat:!0,isPot:!0,width:b.size})}},w:function(z,T){L=
z;S.O?(aa.u(),u&&na.b(2),S.w(D),aa.b(0),aa.kb(ra),ca.u(),u?v.set("s0"):(v.set("s28"),v.A("u27",sa),na.b(1)),aa.fb(ra,0),I.g(!1,!1),v.set(pa),J?X.j():Z.j(),ca.b(0),H&&B.rc(),I.g(!1,!1)):(Z.u(),na.b(1),S.w());J&&(v.set(O),Y.j(),X.b(0),I.g(!1,!1),v.set("s46"),v.A("u6",1),Z.j(),Y.b(1),I.g(!1,!1));if(m)return ma?(C.u(),Z.b(0),v.set(c),v.I("u7",1/b.size,1/b.size),I.g(!1,!1),T=C):T=Z,T.b(0),t&&(n.j(),v.set("s22"),v.I("u14",g,W/g),I.g(!1,!1),T=n,n.b(0)),T;if("softmax"===b.type){v.set("s20");Z.b(0);Q.j();
I.g(!1,!1);b.disableNormalize?z=Q:(v.set("s2"),Q.b(0),ba.b(1),N.j(),I.g(!1,!1),v.set("s0"),k.u(),N.b(0),N.kb(!1),I.g(!1,!1),v.set("s21"),h.u(),N.fb(!1,0),v.A("u12",Z.Fc()),k.b(1),I.g(!1,!1),z=h);if(T){switch(l){case "cpuRGBAAvg":break;default:var U=M.Eb(z)}return U}return!1}if(b.cost){v.set("gpuRawAvg"===l?"s8":"s7");T=Z;b.disableNormalize||(v.A("u4",1/b.size),h.u(),Z.b(0),I.g(!1,!1),T=h);switch(l){case "cpuRGBA2Float":T.Ea();U=M.Eb(T);q(U);break;case "gpuRawAvg":case "gpuRaw":T.b(0),q(T)}return!1}},
kc:function(z){z&&"undefined"!==typeof z.Db&&(l=z.Db,q=z.$c);Z=K.a({isFloat:!0,isPot:!0,isMipmap:"softmax"===b.type,width:b.size});"softmax"===b.type&&(k=K.a({isFloat:!0,isPot:!0,width:1}));var T=0,U=0,R="undefined"!==typeof b.num_classes&&b.num_classes?b.num_classes:b.size*b.size;for(z=0;z<R;++z)d.push(T+(b.size-1-U)*b.size),e.push([-1,-1,-1,-1]),++T,T===b.size&&(T=0,++U);b.disableNormalize||(h=K.a({isFloat:!0,isPot:!0,width:b.size}))},Eb:function(z){z.Ea();var T=z.Ra();d.forEach(function(U,R){e[R][0]=
T[0][U];e[R][1]=T[1][U];e[R][2]=T[2][U];e[R][3]=T[3][U]});return e}};b.N&&M.jd(b.N);return M}};
function Wa(){var b={},d,e,h;b||(b={});this.Bc=function(k){return d[k]};this.fd=function(k){var l=!1;d=k.map(function(q,m){return l=q=Oa.a({index:m,parent:this,od:q,N:l})});e=d[0];h=d[d.length-1];d.forEach(function(q,m){0!==m&&q.ad()})};this.w=function(k,l){var q=l;d.forEach(function(m){q=m.w(q,k)});return q};this.zc=function(){return e.o()};this.Ec=function(){return h.o()};this.na=function(){return h.Dc()};this.hd=function(k){h.kc(k)};this.mb=function(){return h.mb()}}
var Ra={a:function(b){var d=K.a(b.weights);delete b.weights.data;return{O:!0,Z:function(){return 1},Gc:function(){return d},w:function(){v.set("s27");d.b(1);I.g(!1,!1)}}}},Ua={a:function(b){var d=b.fromLayerSize,e=K.a(b.weights);return{O:!0,Z:function(){return d},w:function(h){if(h.isEnabled){v.set("s25");h.Nc.b(3);var k,l=Math.min(h.layers.length,h.depth);for(k=0;k<l;++k)h.layers[k].dc(4+k)}else v.set("s24");v.A("u18",b.toLayerSize);e.b(1);I.g(!1,!1)}}}},Qa={a:function(b){var d=b.toSparsity*b.toLayerSize,
e=d/b.fromLayerSize,h=K.a(b.weights);K.a({width:d,isFloat:!0,array:new Float32Array(b.fromBindings),isPot:!0});var k=K.a({width:d,isFloat:!0,array:new Float32Array(b.toBindings),isPot:!0});return{O:!0,Z:function(){return e},w:function(){v.set("s23");h.b(1);k.b(2);I.g(!1,!0)}}}},Sa={a:function(b){var d=b.fromLayerSize,e=b.toLayerSize,h=b.toSparsity,k=h*e,l=k/d,q=d/e,m,n,g,t,u=0,B=0,H=0,D=Array(h*e*h*e*4),L=Array(h*e*h*e*4),Q=Array(d*d);for(m=0;m<Q.length;++m)Q[m]=0;var N=Math.floor(h/2),f=.5/e,w=.5/
d,A=.5/k;for(m=0;m<e;++m)for(n=0;n<e;++n){var ba=Math.round(m*q);var pa=Math.round(n*q);var sa=m/e;var ma=n/e;sa+=f;ma+=f;for(g=0;g<h;++g)for(t=0;t<h;++t){var W=u/k;var c=B/k;var C=ba+g-N;var J=pa+t-N;0>C&&(C+=d);0>J&&(J+=d);C>=d&&(C-=d);J>=d&&(J-=d);var O=C/d;var X=J/d;c=1-c-1/k;O+=w;X+=w;W+=A;c+=A;var Y=m*h+g,aa=n*h+t;aa=e*h-aa-1;Y=aa*e*h+Y;D[4*Y]=W;D[4*Y+1]=c;D[4*Y+2]=O;D[4*Y+3]=X;O=Q[J*d+C]++;X=O%l;C=C*l+X;J=J*l+(O-X)/l;J=d*l-1-J;J=J*d*l+C;L[4*J]=W;L[4*J+1]=c;L[4*J+2]=sa;L[4*J+3]=ma;++u>=k&&(u=
0,++B);++H}}var ra=K.a(b.weights);K.a({width:k,isFloat:!0,array:new Float32Array(L),isPot:!0});L=null;var ca=K.a({width:k,isFloat:!0,array:new Float32Array(D),isPot:!0});D=null;return{O:!0,Z:function(){return l},w:function(){v.set("s23");ra.b(1);ca.b(2);I.g(!1,!1)}}}},Va={a:function(b){var d=b.kernelsCount,e=b.toSparsity,h=e*b.toLayerSize/b.fromLayerSize,k=K.a(b.weights);return{O:!0,Z:function(){return h},Rd:function(){return e},Gc:function(){return k},w:function(){v.set("s26");v.A("u24",d);v.A("u25",
e);v.A("u18",b.toLayerSize);v.A("u26",b.fromLayerSize);k.b(1);I.g(!1,!1)}}}},Ta={a:function(b,d){var e=b.fromLayerSize,h=b.toLayerSize,k=b.toSparsity,l=b.stride?b.stride:1,q=k*h/e,m=h<e,n=e/h,g=K.a(b.weights),t="s47"+[e.toString(),h.toString(),k.toString(),l.toString(),d].join("_");v.uc(t)||(b=Da(d),h=[{type:"1f",name:"u18",value:h},{type:"1f",name:"u32",value:l}],m&&h.push({type:"1f",name:"u26",value:e}),e=[(m?q:k).toFixed(1),b],m&&e.push(n.toFixed(1)),v.qb(m?"s40":"s39",t,e),v.C(t,h.concat([{type:"1i",
name:"u16",value:0},{type:"1i",name:"u23",value:1},{type:"1i",name:"u15",value:3}])));return{O:!1,Z:function(){return q},w:function(){v.set(t);g.b(3);I.g(!1,!1)}}}},Pa=function(){var b,d,e,h,k,l,q,m,n;return{i:function(g){b=g.zb?g.zb:3;d=g.width?g.width:64;h=g.Kc?!0:!1;g={isFloat:!1,width:d,isPot:!1,isFlipY:!1};k=K.a(g);l=K.a(g);q=K.a(g);m=K.a(g);n=K.a({isFloat:!0,width:d,isPot:!1,isFlipY:!1});e=1/d},Qa:function(g){v.set("s37");for(var t=0;t<b;++t)k.j(),v.I("u7",e,0),I.g(h,!1),l.j(),k.b(0),v.I("u7",
0,e),I.g(h,!1),l.b(0);v.set("s36");m.j();g.b(0);I.g(h);v.set("s37");for(t=0;t<b;++t)q.j(),m.b(0),v.I("u7",e,0),I.g(h,!1),m.j(),q.b(0),v.I("u7",0,e),I.g(h,!1);v.set("s38");n.j();g.b(0);l.b(1);m.b(2);I.g(h,!1);n.b(0)},na:function(){return n}}}();function Xa(b,d){b[d]=!0;b.setAttribute(d,"true")}function Ya(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}
function Za(){var b=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(b[1],10),parseInt(b[2],10),parseInt(b[3]||0,10)]}function $a(){var b=navigator.userAgent.toLowerCase();return-1!==b.indexOf("safari")&&-1===b.indexOf("chrome")?!0:!1}function ab(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function bb(b){if(!b)return b;var d=!1;if(b.video){var e=function(h){var k={};"undefined"!==typeof h.min&&(k.min=h.min);"undefined"!==typeof h.max&&(k.max=h.max);"undefined"!==typeof h.ideal&&(k.ideal=h.ideal);return k};d={};"undefined"!==typeof b.video.width&&(d.width=e(b.video.width));"undefined"!==typeof b.video.height&&(d.height=e(b.video.height));"undefined"!==typeof b.video.facingMode&&(d.facingMode=b.video.facingMode)}d={audio:b.audio,video:d};"undefined"!==typeof b.deviceId&&(d.deviceId=b.deviceId);
return d}function cb(b){var d=b.video.width;b.video.width=b.video.height;b.video.height=d;return b}
function db(b){function d(u){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(B,H){return Math.abs(B-u)-Math.abs(H-u)})}function e(u){var B=bb(b);h.push(u(B))}var h=[];if(!b||!b.video)return h;if(b.video.width&&b.video.height){if(b.video.width.ideal&&b.video.height.ideal){var k=d(b.video.width.ideal).slice(0,3),l=d(b.video.height.ideal).slice(0,3),q={},m=0;for(q.K=void 0;m<k.length;q={K:q.K},++m){q.K=k[m];var n={},g=0;for(n.J=void 0;g<l.length;n={J:n.J},++g)if(n.J=l[g],
q.K!==b.video.width.ideal||n.J!==b.video.height.ideal){var t=Math.max(q.K,n.J)/Math.min(q.K,n.J);t<4/3-.1||t>16/9+.1||e(function(u,B){return function(H){H.video.width.ideal=u.K;H.video.height.ideal=B.J;return H}}(q,n))}}}e(function(u){return cb(u)})}b.video.width&&b.video.height&&(b.video.width.ideal&&b.video.height.ideal&&e(function(u){delete u.video.width.ideal;delete u.video.height.ideal;return u}),e(function(u){delete u.video.width;delete u.video.height;return u}));b.video.facingMode&&(e(function(u){delete u.video.facingMode;
return u}),b.video.width&&b.video.height&&e(function(u){cb(u);delete u.video.facingMode;return u}));h.push({audio:b.audio,video:!0});return h}function eb(b){try{var d=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){d=window.innerHeight>window.innerWidth}if(d&&b&&b.video){d=b.video.width;var e=b.video.height;d&&e&&d.ideal&&e.ideal&&d.ideal>e.ideal&&(b.video.height=d,b.video.width=e)}}
function fb(b){b.volume=0;Xa(b,"muted");if($a()){if(1===b.volume){var d=function(){b.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){b.volume=0;Xa(b,"muted")},5)}}
function gb(b,d,e,h){function k(q){l||(l=!0,e(q))}var l=!1;navigator.mediaDevices.getUserMedia(h).then(function(q){function m(){setTimeout(function(){if(b.currentTime){var n=b.videoWidth,g=b.videoHeight;if(0===n||0===g)k("VIDEO_NULLSIZE");else{n&&(b.style.width=n.toString()+"px");g&&(b.style.height=g.toString()+"px");n={ic:null,nd:null,Qc:null};try{var t=q.getVideoTracks()[0];t&&(n.Qc=t,n.ic=t.getCapabilities(),n.nd=t.getSettings())}catch(u){}$a()||Ya()?b.parentNode&&null!==b.parentNode?(l||d(b,q,
n),setTimeout(function(){b.play()},100)):(document.body.appendChild(b),fb(b),l||d(b,q,n),setTimeout(function(){b.style.transform="scale(0.0001,0.0001)";b.style.position="fixed";b.style.bottom="0px";b.style.right="0px";fb(b);setTimeout(function(){b.play()},100)},80)):l||d(b,q,n)}}else k("VIDEO_NOTSTARTED")},700)}"undefined"!==typeof b.srcObject?b.srcObject=q:(b.src=window.URL.createObjectURL(q),b.videoStream=q);fb(b);b.addEventListener("loadeddata",function(){var n=b.play();fb(b);"undefined"===typeof n?
m():n.then(function(){m()}).catch(function(){k("VIDEO_PLAYPROMISEREJECTED")})},!1)}).catch(function(q){k(q)})}
function hb(b,d,e){var h=ab()?document.createElement("video"):!1;if(h)if(ab()){if(e&&e.video){if(Ya()){var k=Za();(12>k[0]||12===k[0]&&2>k[1])&&eb(e)}e.video.width&&e.video.width.ideal&&(h.style.width=e.video.width.ideal+"px");e.video.height&&e.video.height.ideal&&(h.style.height=e.video.height.ideal+"px")}Xa(h,"autoplay");Xa(h,"playsinline");e&&e.audio?h.volume=0:Xa(h,"muted");gb(h,b,function(){function l(m){if(0===m.length)d("INVALID_FALLBACKCONSTRAINTS");else{var n=m.shift();gb(h,b,function(){l(m)},
n)}}var q=db(e);l(q)},e)}else d&&d("MEDIASTREAMAPI_NOTFOUND");else d&&d("VIDEO_NOTPROVIDED")}
var ib=function(){var b=0,d,e,h,k;return{i:function(l,q){b=l.length;d=q;e=l;h=new Float32Array(b);k=new Float32Array(b)},Cc:function(){return k},pd:function(l,q,m){l.forEach(function(n,g){var t=Math.min(1,e[g]*m*(q+.33*(1-q)));n=t*n+(1-t)*h[g];h[g]=n;k[g]=d[g](n)})}}}(),V={V:[],za:!1,Aa:!1,ya:!1,Za:!1,ea:!0,da:!1,ready:!1,initialized:!1},jb={facingMode:"user",idealWidth:320,idealHeight:240,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280},a={save:"jeelizFaceTransferNNC.json",
Wa:"../../",Zb:0,width:512,height:512,Rc:.25,Oc:.7,Vc:3,borderWidth:.4,Y:.35,Wc:5,Xc:3,Ua:[.06,.08,.15],qd:55,Sc:.6,Pc:5.8,Vb:.75,Ub:1,ab:[.03,1],td:20,ga_:.2,P:[30,55],Xa:3,bc:1/3.5,Cb:11,yb:1,Tc:1,bb:[.1,.01],cd:[.4,-.7,-.4],dd:[.3,0,0],Jb:[5,7],qc:!1,T:[0,7],$b:.001,cb:[Math.PI/10,Math.PI/6],Fb:[0,6],Gb:[.1,.4],Hb:[.009,.02],Ib:[.02,.04],Oa:8,pb:[3,7],ob:.05,Yb:[.2,.2,.15,.15,.15,.15,.2,.2,.15,.15,.2],Uc:[xa.bind(null,.05,.7),xa.bind(null,.05,.7),xa.bind(null,0,.4),xa.bind(null,0,.4),xa.bind(null,
0,.6),xa.bind(null,0,.6),za.bind(null,.1,.6),xa.bind(null,.1,.4),Ba.bind(null,.68,.77,2),Ba.bind(null,.68,.77,2),xa.bind(null,.15,.5)]};V.get_nMorphs=function(){return a.Cb};var kb=!1,lb=!1;
function mb(){var b,d,e,h,k,l,q,m,n,g,t;function u(){1===++M&&(ib.i(a.Yb,a.Uc),B(),V.ready=!0,V.V.forEach(function(y){y()}),V.V.splice(0,V.V.length),H(),M=0)}function B(){O=ua();X=new Uint8Array(sa*sa*4);V.get_morphTargetInfluences=function(){return O};V.get_morphTargetInfluencesStabilized=function(){return ib.Cc()};V.set_morphUpdateCallback=function(y){Y=y};V.get_rotation=function(){return ra};V.get_positionScale=function(){var y=C.Pb.Ac();y.Ea();y=y.Ra();na[0]=1-y[1][0];na[1]=y[2][0];na[2]=y[3][0]*
ma[0];return na};V.get_rotationStabilized=function(){return Z};V.switch_sleep=function(y){T!==z.ua||y?T=y?z.ua:z.ka:H()};V.on_detect=function(y){y(U.G);U.Pa.push(y)};V.is_detected=function(){return U.G};V.set_animateDelay=function(y){w=y}}function H(){T!==z.ka&&(T=z.ka,R.timestamp=Date.now(),A&&window.clearTimeout(A),ba&&window.cancelAnimationFrame(ba),L())}function D(){T!==z.ua&&(A=setTimeout(L,w))}function L(){a:{if("VIDEO"===S.element.nodeName){var y=S.element.currentTime-va;0>y&&(va=S.element.currentTime);
if(1E3*y<a.td)break a;va+=y}S.ba.refresh();y=ka.nb();y[0]===S.ja[0]&&y[1]===S.ja[1]||ka.Sb();v.set("s49");E.H();C.Ka.u();S.ba.b(0);I.g(!1,!0)}y=T===z.ka?R.ra:1;for(var G=0;G<y;++G){var F=C,ya=pa;v.set("s50");E.H();F.oa.u();F.Ka.b(0);F.va.b(1);I.g(!1,!1);F.oa.b(0);ya.w(!1,F.oa)}V.ea&&(E.rd(),v.set("s5"),C.Ka.b(0),I.g(!1,!1),r.enable(r.BLEND),r.blendFunc(r.SRC_ALPHA,r.ONE),J.b(0),I.g(!1,!1),r.disable(r.BLEND));r.flush();G=Date.now();F=G-R.timestamp;R.timestamp=G;R.Ab=y/F;R.Na=R.Ab*a.ga_+R.Na*(1-a.ga_);
R.Bb=1E3/F;R.S=R.Bb*a.ga_+R.S*(1-a.ga_);R.S>a.P[1]?(++R.ra,R.S=(a.P[0]+a.P[1])/2):R.S<a.P[0]&&(R.ra=Math.max(R.ra-1,a.Xa),R.S=(a.P[0]+a.P[1])/2);R.ha=a.bc/Math.max(R.Na,.001);T!==z.ua&&(ba=window.requestAnimationFrame(D))}var Q,N,f=64,w=a.Zb,A=!1,ba=!1,pa,sa,ma,W,c,C={},J,O=!1,X,Y=!1,aa=[0,0,0],ra=[0,0,0],ca=[0,0,0],Z=[0,0,0],na=[0,0,0],S={element:null,ba:null,ja:[-1,-1]},M=0,z={Mc:-2,ua:-1,ka:0},T=z.Mc,U={qa:0,G:!1,Pa:[]},R={timestamp:0,Ab:0,Na:0,ra:a.Xa,Bb:0,S:0,ha:1},ha=1,ta=1,Ca=1,Aa=1,da=[0,0,
0],ja=Date.now(),la=new Float32Array(a.Oa),qa=0,va=0,ka={rb:function(){Q=a.width;N=a.height;W=a.Rc;c=a.Oc;var y=Q/f;W*=y;c*=y;k=(1-2*a.borderWidth)/a.Wc;l=(1-2*a.Y)/a.Xc;q=(c-W)/a.Vc;m=a.borderWidth;n=a.Y;g=1-a.borderWidth;t=1-a.Y;b=0;d=a.borderWidth;e=a.Y;h=W;ma=[f/Q,f/N]},Ob:function(){v.C("s50",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u34",value:1},{type:"2f",name:"u35",value:ma}]);v.C("s51",[{type:"1i",name:"u34",value:0},{type:"2f",name:"u35",value:ma},{type:"3f",name:"u36",value:[0,.5,
1]}]);v.C("s52",[{type:"1i",name:"u37",value:0},{type:"1i",name:"u34",value:1},{type:"1f",name:"u38",value:a.Sc},{type:"1f",name:"u39",value:a.Pc},{type:"1f",name:"u40",value:a.qd},{type:"1f",name:"u41",value:a.Vb},{type:"1f",name:"u42",value:a.Ub},{type:"1f",name:"u43",value:ma[0]}]);v.C("s53",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u5",value:1},{type:"1f",name:"u44",value:a.ab[0]},{type:"1f",name:"u45",value:a.ab[1]}])},lc:function(){v.Xb([{id:"s49",name:"_",ca:"attribute vec2 a0;uniform vec2 u46,u47;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=u47+u46*a0;}",
fa:["a0"],W:[2],c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",f:["u1","u46","u47"],precision:"lowp"},{id:"s50",name:"_",c:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",ca:"attribute vec2 a0;uniform sampler2D u34;uniform vec2 u35;const vec2 f=vec2(.25,.5),h=vec2(.75,.5),e=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u34,f);vec2 b=a.gb,c=a.a*u35,d=a0*.5+e;vv0=b+(d-e)*c,gl_Position=vec4(a0,0.,1.);}",fa:["a0"],
W:[2],f:["u1","u34","u35"],precision:"lowp"},{id:"s52",name:"_",ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",c:"uniform sampler2D u37,u34;uniform vec3 u48,u49;uniform float u38,u39,u40,u41,u42,u43,u50;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 g=texture2D(u37,vec2(.4375,.9375)),h=texture2D(u37,vec2(.5625,.9375)),a=texture2D(u34,vec2(.5,.5));float c=dot(g,e),i=dot(h,e);bool d=c>u41&&c>i+u42;d?a.r=2.:a.r>u40?a.r=0.:a.r>1.9&&(a.a>u39||a.a<u38)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u48,a.r=1.;else{float j=dot(e,texture2D(u37,vec2(.0625,.9375))),k=dot(e,texture2D(u37,vec2(.1875,.9375))),l=dot(e,texture2D(u37,vec2(.3125,.9375))),b;if(a.r>1.9)b=1.-u50;else b=1.,a.r=0.;float f=a.a*u43;a.gba+=vec3(j,k,l)*u49*b*f;}gl_FragColor=a;}",
f:"u37 u34 u48 u38 u39 u40 u41 u42 u49 u43 u50".split(" ")},{id:"s51",name:"_",c:"uniform sampler2D u34;uniform vec3 u36;uniform vec2 u35;varying vec2 vv0;const vec2 i=vec2(1.,1.);void main(){vec4 g=texture2D(u34,vec2(.25,.5));vec2 h=g.gb;float j=g.a;vec2 a=j*u35,c=h+a,d=h;d-=a/2.,c-=a/2.;vec2 k=.5*(d+c),f=step(d,vv0)*step(vv0,c);float l=f.x*f.y;vec2 b=2.*abs(k-vv0)/a;b=pow(b,3.*i),gl_FragColor=vec4(l*u36*max(b.x,b.y),1.);}",f:["u34","u35","u36"],precision:"lowp"},{id:"s53",name:"_",c:"uniform sampler2D u1,u5;uniform float u44,u45,u50;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u5,vv0);float c=(1.-u50)*(u45-u44)+u44;gl_FragColor=mix(b,a,c*f);}",
f:["u1","u5","u44","u45","u50"]}])},Jc:function(y){var G=new Float32Array([0,a.borderWidth,a.Y,0]);y.Ka=K.a({isPot:!1,be:!0,isFloat:!1,width:Q,height:N});y.oa=K.a({isPot:!0,isFloat:!1,width:f});G={width:1,height:1,isFloat:!0,isPot:!1,array:G};y.va=Ka.a(G);y.Pb=Ka.a(G)},mc:function(){S.ba=K.a({v:S.element,isPot:!1,isFloat:!1,isFlipY:!0});J=K.a({isPot:!1,isFloat:!1,width:Q,height:N})},i:function(){function y(){var p=G(a.pb[0],a.pb[1]);U.qa=a.ob*p+(1-a.ob)*U.qa;.6<U.qa&&!U.G?(U.Pa.forEach(function(x){x(!0)}),
U.G=!0):.4>U.qa&&U.G&&(U.Pa.forEach(function(x){x(!1)}),U.G=!1)}function G(p,x){p+=sa*x;return(X[4*p]+X[4*p+1]+X[4*p+2]+X[4*p+3])/1020}function F(){O.forEach(function(p,x){if(U.G){p=(a.yb+x)%sa;var P=a.Tc+Math.floor((a.yb+x)/sa);P=sa-1-P;p=G(p,P);O[x]=p}else O[x]=0})}function ya(p){pa=new Wa;pa.fd(p.layers);pa.hd({Db:"gpuRaw",$c:function(x){var P=C;P.va.Lb(1);r.viewport(0,0,1,1);v.set("s52");v.A("u50",ha);v.Mb("u48",d,e,h);v.Mb("u49",1*a.Ua[0],1*a.Ua[1],1*a.Ua[2]);I.g(!1,!1);1!==++b%2&&(h+=q,h>c&&
(d+=k,h=W,d>g&&(d=m,e+=l,e>t&&(e=n))));P.Pb.Lb(1);v.set("s53");v.A("u50",ha);P.va.b(0);I.g(!1,!1);K.bd(x,X);F();if(!a.qc&&U.G)for(x=0;3>x;++x)P=G(x+a.Jb[0],a.Jb[1]),P=(2*P-1)*a.cd[x],P+=a.dd[x],aa[x]=P;y();x=Date.now();P=x-ja;var oa=G(a.Fb[0],a.Fb[1]);Ca=za(a.Gb[0],a.Gb[1],oa);oa=G(a.T[0],a.T[1]);var ea=G(a.T[0]+1,a.T[1]),fa=G(a.T[0]+2,a.T[1]);ta=1-za(a.Ib[0],a.Ib[1],Math.sqrt(oa*oa+ea*ea+fa*fa)/P);oa=da[0]-aa[0];ea=da[1]-aa[1];fa=da[2]-aa[2];P=Math.sqrt(oa*oa+ea*ea+fa*fa)/P;da[0]=aa[0];da[1]=aa[1];
da[2]=aa[2];Aa=1-za(a.Hb[0],a.Hb[1],P);ha=Ca*ta*Aa;ja=x;la[qa]=ha;qa=(qa+1)%a.Oa;for(x=0;x<a.Oa;++x)ha=Math.min(la[x],ha);ib.pd(O,ha,R.ha);Y&&Y(ha,R.ha);if(U.G)for(x=a.bb[1]*ha+a.bb[0]*(1-ha),x*=R.ha,P=0;3>P;++P)ra[P]=x*aa[P]+(1-x)*ra[P],Z[P]=ra[P];else x=Date.now()*a.$b,ca[0]=a.cb[0]*Math.sin(x),ca[1]=a.cb[1]*Math.cos(x),Z[0]=ca[0],Z[1]=ca[1],Z[2]=ca[2];x=C;E.H();J.u();v.set("s51");x.va.b(0);I.g(!1,!1)}});p=pa.zc();p!==f&&(f=p,ka.rb(),C.oa.resize(f,f),ka.Ob());sa=pa.Ec();u()}ka.mc();ka.Jc(C);lb?
ya(lb):ia(function(p){p=JSON.parse(p);ya(p)})},kd:function(y,G){for(var F in y)"undefined"!==typeof G[F]&&(y[F]=G[F])},jc:function(y){V.za&&V.za();var G={video:{facingMode:{ideal:jb.facingMode},width:{min:jb.minWidth,max:jb.maxWidth,ideal:jb.idealWidth},height:{min:jb.minHeight,max:jb.maxHeight,ideal:jb.idealHeight}},audio:V.Za};jb.deviceId&&(constraints.deviceId=jb.deviceId);hb(function(F,ya){kb=ya;V.Aa&&V.Aa();y(F)},function(){window.wa&&window.wa("WEBCAM_UNAVAILABLE")},G)},wb:function(y,G){ka.lc();
S.element=y;ka.Sb();ka.rb();ka.Ob();ka.i();G&&G()},nb:function(){var y=[-1,-1],G=S.element;"VIDEO"===G.nodeName?(y[0]=G.videoWidth,y[1]=G.videoHeight):(y[0]=G.width,y[1]=G.height);return y},Sb:function(){var y=ka.nb();S.ja[0]=y[0];S.ja[1]=y[1];Ja.la().width=y[0];Ja.la().height=y[1];a.width=y[0];a.height=y[1];var G=[.5,.5],F=y[1]/y[0];y=Ja.F()/Ja.o();F>y?1>=F?G[0]*=F:G[1]/=F:(G[0]*=F,F=1/y,G[0]*=F,G[1]*=F);G[1]*=y;v.C("s49",[{type:"1i",name:"u1",value:0},{type:"2f",name:"u46",value:G},{type:"2f",name:"u47",
value:[.5,.5]}])}};return ka}V.onLoad=function(b){V.ready?b():V.V.push(b)};V.set_audio=function(b){V.Za=b};V.switch_displayVideo=function(b){V.ea=b;V.da&&(V.da.style.display=V.ea?"block":"none")};V.onWebcamAsk=function(b){V.za=b};V.onContextLost=function(b){V.ya=b};V.onWebcamGet=function(b){V.Aa=b};V.set_size=function(b,d){a.width=b;a.height=d};V.get_size=function(){return{width:a.width,height:a.height}};V.get_videoStream=function(){return kb};V.get_cv=function(){return Ja.la()};
V.set_color=function(b){v.C("s51",[{type:"3f",name:"u36",value:b}])};
V.init=function(b){var d=mb(),e=b.callbackReady?b.callbackReady:function(k){console.log("ERR:",k)},h=b.callbackReady?b.callbackReady.bind(!1):!1;if("undefined"===typeof b.canvasId)e("NO_CANVASID");else if(document.getElementById(b.canvasId))if(V.initialized)e("ALREADY_INITIALIZED");else{V.initialized=!0;window.wa=e?function(k){e(k);window.wa=!1}:!1;b.NNCPath&&(a.Wa=b.NNCPath);"undefined"!==typeof b.NNC&&(lb="string"===typeof b.NNC?JSON.parse(b.NNC):b.NNC);h&&V.V.push(h);if(!Ja.i({ib:b.canvasId,width:a.width,
height:a.height,debug:!1,La:!1,Zc:function(){V.ya&&V.ya()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;V.da=Ja.la();V.ea||(V.da.style.display="none");I.i();E.i();v.i();K.i();r.depthFunc(r.LEQUAL);r.clearDepth(1);b.videoSettings&&b.videoSettings.videoElement?d.wb(b.videoSettings.videoElement,!1):(b.videoSettings&&d.kd(jb,b.videoSettings),d.jc(function(k){d.wb(k,!1)}));return!0}else e("INVALID_CANVASID")};window.JEELIZFACEEXPRESSIONS=V;
;return JEELIZFACEEXPRESSIONS;})();