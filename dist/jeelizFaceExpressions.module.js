/* eslint-enable */
/* prettier-ignore */
function ca(){this.Na=!1;this.na=null;this.be=void 0;this.la=1;this.Xc=this.te=0;this.Fa=null}function fa(a){if(a.Na)throw new TypeError("Generator is already running");a.Na=!0}ca.prototype.Pa=function(a){this.be=a};ca.prototype.Sa=function(a){this.Fa={Ee:a,ff:!0};this.la=this.te||this.Xc};ca.prototype.return=function(a){this.Fa={return:a};this.la=this.Xc};function oa(a){this.o=new ca;this.wf=a}
oa.prototype.Pa=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na.next,a,this.o.Pa);this.o.Pa(a);return ra(this)};function ta(a,d){fa(a.o);var f=a.o.na;if(f)return pa(a,"return"in f?f["return"]:function(l){return{value:l,done:!0}},d,a.o.return);a.o.return(d);return ra(a)}oa.prototype.Sa=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na["throw"],a,this.o.Pa);this.o.Sa(a);return ra(this)};
function pa(a,d,f,l){try{var m=d.call(a.o.na,f);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return a.o.Na=!1,m;var p=m.value}catch(n){return a.o.na=null,a.o.Sa(n),ra(a)}a.o.na=null;l.call(a.o,p);return ra(a)}
function ra(a){for(;a.o.la;)try{var d=a.wf(a.o);if(d)return a.o.Na=!1,{value:d.value,done:!1}}catch(f){a.o.be=void 0,a.o.Sa(f)}a.o.Na=!1;if(a.o.Fa){d=a.o.Fa;a.o.Fa=null;if(d.ff)throw d.Ee;return{value:d.return,done:!0}}return{value:void 0,done:!0}}function va(a){this.next=function(d){return a.Pa(d)};this.throw=function(d){return a.Sa(d)};this.return=function(d){return ta(a,d)};this[Symbol.iterator]=function(){return this}}
function Aa(a){function d(l){return a.next(l)}function f(l){return a.throw(l)}return new Promise(function(l,m){function p(n){n.done?l(n.value):Promise.resolve(n.value).then(d,f).then(p,m)}p(a.next())})}function Da(a,d){return a[0]*(1-d)+a[1]*d}function Ea(a){var d=new XMLHttpRequest;d.open("GET",b.Hc+b.neuralNetworkPath,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||a(d.responseText)};d.send()}
function Ia(a,d){if(0===d||"object"!==typeof a)return a;a=Object.assign({},a);d=void 0===d||-1===d?-1:d-1;for(var f in a)a[f]=Ia(a[f],d);return a}function Ja(a,d,f){return Math.min(Math.max((f-a)/(d-a),0),1)}
function Ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Oa(a,d){var f=d%8;return a[(d-f)/8]>>7-f&1}
function Pa(a,d,f){var l=1,m=0;for(f=d+f-1;f>=d;--f)m+=l*Oa(a,f),l*=2;return m}function Qa(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var d=a.length,f=new Uint8Array(d),l=0;l<d;++l)f[l]=a.charCodeAt(l);return f}function Ra(a){return"string"===typeof a?JSON.parse(a):a}
function Sa(a){if("undefined"===typeof Ra(a).nb){var d=Ra(a);a=d.ne;var f=d.nf,l=d.n;d=Qa(d);for(var m=new Float32Array(l),p=new Float32Array(f),n=a+f+1,r=0;r<l;++r){var h=n*r,q=0===Oa(d,h)?1:-1,u=Pa(d,h+1,a);h=h+1+a;for(var B=p.length,w=0,C=h;C<h+B;++C)p[w]=Oa(d,C),++w;for(B=h=0;B<f;++B)h+=p[B]*Math.pow(2,-B-1);m[r]=0===h&&0===u?0:q*(1+h)*Math.pow(2,1+u-Math.pow(2,a-1))}a=m}else if(l=Ra(a),a=l.nb,0===a)a=new Uint8Array(l.nb);else{f=l.n;l=Qa(l);d=new Uint32Array(f);for(m=0;m<f;++m)d[m]=Pa(l,m*a,a);
a=d}return a}
var K=function(){function a(c,k,D){k=c.createShader(k);c.shaderSource(k,D);c.compileShader(k);return c.getShaderParameter(k,c.COMPILE_STATUS)?k:null}function d(c,k,D){k=a(c,c.VERTEX_SHADER,k);D=a(c,c.FRAGMENT_SHADER,D);c===E&&r.push(k,D);var O=c.createProgram();c.attachShader(O,k);c.attachShader(O,D);c.linkProgram(O);return O}function f(c){return["float","sampler2D","int"].map(function(k){return"precision "+c+" "+k+";\n"}).join("")}function l(c,k){k.u=k.u?!0:!1;if(!k.u){k.Ca=k.Ca||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";k.Xa=
k.Xa||["a0"];k.Ga=k.Ga||[2];k.precision=k.precision||w;k.id=u++;void 0!==k.Od&&(k.Od.forEach(function(G,ea){k.h=k.h.replace(G,k.zb[ea])}),k.Od.splice(0));k.Dc=0;k.Ga.forEach(function(G){k.Dc+=4*G});var D=f(k.precision);k.ta=d(c,D+k.Ca,D+k.h);k.B={};k.i.forEach(function(G){k.B[G]=c.getUniformLocation(k.ta,G)});k.attributes={};k.Ha=[];k.Xa.forEach(function(G){var ea=c.getAttribLocation(k.ta,G);k.attributes[G]=ea;k.Ha.push(ea)});if(k.j){c.useProgram(k.ta);q=k;h=k.id;for(var O in k.j)c.uniform1i(k.B[O],
k.j[O])}k.ra=!0}}function m(c){Ta.Qf(N);h!==c.id&&(N.P(),h=c.id,q=c,E.useProgram(c.ta),c.Ha.forEach(function(k){0!==k&&E.enableVertexAttribArray(k)}))}function p(c,k,D){l(c,k,D);c.useProgram(k.ta);c.enableVertexAttribArray(k.attributes.a0);h=-1;return q=k}function n(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var r=[],h=-1,q=null,u=0,B=!1,w="highp",C=["u1"],v=["u0"],A={u1:0},g={u0:0},L={u1:0,u2:1},R={u1:0,u3:1},I=["u1","u3","u4"],
J={u5:0},e=["u6","u7","u8","u9"],x={u6:0,u7:1},H={s0:n(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:C,j:A,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:L},s3:{h:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:A,u:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:C,j:A},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:L},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:C,j:A},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:C,j:A},s8:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:g},s9:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:g},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:C,j:A},s11:{h:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:A},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:C,j:A,u:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:C,j:A,u:!0},s15:{h:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:A},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,j:g,u:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,j:g,u:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:v,j:g,u:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,j:g,u:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,j:g},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,j:g},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:v,j:g,u:!0},s23:{h:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},u:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:A},s25:{h:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},x),u:!0},s26:{h:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:e,j:x},s27:{h:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(e),j:x,u:!0},s28:{h:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(e),j:Object.assign({u25:3,u22:4,u23:5,u24:6},x),u:!0},s29:{h:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(e),j:Object.assign({u3:2},x)},s30:{h:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:x,u:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:I,j:R},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(I),j:R,u:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:I,j:R,u:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(I),j:R,u:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:I,j:R,u:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:C,j:A,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:A,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:A,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:L,u:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:L,u:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:J},s42:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:J,u:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:A,precision:"lowp",u:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:A,precision:"lowp",u:!0},s45:{h:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},u:!0}},M={s46:{h:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],zb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),zb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},t=null,S=null,N={sb:function(){return B},v:function(){if(!B){t=Ia(H,2);S=Ia(M,2);w="highp";E.getShaderPrecisionFormat&&(E.getShaderPrecisionFormat(E.FRAGMENT_SHADER,E.MEDIUM_FLOAT),E.getShaderPrecisionFormat(E.FRAGMENT_SHADER,E.LOW_FLOAT));for(var c in t)l(E,t[c],c);K.set("s0");E.enableVertexAttribArray(0);B=!0}},Va:function(c){c.forEach(function(k){N.Jc(k)})},Jc:function(c){t[c.id]=c;l(E,c,c.id)},af:function(c,k,
D){k||(k=c);t[k]=Object.create(S[c]);t[k].hf=!0;S[c].zb&&S[c].zb.forEach(function(O,G){t[k].h=t[k].h.replace(new RegExp(O,"g"),D[G])});l(E,t[k],k)},set:function(c){var k=t[c];k.u&&(k.u=!1,l(E,k,c));m(k)},Qa:function(c){return p(c,n(),"s48")},uc:function(c){return p(c,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s49")},Fe:function(c){return"undefined"===typeof t[c]?!1:t[c].ra},P:function(){-1!==h&&(h=-1,q.Ha.forEach(function(c){0!==c&&E.disableVertexAttribArray(c)}))},vc:function(){var c=
0;q.Ha.forEach(function(k,D){D=q.Ga[D];E.vertexAttribPointer(k,D,E.FLOAT,!1,q.Dc,c);c+=4*D})},De:function(){E.enableVertexAttribArray(0)},Ra:function(){N.Ab(E)},Ab:function(c){c.vertexAttribPointer(q.Ha[0],2,c.FLOAT,!1,8,0)},fh:function(c,k){E.uniform1i(q.B[c],k)},L:function(c,k){E.uniform1f(q.B[c],k)},S:function(c,k,D){E.uniform2f(q.B[c],k,D)},Rf:function(c,k){E.uniform2fv(q.B[c],k)},Sf:function(c,k){E.uniform3fv(q.B[c],k)},gh:function(c,k,D,O){E.uniform3f(q.B[c],k,D,O)},Tf:function(c,k,D,O,G){E.uniform4f(q.B[c],
k,D,O,G)},Td:function(c,k){E.uniform4fv(q.B[c],k)},hh:function(c,k){E.uniformMatrix2fv(q.B[c],!1,k)},ih:function(c,k){E.uniformMatrix3fv(q.B[c],!1,k)},jh:function(c,k){E.uniformMatrix4fv(q.B[c],!1,k)},M:function(c,k){N.set(c);k.forEach(function(D){switch(D.type){case "4f":E.uniform4fv(q.B[D.name],D.value);break;case "3f":E.uniform3fv(q.B[D.name],D.value);break;case "2f":E.uniform2fv(q.B[D.name],D.value);break;case "1f":E.uniform1f(q.B[D.name],D.value);break;case "1i":E.uniform1i(q.B[D.name],D.value);
break;case "mat2":E.uniformMatrix2fv(q.B[D.name],!1,D.value);break;case "mat3":E.uniformMatrix3fv(q.B[D.name],!1,D.value);break;case "mat4":E.uniformMatrix4fv(q.B[D.name],!1,D.value)}})},Fg:function(){return"lowp"},m:function(){N.P();E.disableVertexAttribArray(0);for(var c in t){var k=t[c];k.ra&&(k.ra=!1,E.deleteProgram(k.ta));k.hf&&delete t[c]}r.forEach(function(D){E.deleteShader(D)});r.splice(0);u=0;B=!1;q=null;h=-1}};return N}(),E=null,Ya=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function d(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function f(v,A,g){v.setAttribute("width",A);v.setAttribute("height",g)}function l(v){function A(){Va.m();Wa.reset();L.getExtension("WEBGL_lose_context").loseContext()}if(d())return!1;var g=document.createElement("canvas");f(g,5,5);var L=null;try{L=g.getContext("webgl2",v)}catch(R){return!1}if(!L)return!1;m(L);Wa.Pc(L);v=Wa.Ob(L);if(!v.ga&&!v.ia)return A(),!1;v=Va.Lc(L,v);A();return v?!0:!1}function m(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var p=null,n=null,r=null,h=null,q=!0,u=null,B=null,w=[],C={H:function(){return p.width},V:function(){return p.height},jb:function(){return p},wg:function(){return E},ka:function(){return q},flush:function(){E.flush()},
Ng:function(){Xa.Z();C.Ff()},Ff:function(){T.reset();U.reset();K.P();K.De();E.disable(E.DEPTH_TEST);E.disable(E.BLEND);U.Za();K.Ra()},Le:function(){u||(u=new Uint8Array(p.width*p.height*4));E.readPixels(0,0,p.width,p.height,E.RGBA,E.UNSIGNED_BYTE,u);return u},zg:function(){return p.toDataURL("image/jpeg")},Ag:function(){Xa.T();n||(n=document.createElement("canvas"),r=n.getContext("2d"));f(n,p.width,p.height);for(var v=C.Le(),A=r.createImageData(n.width,n.height),g=n.width,L=n.height,R=A.data,I=0;I<
L;++I)for(var J=L-I-1,e=0;e<g;++e){var x=4*(I*g+e),H=4*(J*g+e);R[x]=v[H];R[x+1]=v[H+1];R[x+2]=v[H+2];R[x+3]=v[H+3]}r.putImageData(A,0,0);return n.toDataURL("image/png")},yg:function(v){!n&&v&&(n=document.createElement("canvas"),r=n.getContext("2d"));var A=v?n:document.createElement("canvas");f(A,p.width,p.height);(v?r:A.getContext("2d")).drawImage(p,0,0);return A},v:function(v){v=Object.assign({ha:null,kc:null,$a:null,Nc:null,width:512,height:512,premultipliedAlpha:!1,kd:!0,antialias:!1,debug:!1,
qg:!1},v);v.ha?(E=v.ha,p=v.ha.canvas):v.Nc&&!v.$a?p=document.getElementById(v.Nc):v.$a&&(p=v.$a);p||(p=document.createElement("canvas"));p.width=v.width;p.height=v.height;if(E)q=E instanceof WebGL2RenderingContext;else{q=!0;var A={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.kd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(A.antialias=!1);var g=l(A);g||!A.antialias||d()||(A.antialias=!1,g=l(A));g&&(E=p.getContext("webgl2",A));E?q=!0:((E=p.getContext("webgl",A))||(E=p.getContext("experimental-webgl",A)),q=!1)}if(!E)return a("WebGL1 and 2 are not enabled");v.kc&&p.addEventListener&&(h=E.getExtension("WEBGL_lose_context"))&&(B=v.kc,p.addEventListener("webglcontextlost",B,!1));if(!Wa.v())return a("Not enough GL capabilities");m(E);K.v();U.v();Va.Lc(E,Wa.Je());w.forEach(function(L){L(E)});w.splice(0);return!0},kg:function(){return new Promise(function(v){E?
v(E):w.push(v)})},m:function(){E&&(Wa.m(),K.m(),Va.m());h&&B&&(p.removeEventListener("webglcontextlost",B,!1),h=B=null);E=u=r=n=p=null;w.splice(0)}};return C}(),Ta=function(){function a(){null===d&&("undefined"!==typeof K?d=K:"undefined"!==typeof JEShaders&&(d=JEShaders))}var d=null;return{reset:function(){d=null},Qf:function(f){d!==f&&(d&&d.P(),d=f)},sb:function(){return d.sb()},Ra:function(){return d.Ra()},Ab:function(f){return d.Ab(f)},vc:function(){return d.vc()},P:function(){return d.P()},set:function(f){a();
return d.set(f)},Qa:function(f){a();return d.Qa(f)},uc:function(f){a();return d.uc(f)}}}(),T=function(){function a(c){E.bindTexture(E.TEXTURE_2D,c)}function d(c){M[0]=c;c=t[0];var k=c>>16&32768,D=c>>12&2047,O=c>>23&255;return 103>O?k:142<O?k|31744|((255==O?0:1)&&c&8388607):113>O?(D|=2048,k|(D>>114-O)+(D>>113-O&1)):k=(k|O-112<<10|D>>1)+(D&1)}function f(c){var k=new Uint16Array(c.length);c.forEach(function(D,O){k[O]=d(D)});return k}function l(){if(null!==S.Vb)return S.Vb;var c=p(f([.5,.5,.5,.5]),!0);
return null===c?!0:S.Vb=c}function m(){if(null!==S.Wb)return S.Wb;var c=p(new Uint8Array([127,127,127,127]),!1);return null===c?!0:S.Wb=c}function p(c,k){if(!Ta.sb()||!A)return null;var D=null,O=Math.sqrt(c.length/4);try{var G=E.getError();if("FUCKING_BIG_ERROR"===G)return!1;D=N.instance({isFloat:!1,N:k,array:c,width:O});G=E.getError();if(G!==E.NO_ERROR)return!1}catch(ea){return!1}Xa.T();E.viewport(0,0,O,O);E.clearColor(0,0,0,0);E.clear(E.COLOR_BUFFER_BIT);Ta.set("s0");D.Ya(0);U.l(!0,!0);c=4*O*O;
k=new Uint8Array(c);E.readPixels(0,0,O,O,E.RGBA,E.UNSIGNED_BYTE,k);O=!0;for(G=0;G<c;++G)O=O&&3>Math.abs(k[G]-127);D.remove();Xa.Z();return O}var n=0,r=null,h=0,q=null,u=null,B=null,w=null,C=null,v=null,A=!1,g=[],L={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,od:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,J:null,bd:null,gf:!1,N:!1,F:null,ub:4,cc:0},R=!1,I=null,J=null,e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],x=!1,H=!1,M=new Float32Array(1),t=new Int32Array(M.buffer),S={Vb:null,Wb:null},N={v:function(){A||(C=[E.RGBA,null,E.RGBA,E.RGBA],v=[E.RGBA,null,E.RGBA,E.RGBA],r=[E.TEXTURE0,E.TEXTURE1,E.TEXTURE2,E.TEXTURE3,E.TEXTURE4,E.TEXTURE5,E.TEXTURE6,E.TEXTURE7],x="undefined"!==typeof JEContext,H="undefined"!==typeof Wa,x&&JEContext.Wg()&&r.push(E.TEXTURE8,E.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],w=[E.UNSIGNED_BYTE,E.FLOAT,E.FLOAT],A=!0)},$e:function(){if(!u){for(var c=new Float32Array(16384),k=0;16384>
k;++k)c[k]=2*Math.random()-1;u={random:N.instance({isFloat:!0,isPot:!0,array:c,width:64}),ae:N.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.dg()},Rd:function(c){E.framebufferTexture2D(Xa.Tb(),E.COLOR_ATTACHMENT0,E.TEXTURE_2D,c,0)},Lg:function(){return u.ae},dg:function(){w[1]=Wa.Sb(E)},Of:function(){v=C=[E.RGBA,E.RGBA,E.RGBA,E.RGBA]},Jd:function(c){K.set("s1");Xa.T();var k=c.H(),D=c.V();E.viewport(0,0,k,D);c.g(0);U.l(!1,!1)},Df:function(c,k){N.Jd(c);E.readPixels(0,0,
c.H(),c.V(),E.RGBA,E.UNSIGNED_BYTE,k)},Ef:function(c,k){N.Jd(c);return Wa.sc(0,0,c.H(),c.V(),k)},Wc:function(c,k,D,O,G,ea,ha){c.activeTexture(c.TEXTURE0);var ma=c.createTexture();c.bindTexture(c.TEXTURE_2D,ma);G=G instanceof Float32Array?G:new Float32Array(G);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);
c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,ea);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,D,O,0,c.RGBA,c.FLOAT,G);c.bindTexture(c.TEXTURE_2D,null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ha&&(Xa.Z(),K.Qa(c));c.viewport(0,0,D,O);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,k,0);c.bindTexture(c.TEXTURE_2D,ma);ha?U.l(!0,!0):U.fb(c);c.deleteTexture(ma);A&&(q[0]=-1,B=null,n=0)},Lb:function(c){c!==n&&(E.activeTexture(r[c]),n=c)},instance:function(c){var k;function D(){W=void 0!==y.J.videoWidth?
y.J.videoWidth:y.J.width;Y=void 0!==y.J.videoHeight?y.J.videoHeight:y.J.height}function O(F){var V=E.getError();if("FUCKING_BIG_ERROR"===V)return!1;E.texImage2D(E.TEXTURE_2D,0,ka,ia,ja,F);V=E.getError();V!==E.NO_ERROR&&ia!==E.RGBA&&(ia=E.RGBA,E.texImage2D(E.TEXTURE_2D,0,ka,ia,ja,F));return!0}function G(){if(!cb){a(Q);ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,ua);y.isPot?(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,y.isMirrorX?E.MIRRORED_REPEAT:E.REPEAT),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,
y.isMirrorY?E.MIRRORED_REPEAT:E.REPEAT)):(E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_S,E.CLAMP_TO_EDGE),E.texParameteri(E.TEXTURE_2D,E.TEXTURE_WRAP_T,E.CLAMP_TO_EDGE));y.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&E.texParameterf(E.TEXTURE_2D,JEContext.Cg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.gg);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,y.isLinear?E.LINEAR:E.NEAREST);var F=y.isMipmap&&!Ba;E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,y.od?E.LINEAR_MIPMAP_LINEAR:y.isLinear?
F?E.NEAREST_MIPMAP_LINEAR:E.LINEAR:F?E.NEAREST_MIPMAP_NEAREST:E.NEAREST);ia=C[y.ub-1];ka=v[y.ub-1];ja=w[ya];Wa.ka()&&(F=Wa.Me(),ia===E.RGBA&&ja===E.FLOAT?y.isMipmap||y.isLinear?ka=Va.Oe(E):Wa.Mc()?F&&(ka=F):ka=E.RGBA16F||E.RGBA:ia===E.RGB&&ja===E.FLOAT&&F&&(ka=F,ia=E.RGBA));if(y.N&&!y.isFloat||y.isFloat&&y.isMipmap&&Va.lf())ka=Wa.Ne(),ja=Wa.Sb(E);y.cc&&(La=y.cc);y.isSrgb&&4===y.ub&&(ia=JEContext.Jg());if(y.J)O(y.J);else if(y.url)O(na);else if(qa){F=qa;try{"FUCKING_BIG_ERROR"!==E.getError()&&(E.texImage2D(E.TEXTURE_2D,
0,ka,W,Y,0,ia,ja,F),E.getError()!==E.NO_ERROR&&(E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,null),E.getError()!==E.NO_ERROR&&E.texImage2D(E.TEXTURE_2D,0,E.RGBA,W,Y,0,E.RGBA,E.UNSIGNED_BYTE,null)))}catch(Qb){E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,null)}y.isKeepArray||(qa=null)}else F=E.getError(),"FUCKING_BIG_ERROR"!==F&&(E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,null),F=E.getError(),F!==E.NO_ERROR&&(ia=E.RGBA,y.N&&ja!==E.FLOAT&&(ja=E.FLOAT,E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,null))));if(y.isMipmap)if(!Ba&&
da)da.ib(),Ma=!0;else if(Ba){F=Math.log2(Math.min(W,Y));Ca=Array(1+F);Ca[0]=Q;for(var V=1;V<=F;++V){var la=Math.pow(2,V),Z=W/la;la=Y/la;var za=E.createTexture();a(za);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MIN_FILTER,E.NEAREST);E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAG_FILTER,E.NEAREST);E.texImage2D(E.TEXTURE_2D,0,ka,Z,la,0,ia,ja,null);a(null);Ca[V]=za}Ma=!0}a(null);q[n]=-1;ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;y.F&&da&&(y.F(da),y.F=null)}}function ea(){for(var F=W*Y,V=2*F,la=3*F,Z=0;Z<
F;++Z)sa[0][Z]=Ga[Z],sa[1][Z]=Ga[Z+F],sa[2][Z]=Ga[Z+V],sa[3][Z]=Ga[Z+la]}function ha(){var F=W*Y*4;wa=[new Uint8Array(F),new Uint8Array(F),new Uint8Array(F),new Uint8Array(F)];sa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*F);Ga=new Float32Array(Na.buffer);Ha=!0}function ma(){k=new Uint8Array(W*Y*4);db=new Float32Array(k.buffer);Ua=!0}var y=Object.assign({},L,c),ba=h++;null===y.isFlipY&&(y.isFlipY=
y.url?!0:!1);y.data&&(y.array="string"===typeof y.data?Sa(y.data):y.isFloat?new Float32Array(y.data):new Uint8Array(y.data),y.isFlipY=!1);var ya=0,xa=y.J?!0:!1,z=null,P=null,aa=!1;y.N=y.N||y.isFloat;y.N&&(ya=1);!y.gf&&y.isFloat&&H&&!Wa.Mc()&&(y.isFloat=!1);y.isFloat&&(ya=2);y.isAnisotropicFiltering&&x&&!JEContext.Qg()&&(y.isAnisotropicFiltering=!1);var Q=y.bd||E.createTexture(),na=null,qa=!1,W=0,Y=0,Fa=!1,cb=!1,Ha=!1,sa=null,wa=null,Na=null,Ga=null,ka=null,ia=null,ja=null,ua=y.isFlipY,vb=(c=y.N&&
y.isMipmap)&&Va.pe(),Ba=c&&!vb?!0:!1,Ca=null,La=-1,eb=-1,Ma=!1;var Ua=!1;var db=k=null;y.width&&(W=y.width,Y=y.height?y.height:W);var da={get:function(){return Q},H:function(){return W},V:function(){return Y},Mg:function(){return y.url},Rg:function(){return y.isFloat},Tg:function(){return y.N},dh:function(F){Q=F},Ug:function(){return y.isLinear},ib:function(){E.generateMipmap(E.TEXTURE_2D)},le:function(F,V){Ba?(F||(F=da.$c()),N.Lb(V),a(Ca[F]),q[V]=-1):da.g(V)},$c:function(){-1===La&&(La=Math.log2(W));
return La},Sd:function(F){E.TEXTURE_MAX_LEVEL&&E.texParameteri(E.TEXTURE_2D,E.TEXTURE_MAX_LEVEL,F)},Ie:function(F){F||(F=da.$c());if(Ba){K.set("s12");N.Lb(0);for(var V=W,la=Y,Z=1;Z<=F;++Z)V/=2,la/=2,K.S("u14",.25/V,.25/la),E.viewport(0,0,V,la),a(Ca[Z-1]),E.framebufferTexture2D(Xa.Tb(),E.COLOR_ATTACHMENT0,E.TEXTURE_2D,Ca[Z],0),U.l(!1,1===Z);q[0]=-1}else F!==eb&&(eb=F,da.Sd(F)),da.ib()},eh:function(F){(xa=!(Array.isArray(F)||F.constructor===Float32Array||F.constructor===Uint8Array))?(qa=null,y.J=F,
D()):qa=F},g:function(F){if(!Fa)return!1;N.Lb(F);if(q[F]===ba)return!1;a(Q);q[F]=ba;return!0},Ya:function(F){E.activeTexture(r[F]);n=F;a(Q);q[F]=ba},A:function(){B=da;N.Rd(Q)},I:function(){E.viewport(0,0,W,Y);B=da;N.Rd(Q)},Bc:N.Bc,Mf:function(F,V){W=F;Y=V},resize:function(F,V){da.Mf(F,V);G()},clone:function(F){F=N.instance({width:W,height:Y,N:y.N,isFloat:y.isFloat,isLinear:y.isLinear,isMirrorY:y.isMirrorY,isFlipY:F?!ua:ua,isPot:y.isPot});Ta.set("s0");Xa.Z();F.I();da.g(0);U.l(!0,!0);return F},Uf:function(){E.viewport(0,
0,W,Y)},remove:function(){E.deleteTexture(Q);cb=!0;g.splice(g.indexOf(da),1);da=null},refresh:function(){da.Ya(0);ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!0);xa?E.texImage2D(E.TEXTURE_2D,0,ka,ia,ja,y.J):E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,qa);ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1)},rc:function(){Ha||ha();E.readPixels(0,0,W,4*Y,E.RGBA,E.UNSIGNED_BYTE,Na);ea();return sa},zf:function(){Ha||ha();return Wa.sc(0,0,W,4*Y,Na).then(function(){ea();return sa})},Bf:function(){Ua||ma();E.readPixels(0,
0,W,Y,E.RGBA,E.UNSIGNED_BYTE,k);return db},Af:function(){Ua||ma();return Wa.sc(0,0,W,Y,k)},Pb:function(F){Xa.T();K.set("s15");da.g(0);if(F)E.viewport(0,0,W,Y),K.Tf("u15",.25,.25,.25,.25),U.l(!1,!0);else for(F=0;4>F;++F)E.viewport(0,Y*F,W,Y),K.Td("u15",e[F]),U.l(!1,0===F)},Cc:function(F){var V=ja===w[0]&&!m();a(Q);ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!0);V?(aa||(z=document.createElement("canvas"),z.width=W,z.height=Y,P=z.getContext("2d"),P.createImageData(W,Y),aa=!0),null.data.set(F),P.putImageData(null,
0,0),E.texImage2D(E.TEXTURE_2D,0,ka,ia,ja,z)):E.texImage2D(E.TEXTURE_2D,0,ka,W,Y,0,ia,ja,F);q[n]=ba;ua&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1)},nh:function(F,V){a(Q);V&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!0);E.texImage2D(E.TEXTURE_2D,0,ka,ia,ja,F);q[n]=ba;V&&E.pixelStorei(E.UNPACK_FLIP_Y_WEBGL,!1)},ah:function(F,V){var la=W*Y,Z=4*la;F=y.N?F?"RGBE":"JSON":"RGBA";V&&(F=V);V=Wa.ka()&&!1;var za=null;switch(F){case "RGBE":za="s13";break;case "JSON":za=V?"s0":"s15";break;case "RGBA":case "RGBAARRAY":za=
"s7"}Ha||("RGBA"===F||"RGBE"===F||"RGBAARRAY"===F?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==F||V||ha());Xa.T();K.set(za);da.g(0);Z=null;if("RGBA"===F||"RGBE"===F||"RGBAARRAY"===F){E.viewport(0,0,W,Y);U.l(!0,!0);E.readPixels(0,0,W,Y,E.RGBA,E.UNSIGNED_BYTE,wa);if("RGBAARRAY"===F)return{data:wa};R||(I=document.createElement("canvas"),J=I.getContext("2d"),R=!0);I.width=W;I.height=Y;la=J.createImageData(W,Y);la.data.set(wa);J.putImageData(la,0,0);Z=I.toDataURL("image/png")}else if("JSON"===F)if(V)Z=new Float32Array(la),
E.viewport(0,0,W,Y),U.l(!0,!0),E.readPixels(0,0,W,Y,E.RGBA,E.FLOAT,Z);else{for(Z=0;4>Z;++Z)E.viewport(0,Y*Z,W,Y),K.Td("u15",e[Z]),U.l(!Z,!Z);da.rc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=sa[0][V],Z[4*V+1]=sa[1][V],Z[4*V+2]=sa[2][V],Z[4*V+3]=sa[3][V]}return{format:F,data:Z,width:W,height:Y,isMirrorY:y.isMirrorY,isFlipY:"RGBA"===F?y.isFlipY:!y.isFlipY}}};y.isMipmap&&!Ba&&Fa&&!Ma&&(da.ib(),Ma=!0);if(y.url)a(Q),E.texImage2D(E.TEXTURE_2D,0,E.RGBA,1,1,0,E.RGBA,E.UNSIGNED_BYTE,null),na=new Image,na.pg="Anonymous",
na.crossOrigin="Anonymous",na.src=y.url,na.onload=function(){W=na.width;Y=na.height;G()};else if(y.J){var fb=function(){D();W?G():setTimeout(fb,1)};fb()}else y.array?(y.N&&!y.isFloat?y.array instanceof Uint16Array?(qa=y.array,G()):l()?(qa=f(y.array),G()):(G(),N.Wc(E,Q,da.H(),da.V(),y.array,ua,!0)):(qa=y.isFloat?y.array instanceof Float32Array?y.array:new Float32Array(y.array):y.array instanceof Uint8Array?y.array:new Uint8Array(y.array),G()),y.isKeepArray||(qa&&qa!==y.array&&(qa=null),delete y.array)):
y.bd?Fa=!0:G();da.Ig=da.H;y.F&&Fa&&(y.F(da),y.F=null);g.push(da);return da},T:function(c){c!==n&&(E.activeTexture(r[c]),n=c);q[c]=-1;a(null)},jg:function(c){u.random.g(c)},Bc:function(){B=null;E.framebufferTexture2D(Xa.Tb(),E.COLOR_ATTACHMENT0,E.TEXTURE_2D,null,0)},reset:function(){0!==n&&E.activeTexture(r[0]);for(var c=0;c<r.length;++c)q[c]=-1;n=-1},$g:function(){n=-1},$f:function(){for(var c=0;c<r.length;++c)N.T(c)},Yc:function(){u&&(u.random.remove(),u.ae.remove())},mh:function(c,k){if("RGBA"===
c.format||"RGBE"===c.format){var D=new Image;D.src=c.data;D.onload=function(){N.instance({isMirrorY:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,J:D,F:function(O){if("RGBA"===c.format)k(O);else{var G=c.width,ea=c.height,ha=N.instance({isMirrorY:c.isMirrorY,isFloat:!0,width:G,height:ea,isFlipY:c.isFlipY});Xa.Z();E.viewport(0,0,G,ea);K.set("s14");ha.A();O.g(0);U.l(!0,!0);N.T(0);k(ha);Wa.flush();O.remove()}}})}}else"JSON"===c.format?k(N.instance({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,
array:new Float32Array(c.data)})):k(!1)},ue:f,m:function(){B&&(Xa.Z(),N.Bc(),Xa.T());N.$f();g.slice(0).forEach(function(c){c.remove()});g.splice(0);A=!1;h=0;"undefined"!==typeof Va&&Va.m();u=null}};return N}(),Za={instance:function(a){var d=[T.instance(a),T.instance(a)],f=[d[1],d[0]],l=f,m={Qd:function(p){l[1].A();l[0].g(p);m.Wd()},Lf:function(p){l[1].I();l[0].g(p);m.Wd()},Wd:function(){l=l===d?f:d},refresh:function(){l[0].refresh();l[1].refresh()},g:function(p){l[0].g(p)},Ya:function(p){l[0].Ya(p)},
ig:function(p){l[1].g(p)},Te:function(){return l[0]},Gg:function(){return l[1]},Cc:function(p){l[0].Cc(p);l[1].Cc(p)},remove:function(){l[0].remove();l[1].remove();l=null},sync:function(){m.Lf(0);K.set("s0");U.l(!1,!1)}};return m}},U=function(){function a(h){var q={da:null,indices:null};q.da=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,q.da);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);q.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,q.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,
new Uint16Array([0,1,2]),h.STATIC_DRAW);return q}var d=null,f=0,l=!1,m=[],p=-2,n=-2,r={reset:function(){n=p=-2},v:function(){l||(d=a(E),r.Za(),l=!0)},instance:function(h){var q=f++,u=h.indices?h.indices.length:0,B="undefined"===typeof h.mode?E.STATIC_DRAW:h.mode,w=E.createBuffer();E.bindBuffer(E.ARRAY_BUFFER,w);E.bufferData(E.ARRAY_BUFFER,h.da instanceof Float32Array?h.da:new Float32Array(h.da),B);p=q;var C=null,v=null,A=null;if(h.indices){C=E.createBuffer();E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,C);
var g=null;65536>h.indices.length?(g=Uint16Array,v=E.UNSIGNED_SHORT,A=2):(g=Uint32Array,v=E.UNSIGNED_INT,A=4);g=h.indices instanceof g?h.indices:new g(h.indices);E.bufferData(E.ELEMENT_ARRAY_BUFFER,g,B);n=q}var L={me:function(R){p!==q&&(E.bindBuffer(E.ARRAY_BUFFER,w),p=q);R&&Ta.vc()},je:function(){n!==q&&(E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,C),n=q)},bind:function(R){L.me(R);L.je()},rg:function(){E.drawElements(E.TRIANGLES,u,v,0)},sg:function(R,I){E.drawElements(E.TRIANGLES,R,v,I*A)},remove:function(){E.deleteBuffer(w);
h.indices&&E.deleteBuffer(C);L=null}};m.push(L);return L},Za:function(){-1!==p&&(E.bindBuffer(E.ARRAY_BUFFER,d.da),p=-1);-1!==n&&(E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,d.indices),n=-1)},l:function(h,q){h&&U.Za();q&&Ta.Ra();E.drawElements(E.TRIANGLES,3,E.UNSIGNED_SHORT,0)},fb:function(h){h=h||E;var q=a(h);h.bindBuffer(h.ARRAY_BUFFER,q.da);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,q.indices);Ta.Ab(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,
null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(q.da);h.deleteBuffer(q.indices);r.reset();l&&(r.Za(),Ta.Ra())},Yc:function(){var h=E,q=d;h.deleteBuffer(q.da);h.deleteBuffer(q.indices)},m:function(){r.Yc();m.forEach(function(h){h.remove()});E.bindBuffer(E.ARRAY_BUFFER,null);E.bindBuffer(E.ELEMENT_ARRAY_BUFFER,null);r.reset();l=!1;m.splice(0);f=0}};return r}(),Xa=function(){var a=null,d=null,f=null,l=!1,m=[],p={K:-2,Vc:1},n={sb:function(){return l},v:function(){if(!l){a=E.createFramebuffer();
var r=Wa.ka();d=r&&E.DRAW_FRAMEBUFFER?E.DRAW_FRAMEBUFFER:E.FRAMEBUFFER;f=r&&E.READ_FRAMEBUFFER?E.READ_FRAMEBUFFER:E.FRAMEBUFFER;l=!0}},Dg:function(){return d},Pe:function(){return f},Tb:function(){return E.FRAMEBUFFER},Hg:function(){return p},vg:function(){return a},instance:function(r){void 0===r.jd&&(r.jd=!1);var h=r.ba?r.ba:null,q=r.width,u=void 0!==r.height?r.height:r.width,B=a,w=null,C=!1,v=!1,A=0;h&&(q=q?q:h.H(),u=u?u:h.V());var g={Pd:function(){C||(B=E.createFramebuffer(),C=!0,A=p.Vc++)},de:function(){g.Pd();
g.A();w=E.createRenderbuffer();E.bindRenderbuffer(E.RENDERBUFFER,w);E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_COMPONENT16,q,u);E.framebufferRenderbuffer(d,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,w);E.clearDepth(1)},bind:function(L,R){A!==p.K&&(E.bindFramebuffer(d,B),p.K=A);h&&h.A();R&&E.viewport(0,0,q,u);L&&E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)},hg:function(){A!==p.K&&(E.bindFramebuffer(d,B),p.K=A)},clear:function(){E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT)},ng:function(){E.clear(E.COLOR_BUFFER_BIT)},
og:function(){E.clear(E.DEPTH_BUFFER_BIT)},Uf:function(){E.viewport(0,0,q,u)},A:function(){A!==p.K&&(E.bindFramebuffer(d,B),p.K=A)},rtt:function(L){h=L;p.K!==A&&(E.bindFramebuffer(E.FRAMEBUFFER,B),p.K=A);L.A()},T:function(){E.bindFramebuffer(d,null);p.K=-1},resize:function(L,R){q=L;u=R;w&&(E.bindRenderbuffer(E.RENDERBUFFER,w),E.renderbufferStorage(E.RENDERBUFFER,E.DEPTH_COMPONENT16,q,u))},remove:function(){B===a||v||(E.bindFramebuffer(d,B),E.framebufferTexture2D(d,E.COLOR_ATTACHMENT0,E.TEXTURE_2D,
null,0),w&&E.framebufferRenderbuffer(d,E.DEPTH_ATTACHMENT,E.RENDERBUFFER,null),E.bindFramebuffer(d,null),E.deleteFramebuffer(B),w&&E.deleteRenderbuffer(w));v=!0}};r.jd&&g.de();m.push(g);return g},T:function(){E.bindFramebuffer(d,null);p.K=-1},ag:function(){E.bindFramebuffer(d,null);E.clear(E.COLOR_BUFFER_BIT|E.DEPTH_BUFFER_BIT);Wa.Ud();p.K=-1},reset:function(){p.K=-2},Z:function(){0!==p.K&&(E.bindFramebuffer(d,a),p.K=0)},clear:function(){Wa.Ud();E.clear(E.COLOR_BUFFER_BIT)},m:function(){n.T();m.forEach(function(r){r.remove()});
null!==a&&(E.deleteFramebuffer(a),a=null);n.reset();l=!1;m.splice(0);p.Vc=1}};return n}(),Wa=function(){function a(){r="undefined"===typeof Ya?JEContext:Ya;h=!0}function d(e,x,H){for(var M=0;M<x.length;++M){var t=H.getExtension(x[M]+"_"+e);if(t)return t}return null}function f(){null!==g.Db&&(clearTimeout(g.Db),g.Db=null);g.xa=!1}function l(e){if(0===g.qa.length){g.W=E.PIXEL_PACK_BUFFER;g.qa.splice(0);g.lb.splice(0);for(var x=0;x<g.Ia;++x)g.qa.push(E.createBuffer()),g.lb.push(-1);g.fa=0;g.jc=0}E.bindBuffer(g.W,
g.qa[g.fa]);e.byteLength!==g.lb[g.fa]&&(E.bufferData(g.W,e.byteLength,E.STREAM_READ),g.lb[g.fa]=e.byteLength);g.Og=!0}function m(){E.bindBuffer(g.W,null)}function p(){g.wa.forEach(function(e){E.deleteSync(e)});g.wa.splice(0)}function n(){g.fa=(g.fa+1)%g.Ia;++g.jc}var r=null,h=!1,q={ld:!1,xc:null,yc:null,pd:!1,kf:!1,zc:null,qd:!1,Ac:null,md:!1,Mb:null,cf:!1,Nb:null,df:!1},u=null,B={ga:!0,ia:!0,Qb:!0,Id:!1},w=null,C=!0,v=null,A=null,g={ve:1,Ia:-1,fa:0,jc:0,xa:!1,qa:[],wa:[],lb:[],W:null,Db:null},L=
"EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),R=["OES","MOZ_OES","WEBKIT_OES"],I="undefined"===typeof window?{}:window,J={v:function(){if(h)return!0;J.reset();h||a();var e=E;if(!u.ld){u.xc=J.Sc(e);I.GL_EXT_FLOAT=u.xc;u.pd=u.xc?!0:!1;if(u.pd||J.ka())u.yc=J.Tc(e),u.kf=u.yc?!0:!1,I.GL_EXT_FLOATLINEAR=u.yc;u.ld=!0}if(!u.md){u.zc=J.cb(e);u.zc&&(u.qd=!0,I.GL_EXT_HALFFLOAT=u.zc);if(u.qd||J.ka())u.Ac=J.Uc(e),I.GL_EXT_HALFFLOATLINEAR=u.Ac;u.Pg=u.Ac?!0:!1;u.md=!0}u.Mb=J.Qc(e);u.cf=u.Mb?!0:!1;I.GL_EXT_COLORBUFFERFLOAT=
u.Mb;u.Nb=J.Rc(e);u.df=u.Nb?!0:!1;I.GL_EXT_COLORBUFFERHALFFLOAT=u.Nb;Xa.v();T.v();if(!J.xe())return!1;U.v();T.$e();return!0},reset:function(){u=Object.assign({},q);w=Object.assign({},B)},H:function(){h||a();return r.H()},V:function(){h||a();return r.V()},ka:function(){h||a();return r.ka()},Pc:function(e){J.Qc(e);J.Rc(e);J.Sc(e);J.Tc(e);J.cb(e);J.Uc(e)},Qc:d.bind(null,"color_buffer_float",L),Rc:d.bind(null,"color_buffer_half_float",L),Sc:d.bind(null,"texture_float",R),Tc:d.bind(null,"texture_float_linear",
R),cb:d.bind(null,"texture_half_float",R),Uc:d.bind(null,"texture_half_float_linear",R),Sb:function(e){var x=J.cb(e);return x&&x.HALF_FLOAT_OES?x.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},Me:function(){return A||E.RGBA32F||E.RGBA},Ne:function(){return v||E.RGBA16F||E.RGBA},Je:function(){return w},Mc:function(){return w.ga},mg:function(){return w.ia},lg:function(){return w.Qb},qe:function(){return w.Id&&C},$d:function(e){C=e;!e&&g.xa&&(p(),E.bindBuffer(g.W,null),g.xa=!1)},Vg:function(){return g.xa},Cb:function(e,
x,H){function M(){e.bindTexture(e.TEXTURE_2D,null);e.bindFramebuffer(t,null);e.deleteTexture(c);e.deleteFramebuffer(N)}var t=e.FRAMEBUFFER,S=e.NEAREST,N=e.createFramebuffer();e.bindFramebuffer(t,N);var c=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,c);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,S);e.texParameteri(e.TEXTURE_2D,
e.TEXTURE_MIN_FILTER,S);e.texImage2D(e.TEXTURE_2D,0,x,3,3,0,e.RGBA,H,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,c,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return M(),!1;Ta.uc(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);U.fb(e);e.bindFramebuffer(t,null);Ta.Qa(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,c);U.fb(e);x=new Uint8Array(36);e.readPixels(0,0,
3,3,e.RGBA,e.UNSIGNED_BYTE,x);M();for(H=0;36>H;++H)if(3!==H%4&&3<Math.abs(x[H]-127))return!1;return!0},Ob:function(e){var x={ga:!1,ia:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&J.Cb(e,e.RGBA32F,e.FLOAT)&&(x.ga=!0,A=e.RGBA32F);!x.ga&&J.Cb(e,e.RGBA,e.FLOAT)&&(x.ga=!0,A=e.RGBA);var H=J.Sb(e);v=null;e.RGBA16F&&J.Cb(e,e.RGBA16F,H)&&(x.ia=!0,v=e.RGBA16F);!x.ia&&J.Cb(e,e.RGBA,H)&&(x.ia=!0,v=e.RGBA);return x},ye:function(){var e=Xa.instance({width:2});e.Pd();var x=
T.instance({width:2,isFloat:!0,ub:3});e.A();x.A();J.flush();E.checkFramebufferStatus(Xa.Pe())!==E.FRAMEBUFFER_COMPLETE?(T.Of(),w.Qb=!1):w.Qb=!0;e.remove();x.remove()},ze:function(){var e=!1;J.ka()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(x){return"undefined"!==typeof E[x]}));w.Id=e},xe:function(){var e=J.Ob(E);Object.assign(w,e);if(!w.ga&&!w.ia)return!1;J.ye();J.ze();return!0},Cf:function(e,x,H,M,t){E.readPixels(e,
x,H,M,E.RGBA,E.UNSIGNED_BYTE,t);return Promise.resolve(t,!1)},sc:function(e,x,H,M,t,S,N){if(!J.qe())return J.Cf(e,x,H,M,t);g.Ia=N||g.ve;l(t);E.readPixels(e,x,H,M,E.RGBA,E.UNSIGNED_BYTE,0);g.wa[g.fa]=E.fenceSync(E.SYNC_GPU_COMMANDS_COMPLETE,0);J.flush();var c=!1;return new Promise(function(k,D){function O(){if(!g.xa)return f(),m(),n(),D(),!1;var G=(g.fa+1)%g.Ia;switch(E.clientWaitSync(g.wa[G],0,0)){case E.TIMEOUT_EXPIRED:case E.WAIT_FAILED:break;default:return f(),E.deleteSync(g.wa[G]),g.wa[G]=null,
E.bindBuffer(g.W,g.qa[G]),E.getBufferSubData(g.W,0,t),m(),n(),k(t,c),!0}g.Db=setTimeout(O,0);return!1}f();g.jc+1<g.Ia?(m(),n(),k(t,!1)):(g.xa=!0,O()||!S||c||(c=!0,S()))})},Ud:function(){E.viewport(0,0,J.H(),J.V())},flush:function(){E.flush()},m:function(){f();p();T.m();Xa.m();U.m();g.qa.forEach(function(e){E.deleteBuffer(e)});g.qa.splice(0);Ta.reset();h=!1}};return J}(),Va=function(){function a(e,x,H,M){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,M?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var t=null;
if(null!==H)try{t=g.getError();if("FUCKING_BIG_ERROR"===t)return!1;g.texImage2D(g.TEXTURE_2D,0,e,4,4,0,g.RGBA,x,H);t=g.getError();if(t!==g.NO_ERROR)return!1}catch(S){return!1}M&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);U.fb(g);t=g.getError();if("FUCKING_BIG_ERROR"===t)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,u);t=g.getError();t===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,
u),t=g.getError());if(t!==g.NO_ERROR)return!1;H=!0;for(M=0;16>M;++M)H=H&&4>Math.abs(u[M]-127);H&&(h.Bd=x,h.hd=e);return H}function d(e,x){return L.ga&&a(e,g.FLOAT,new Float32Array(B),x)?(r=n.Ic,!0):!1}function f(e,x,H){if(!L.ia)return!1;var M=T.ue(B),t=Wa.cb(g);if(t&&t.HALF_FLOAT_OES&&a(e,t.HALF_FLOAT_OES,M,x)||g.HALF_FLOAT&&a(e,g.HALF_FLOAT,M,x))return r=n.Ea,!0;M=new Float32Array(B);if(a(e,g.FLOAT,M,x))return r=n.Ea,!0;g.bindTexture(g.TEXTURE_2D,H);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,
g.UNSIGNED_BYTE,null);g.bindFramebuffer(h.ab,J);T.Wc(g,H,2,2,M,!1,!1);g.bindFramebuffer(h.ab,null);g.bindTexture(g.TEXTURE_2D,H);return a(e,null,null,x)?(r=n.Ea,!0):!1}function l(e,x,H){q=!0;if(f(e,!0,H)||d(x,!0))return!0;q=!1;return f(e,!1,H)||d(x,!1)?!0:!1}function m(e){if(r===n.P){g=e||E;r=n.RGBA8;q=!0;Wa.Pc(g);L||(L=Wa.Ob(g));Xa.reset();J=g.createFramebuffer();h.ab=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(h.ab,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);K.P();R=K.Qa(g);e=g.createTexture();
g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,e);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);I=e;var x=e=g.RGBA,H=g.RGBA16F,M=g.RGBA32F;M&&(e=M);H&&(x=H);if((H||M)&&l(x,e,I))return p(),!0;e=x=g.RGBA;if(l(x,e,I))return p(),!0;r=n.RGBA8;p();return!1}}function p(){g.deleteProgram(R.ta);g.deleteTexture(I);I=R=null}for(var n={P:-1,Ic:3,Ea:2,RGBA8:0},r=n.P,h={Bd:null,
hd:null,ab:null},q=!0,u=new Uint8Array(16),B=Array(64),w=0;4>w;++w)for(var C=0;4>C;++C){var v=0===(C+w)%2?1:0,A=4*w+C;B[4*A]=v;B[4*A+1]=v;B[4*A+2]=v;B[4*A+3]=v}var g=null,L=null,R=null,I=null,J=null;return{pe:function(e){m(e);return q},Lc:function(e,x){r===n.P&&(typeof("undefined"!==x)&&(L=x),m(e));return r!==n.RGBA8},Sg:function(e){m(e);return r===n.Ic},lf:function(e){m(e);return r===n.Ea},Eg:function(e){m(e);return h.Bd},Oe:function(e){m(e);return h.hd},m:function(){g=null;q=!0;r=n.P;L=null}}}(),
hb={instance:function(a){function d(){w&&w.remove();w=T.instance({isFloat:!1,isPot:!1,width:a.size*a.X[0],height:a.size*a.X[1]})}var f=null,l=!1,m=!1,p=null,n=!1,r=!1,h=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,u="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(l=!0,b&&void 0!==b.ie&&(a.mask=b.ie+a.mask),f=T.instance({isFloat:!1,url:a.mask}));var B=!1;a.customInputShader&&(B="s50",K.Jc({name:"_",id:B,h:a.customInputShader,lh:["uSource"],precision:"lowp"}),
K.M(B,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":h="s39";n=!0;break;case "meanNormalization":h="s40";n=!0;break;case "grayScale":h="s36";n=!1;break;case "grayScaleTilt":h="s37";r=!0;n=!1;break;case "rgbGrayTilt":h="s38";r=!0;n=!1;break;case "copy":h=B?B:"s0";break;case "inputLightRegulation":h=B?B:"s36";p=$a.instance({fd:u,Ad:a.size,yd:a.nBlurPass,Y:!1});m=!0;break;case "inputMix0":h="none";p=ab.instance({C:u,ma:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Y:!1});m=!0;break;case "inputMix1":h=
"none";p=bb.instance({C:u,ma:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Y:!1});m=!0;break;case "inputCut4":h="none";p=gb.instance({C:u,ma:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,La:a.isNormalized||!1,qc:a.overlap||0,Y:!1});u*=p.Qe();m=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}u=Math.ceil(u);r&&K.M(h,[{name:"u29",type:"1f",value:a.tilt}]);l&&(h+="Mask");var w=null;d();var C={H:function(){return a.size},Re:function(){return u},Ub:function(){return C.H()},
Xe:function(){return m?p.Ja():w},Eb:function(v){a.X=v;d()},R:function(v){Xa.Z();if("abort"===h)return v.g(0),v;"none"!==h&&(K.set(h),n&&K.L("u30",1/a.size),w.I(),l&&f.g(1),U.l(!1,!1),w.g(0),v=w);m&&p.process(v)},m:function(){w.remove();l&&f.remove()}};return C}},nb={instance:function(a){function d(){if(J.Ba){m.input&&(m.input.remove(),m.pb.remove());var x=a.size*a.sparsity;I=Math.log(x/a.size)/Math.log(2);m.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:x*a.X[0],height:x*a.X[1],cc:I});m.pb=
T.instance({isFloat:!0,isPot:!0,width:a.size*a.X[0],height:a.size*a.X[1]})}}function f(){m.sa&&m.sa.remove();m.sa=T.instance({isFloat:!0,isPot:!n,isLinear:!n&&r.isLinear,width:a.size*a.X[0],height:a.size*a.X[1]})}function l(x){r.buffer.forEach(function(H,M){r.results[M][0]=x[0][H];r.results[M][1]=x[1][H];r.results[M][2]=x[2][H];r.results[M][3]=x[3][H]});return r.results}a.normalize=a.normalize||!1;var m={input:null,bias:null,pb:null,sa:null,pc:null,nc:null,oc:null},p=null,n=!0,r={type:"undef",F:null,
isLinear:!1,buffer:[],results:[],qb:!1},h=-1,q=a.isReorganize?a.isReorganize:!1,u=a.kernelsCount?!0:!1,B=[a.Ka?"s32":"s31",a.Ka?"s34":"s33","s35"][a.shiftRGBAMode||0],w={isEnabled:!1},C=1/a.size;a.jf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.yb.Ub(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.yb.Ub());var v={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],A=a.sparsity*a.sparsity,g=!1,L=a.size,R="";if(a.maxPooling){switch(a.maxPooling.size){case 2:R=
"s41";break;case 4:R="s42"}g=!0;L/=a.maxPooling.size;m.nc=T.instance({isFloat:!0,isPot:!1,width:L})}var I=-1,J=null;n&&f();m.bias=T.instance(a.bias);var e={H:function(){return a.size},Ub:function(){return L},Zc:function(){return a.classesCount},ke:function(x){p.g(x)},vf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,mf:T.instance(a.remap.maskTexture),Oa:a.remap.layers.map(function(x){return a.parent.Ue(x)}),depth:a.remap.depth})},Pf:function(){switch(a.connectivityUp){case "direct":J=ib.instance(a.connectivity);
break;case "square":J=jb.instance(a.connectivity);break;case "squareFast":J=kb.instance(a.connectivity,a.activation);break;case "full":J=lb.instance(Object.assign({Ka:a.Ka},a.connectivity));break;case "conv":h=a.kernelsCount,J=mb.instance(a.connectivity),q&&(m.pc=T.instance({width:L,isFloat:!0,isFlipY:!1,isPot:!1}))}d()},R:function(x,H){p=x;J.Ba?(m.input.I(),u&&m.bias.g(2),J.R(w),m.input.g(0),m.input.Ie(I),m.pb.I(),u?K.set("s0"):(K.set(B),K.L("u4",A),m.bias.g(1)),m.input.le(I,0),U.l(!1,!1),K.set(v),
m.sa.A(),m.pb.g(0),U.l(!1,!1)):(m.sa.I(),m.bias.g(1),J.R());if(n)return H=m.sa,g&&(m.nc.I(),H.g(0),K.set(R),K.S("u14",C,C),U.l(!1,!1),H=m.nc),q&&(m.pc.A(),K.set("s24"),K.S("u18",h,L/h),H.g(0),U.l(!1,!1),H=m.pc),H.g(0),H;var M=m.sa;if(a.normalize||r.qb)x=a.normalize,K.set(r.qb?"s9":"s8"),K.L("u10",x?C:1),m.oc.I(),M.g(0),U.l(!1,!1),M=m.oc;x=null;switch(r.type){case "cpuRGBA2Float":M.Pb(!1);H?x=e.xf(M).then(r.F):(M=e.yf(M),r.F(M));break;case "cpuMeanFloat":M.Pb(!0);if(H)x=M.Af().then(r.F);else{M=M.Bf();
for(var t=0;t<M.length;++t);r.F(M)}break;case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==r.F&&r.F(M)}H&&null===x&&(x=Promise.resolve());return x},Eb:function(x){a.X=x;d();f()},Wf:function(x){x&&(r.type=x.wb||"none",r.F=x.vb||null,r.isLinear=x.mc?!0:!1);f();x="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var H=0,M=0,t=0;H<x;++H)r.buffer.push(M+(a.size-1-t)*a.size),r.results.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++t);r.qb="gpuRawAvg"===r.type||"cpuMeanFloat"===
r.type;if(a.normalize||r.qb)m.oc=T.instance({isFloat:!0,isPot:!0,width:a.size})},xf:function(x){return x.zf().then(l)},yf:function(x){x=x.rc();l(x);return r.results},m:function(){for(var x in m){var H=m[x];H&&H.remove()}J&&(J.m(),J=null)}};a.yb&&e.Pf(a.yb);return e}};
function ob(a){var d=null,f=null,l=null,m=0,p=this,n=null,r={Oa:[],wb:"none",mc:!1,vb:null,grid:null};this.v=function(){this.oe(n.Oa);l.Wf({wb:n.wb,mc:n.mc,vb:n.vb})};this.Ue=function(h){return d[h]};this.Eb=function(h){["s32","s34","s27"].forEach(function(q){K.M(q,[{type:"2f",name:"u20",value:h}])});d&&d.forEach(function(q){q.Eb(h)})};this.oe=function(h){var q=null;m=h.length;var u=null!==n.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),B=u?n.grid:[1,1];u&&this.Eb(B);d=h.map(function(w,C){w=
Object.assign({},w,{index:C,parent:p,yb:q,jf:C===m-1,Ka:u,X:B});return q=C=0===C?hb.instance(w):nb.instance(w)});f=d[0];l=d[m-1];d.forEach(function(w,C){0!==C&&w.vf()})};this.R=function(h){h.g(0);var q=h;d.forEach(function(u){q=u.R(q,!1)});return q};this.Se=function(){return f.Re()};this.Ye=function(){return l.H()};this.Ja=function(){return l.Xe()};this.Zc=function(){return l.Zc()};this.m=function(){d&&(d.forEach(function(h){h.m()}),l=f=d=null,m=0)};"undefined"!==typeof a&&(n=Object.assign({},r,a),
this.v())}
var ib={instance:function(a){var d=T.instance(a.weights);return{Ba:!0,kb:function(){return 1},m:function(){d.remove()},Ze:function(){return d},R:function(){K.set("s30");d.g(1);U.l(!1,!1)}}}},lb={instance:function(a){var d=a.fromLayerSize,f=T.instance(a.weights),l=a.Ka?"s27":"s26";return{Ba:!0,kb:function(){return d},m:function(){f.remove()},R:function(m){if(m.isEnabled){K.set("s28");m.mf.g(3);for(var p=Math.min(m.Oa.length,m.depth),n=0;n<p;++n)m.Oa[n].ke(4+n)}else K.set(l);K.L("u8",a.toLayerSize);K.L("u9",
a.fromLayerSize);f.g(1);U.l(!1,!1)}}}},jb={instance:function(a){for(var d=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,m=l*f,p=m/d,n=d/f,r=0,h=0,q=0,u=Array(l*f*l*f*4),B=Array(l*f*l*f*4),w=Array(d*d),C=0;C<w.length;++C)w[C]=0;C=Math.floor(l/2);for(var v=.5/f,A=.5/d,g=.5/m,L=0;L<f;++L)for(var R=Math.round(L*n),I=0;I<f;++I){var J=Math.round(I*n),e=L/f,x=I/f;e+=v;x+=v;for(var H=0;H<l;++H){var M=R+H-C;0>M&&(M+=d);M>=d&&(M-=d);for(var t=0;t<l;++t){var S=r/m,N=h/m,c=J+t-C;0>c&&(c+=d);c>=d&&(c-=d);var k=
M/d,D=c/d;N=1-N-1/m;k+=A;D+=A;S+=g;N+=g;var O=L*l+H,G=I*l+t;G=f*l-G-1;O=G*f*l+O;u[4*O]=S;u[4*O+1]=N;u[4*O+2]=k;u[4*O+3]=D;D=w[c*d+M]++;O=D%p;k=M*p+O;c=c*p+(D-O)/p;c=d*p-1-c;c=c*d*p+k;B[4*c]=S;B[4*c+1]=N;B[4*c+2]=e;B[4*c+3]=x;++r>=m&&(r=0,++h);++q}}}w=null;var ea=T.instance(a.weights);delete a.weights.data;var ha=T.instance({width:m,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var ma=T.instance({width:m,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;return{Ba:!0,kb:function(){return p},
m:function(){ha.remove();ma.remove();ea.remove()},R:function(){K.set("s25");ea.g(1);ma.g(2);U.l(!1,!1)}}}},mb={instance:function(a){var d=a.kernelsCount,f=a.toSparsity,l=f*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],p=T.instance(a.weights);return{Ba:!0,kb:function(){return l},Kg:function(){return f},Ze:function(){return p},m:function(){p.remove()},R:function(){K.set("s29");K.Rf("u28",m);K.L("u26",d);K.L("u27",f);K.L("u8",a.toLayerSize);K.L("u9",a.fromLayerSize);p.g(1);U.l(!1,!1)}}}},kb={instance:function(a,
d){var f=a.fromLayerSize,l=a.toLayerSize,m=a.toSparsity,p=a.stride?a.stride:1,n=m*l/f,r=l<f,h=f/l,q=T.instance(a.weights),u="s51"+[f.toString(),l.toString(),m.toString(),p.toString(),d].join("_");K.Fe(u)||(a=Ka(d),l=[{type:"1f",name:"u8",value:l},{type:"1f",name:"u32",value:p}],r&&l.push({type:"1f",name:"u9",value:f}),f=[(r?n:m).toFixed(1),a],r&&f.push(h.toFixed(1)),K.af(r?"s47":"s46",u,f),K.M(u,l.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Ba:!1,kb:function(){return n},m:function(){q.remove()},R:function(){K.set(u);q.g(3);U.l(!1,!1)}}}},$a={instance:function(a){var d=a.yd?a.yd:3,f=a.fd?a.fd:64,l=a.Ad?a.Ad:64,m=a.Y?!0:!1;a={isFloat:!1,width:f,isPot:!1,isFlipY:!1};var p=T.instance(a),n=T.instance(a),r=T.instance(a),h=T.instance(a),q=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),u=1/f;return{process:function(B){K.set("s43");h.A();U.l(m,!1);K.set("s44");for(var w=0;w<d;++w)p.A(),K.S("u14",u,0),U.l(m,!1),r.A(),h.g(0),U.l(m,
!1),n.A(),p.g(0),K.S("u14",0,u),U.l(m,!1),h.A(),r.g(0),U.l(m,!1),w!==d-1&&n.g(0);K.set("s45");q.A();B.g(0);n.g(1);h.g(2);U.l(m,!1);q.g(0)},Ja:function(){return q}}}},ab={instance:function(a){function d(u){return T.instance({isFloat:u,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=d(!1),m=[d(!1),d(!1),d(!1)],p=[d(!1),d(!1),d(!1)],n=d(!0),r=[l,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6));var h="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),q={u1:0};K.Va([{id:"s53",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:a,j:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",h:h,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){K.set("s53");l.I();U.l(f.Y,!1);K.set("s54");for(var u=0;3>u;++u)K.S("u33",1,0),m[u].A(),r[u].g(0),
U.l(!1,!1),K.S("u33",0,1),p[u].A(),m[u].g(0),U.l(!1,!1);K.set("s55");n.A();l.g(0);p[0].g(1);p[1].g(2);p[2].g(3);U.l(!1,!1);n.g(0)},Ja:function(){return n}}}},bb={instance:function(a){function d(q){return T.instance({isFloat:q,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=d(!1),m=d(!1),p=d(!1),n=d(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6));var r="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),h={u1:0};K.Va([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:h,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:a,j:h,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",h:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){K.set("s56");l.I();U.l(f.Y,!1);K.set("s57");K.S("u33",1,0);m.A();l.g(0);U.l(!1,!1);K.S("u33",0,1);p.A();m.g(0);U.l(!1,!1);K.set("s58");n.A();l.g(0);p.g(1);U.l(!1,!1);n.g(0)},Ja:function(){return n}}}},gb={instance:function(a){function d(u){return T.instance({isFloat:u,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,
ea:9,C:128,gain:1,qc:0,La:!1,Y:!1},a),l=d(!1),m=null,p=null,n=null;f.La&&(m=d(!1),p=d(!1),n=d(!0));a={u1:0};var r=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",f.qc.toFixed(4)),j:a,i:["u1"],
precision:"lowp"}];if(f.La){var h="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4));r.push({id:"s60",name:"_",h:h,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",h:q,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}K.Va(r);return{process:function(){K.set("s59");l.I();U.l(f.Y,!1);f.La?(K.set("s60"),K.S("u33",1,0),m.A(),l.g(0),U.l(!1,!1),K.S("u33",0,1),p.A(),m.g(0),U.l(!1,!1),K.set("s61"),n.A(),l.g(0),p.g(1),U.l(!1,!1),n.g(0)):l.g(0)},Qe:function(){return 2-f.qc},Ja:function(){return f.La?n:l}}}};
function pb(a,d){a[d]=!0;a.setAttribute(d,"true")}function qb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function rb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function sb(a){if(!a)return a;var d=null;if(a.video){var f=function(l){return l&&"object"===typeof l?Object.assign({},l):l};d={};"undefined"!==typeof a.video.width&&(d.width=f(a.video.width));"undefined"!==typeof a.video.height&&(d.height=f(a.video.height));"undefined"!==typeof a.video.facingMode&&(d.facingMode=f(a.video.facingMode))}d={audio:a.audio,video:d};"undefined"!==typeof a.deviceId&&tb(d,a.deviceId);return d}
function tb(a,d){d&&(a.video=a.video||{},a.video.deviceId={exact:d},a.video.facingMode&&delete a.video.facingMode)}function ub(a){var d=a.video.width;a.video.width=a.video.height;a.video.height=d;return a}
function wb(a){function d(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(C,v){return Math.abs(C-w)-Math.abs(v-w)})}function f(w){var C=sb(a);w=w(C);m.push(w);l(w)}function l(w){if(w.video&&w.video.facingMode&&w.video.facingMode.exact){var C=w.video.facingMode.exact;w=sb(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=C;m.push(w)}}var m=[];if(!a||!a.video)return m;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
d(a.video.width.ideal).slice(0,3),n=d(a.video.height.ideal).slice(0,3),r={},h=0;for(r.pa=void 0;h<p.length;r={pa:r.pa},++h){r.pa=p[h];var q={},u=0;for(q.oa=void 0;u<n.length;q={oa:q.oa},++u)if(q.oa=n[u],r.pa!==a.video.width.ideal||q.oa!==a.video.height.ideal){var B=Math.max(r.pa,q.oa)/Math.min(r.pa,q.oa);B<4/3-.1||B>16/9+.1||f(function(w,C){return function(v){v.video.width.ideal=w.pa;v.video.height.ideal=C.oa;return v}}(r,q))}}}f(function(w){return ub(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&f(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),f(function(w){delete w.video.width;delete w.video.height;return w}));a.video.facingMode&&(f(function(w){delete w.video.facingMode;return w}),a.video.width&&a.video.height&&f(function(w){ub(w);delete w.video.facingMode;return w}));m.push({audio:a.audio,video:!0});return m}
function xb(a){a.volume=0;pb(a,"muted");if(qb()){if(1===a.volume){var d=function(){a.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){a.volume=0;pb(a,"muted")},5)}}
function yb(a,d,f,l){function m(n){p||(p=!0,f(n))}var p=!1;navigator.mediaDevices.getUserMedia(l).then(function(n){function r(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)m("VIDEO_NULLSIZE");else{q={re:null,Vf:null,pf:null};try{var u=n.getVideoTracks()[0];u&&(q.pf=u,q.re=u.getCapabilities(),q.Vf=u.getSettings())}catch(B){}p||d(a,n,q)}}else m("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var q=a.play();xb(a);"undefined"===
typeof q?r():q.then(function(){r()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);xb(a);a.addEventListener("loadeddata",h,!1)}).catch(function(n){m(n)})}
function zb(a,d,f){var l=rb()?document.createElement("video"):!1;l?rb()?(pb(l,"autoplay"),pb(l,"playsinline"),f&&f.audio?l.volume=0:pb(l,"muted"),Ab(f).then(function(){yb(l,a,function(){function m(n){if(0===n.length)d("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var r=n.shift();yb(l,a,function(){m(n)},r)}}var p=wb(f);m(p)},f)})):d&&d("MEDIASTREAMAPI_NOT_FOUND"):d&&d("VIDEO_NOT_PROVIDED")}
function Ab(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var d=a.video.facingMode;d=d.exact||d.ideal;if(!d)return Promise.resolve("NO_FACINGMODE");var f={user:[],environment:["camera2 0"]}[d];return f&&0!==f.length?new Promise(function(l){Bb(function(m){m?(m=m.find(function(p){var n=p.label;return n?f.some(function(r){return n.includes(r)}):!1}))?(a.video.deviceId={exact:m.deviceId},l("SUCCESS")):
l("NO_PREFERRED_DEVICE_FOUND"):l("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Bb(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(d){(d=d.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&d.length&&0<d.length?a(d,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}
var Cb=function(){function a(A,g,L,R,I,J,e){if(!C)if(e===J.length)I();else{switch(J[e]){case "A":L();break;case "D":A();break;case "S":g().then(function(x,H){v.Zd();a(A,g,L,H?null:R,I,J,++e)}).catch(function(x){console.log("An error occurred in the WebAR loop: ",x);I()});return;case "R":R&&R()}a(A,g,L,R,I,J,++e)}}var d={n:5,fc:1,vd:0,hb:[35,49],bb:[2,200],k:.7,cg:200,uf:.05},f=-1,l=null,m=-1,p=-1,n=0,r=-1,h=-1,q=0,u=0,B=d.bb[1],w=Math.log(2),C=!0,v={Ve:function(){switch(f){case -1:return-1;case 0:return h+
l.vd;case 1:return q}},Ke:function(A){return Math.pow(Math.min(Math.max(r,0),l.n-1)/(l.n-1),A||1)},v:function(A){l=Object.assign({},d,A);r=h=l.fc;f=0;v.reset()},Zd:function(A){A=("undefined"===typeof A?Date.now():A)||0;var g=Math.min(Math.max(A-u,l.bb[0]),l.bb[1]);B=g;u=A;var L=-1===m?0:l.k;m=Math.min(Math.max(1E3/g,5),120)*(1-L)+m*L;A-p>l.cg&&5<++n&&(g=l.k,r=r*(1-g)+(m<l.hb[0]?h-1:m>l.hb[1]?h+1:h)*g,Math.abs(r-h)>1-l.uf&&(g=Math.min(Math.max(Math.round(r),0),l.n-1),g!==h&&(r=h=g,m=(l.hb[1]-l.hb[0])/
2)),p=A)},Kd:function(A,g,L,R,I,J){C=!1;a(A,g,L,R,I,J,0)},stop:function(){C=!0},Nf:function(A){q=A;f=1},bg:function(){f=0;v.reset()},reset:function(){B=d.bb[1];p=m=-1;n=0},kh:function(A,g,L){L=Math.exp(-w*B/L);return(1-L)*A+L*g},Bg:function(){return B}};return v}(),Db=function(){function a(){f(A+C.dc);g.port.postMessage("DONE")}function d(){J.Wa=0===C.va?R(f):R(l)}function f(t){I.ya&&null!==v&&(t-=A,t=Math.min(Math.max(t,C.Oc[0]),C.Oc[1]),A+=t,p(),e.isEnabled&&e.Ma&&I.aa&&A-e.$b>C.Gc&&(q(),e.$b=A),
v(A))}function l(t){I.ya&&(J.timeout=setTimeout(f.bind(null,t),C.va))}function m(){v=null;I.ya=!1;p()}function p(){J.Wa&&(window.cancelAnimationFrame(J.Wa),J.Wa=null);J.timeout&&(window.clearTimeout(J.timeout),J.timeout=null)}function n(t){t&&!I.aa?(I.aa=!0,L&&Cb.bg(),g.port.postMessage("STOP"),Wa.$d(!0),d()):!t&&I.aa&&(I.aa=!1,L&&Cb.Nf(1),Wa.$d(!1),g.port.postMessage("START"))}function r(t){t.target.hidden?H():x()}function h(t,S,N){S=t.createShader(S);t.shaderSource(S,N);t.compileShader(S);return S}
function q(){e.Ma=!1;var t=e.ha,S=e.mb,N=e.ob,c=e.W;t.uniform1f(e.cd,Math.random());e.za?S.beginQueryEXT(c,N):t.beginQuery(c,N);t.drawElements(t.POINTS,1,t.UNSIGNED_SHORT,0);e.za?S.endQueryEXT(c):t.endQuery(c);Wa.flush();B().then(function(k){0===k||isNaN(k)?(e.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",k)):(k=C.ce*C.Fc*1E3/k,e.Fb=(e.Fb+1)%C.Da,e.bc[e.Fb]=k,++e.rd>C.Da&&(e.tb.set(e.bc),e.tb.sort(function(D,O){return D-O}),
k=e.tb[Math.floor(C.Da/2)],e.eb=Math.max(e.eb,k),C.Ec(k/e.eb)),e.Ma=!0)}).catch(function(){e.Ma=!0})}function u(t){var S=e.ha,N=e.mb,c=e.ob;c=e.za?N.ug(c,N.QUERY_RESULT_AVAILABLE_EXT):S.getQueryParameter(c,S.QUERY_RESULT_AVAILABLE);S=S.getParameter(N.GPU_DISJOINT_EXT);c?t(!S):setTimeout(u.bind(null,t),.1)}function B(){return new Promise(function(t,S){u(function(N){if(N){N=e.ha;var c=e.mb,k=e.ob;N=e.za?c.getQueryObjectEXT(k,c.QUERY_RESULT_EXT):N.getQueryParameter(k,N.QUERY_RESULT);t(N)}else S()})})}
var w={nd:!0,Oc:[1,200],dc:20,va:0,Fc:50,ce:240,Gc:3E3,Da:3,Ec:null},C=null,v=null,A=0,g=null,L=!1,R=null,I={ra:!1,aa:!0,Zb:!1,Yb:!1,Xb:!1,ya:!1},J={Wa:null,timeout:null},e={isEnabled:!1,Ma:!1,ha:null,mb:null,ob:null,W:null,cd:null,za:!0,$b:0,rd:0,bc:null,tb:null,Fb:0,eb:0},x=n.bind(null,!0),H=n.bind(null,!1),M={v:function(t){C=Object.assign(w,t);Object.assign(I,{aa:!0,ra:!0,ya:!1});R=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==C.Ec){t=document.createElement("canvas");
t.setAttribute("width","1");t.setAttribute("height","1");var S={antialias:!1};t=t.getContext("webgl2",S)||t.getContext("webgl",S);if(S=t.getExtension("EXT_disjoint_timer_query")||t.getExtension("EXT_disjoint_timer_query_webgl2")){e.ha=t;e.mb=S;e.isEnabled=!0;e.za=S.beginQueryEXT?!0:!1;var N=h(t,t.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),c=h(t,t.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
C.Fc.toString())),k=t.createProgram();t.attachShader(k,N);t.attachShader(k,c);t.linkProgram(k);N=t.getAttribLocation(k,"a0");e.cd=t.getUniformLocation(k,"u39");t.useProgram(k);t.enableVertexAttribArray(N);k=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,k);t.bufferData(t.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),t.STATIC_DRAW);t.vertexAttribPointer(N,4,t.FLOAT,!1,16,0);k=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,k);t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),t.STATIC_DRAW);
t.disable(t.DEPTH_TEST);t.disable(t.DITHER);t.disable(t.STENCIL_TEST);t.viewport(0,0,1,1);k=e.za?S.createQueryEXT():t.createQuery();e.ob=k;e.W=S.TIME_ELAPSED_EXT||t.TIME_ELAPSED;e.$b=-C.Gc;e.bc=new Float32Array(C.Da);e.tb=new Float32Array(C.Da);e.eb=0;e.Fb=0;e.rd=0;e.Ma=!0}}if(C.nd){t=!1;try{if("undefined"===typeof SharedWorker){var D=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
C.dc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),O=new Worker(D);O.addEventListener("message",a);g={Cd:O,port:O};I.Zb=!0}else{var G=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
C.dc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(G);ea.port.start();ea.port.addEventListener("message",a);g={Cd:ea,port:ea.port};I.Yb=!0}t=!0}catch(ha){}t&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",H),window.addEventListener("focus",x)),window.addEventListener("pagehide",
H),window.addEventListener("pageshow",x),I.Xb=!0)}L="undefined"!==typeof Cb},m:function(){m();I.Xb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",H),window.removeEventListener("focus",x)),window.removeEventListener("pagehide",H),window.removeEventListener("pageshow",x),I.Xb=!1);I.Yb?(g.port.close(),I.Yb=!1):I.Zb&&(g.Cd.terminate(),I.Zb=!1);Object.assign(I,{aa:!0,ra:!1,ya:!1});v=null},Xg:function(){return I.aa},update:function(t){Object.assign(C,
t)},Kd:function(t){I.ra||M.v({});p();I.ya=!0;v=t;I.aa&&d()},stop:m};return M}(),Eb=function(){function a(B,w){var C=B[0]-.5;B=B[1]-.5;var v=w[0]-.5;w=w[1]-.5;return C*C+B*B-(v*v+w*w)}var d={zd:4,xb:[1.5,1.5,2],ca:[.1,.1,.1],Md:1,C:-1,ja:-1,Yf:2,tf:1,tc:!0,Ce:.8},f=null,l=[],m=[],p=[],n=[0],r=[.5,.5,1],h=null,q=0,u=[0,0,0];return{v:function(B){f=Object.assign({},d,B);l.splice(0);m.splice(0);p.splice(0);q=0;B=f.xb[0]*f.ca[0];var w=f.xb[1]*f.ca[1],C=1/(1+f.xb[2]*f.ca[2]),v=f.Md*Math.min(f.C,f.ja),A=
v/f.C;v/=f.ja;var g=.5*f.Ce;g*=g;for(var L=0;L<f.zd;++L){var R=[];m.push(R);var I=Math.pow(C,L),J=A*I,e=v*I;I=J*f.tf;p.push(I);var x=J*B,H=e*w;J/=2;e/=2;for(var M=1+(1-J-J)/x,t=1+(1-e-e)/H,S=0;S<t;++S)for(var N=e+S*H,c=N-.5,k=0;k<M;++k){var D=J+k*x,O=D-.5;O*O+c*c>g||(D=[D,N,I],l.push(D),R.push(D))}f.tc&&R.sort(a);h=l}f.tc&&l.sort(a)},get:function(B){var w=h.length;if(0===w)return r;for(;B>=n.length;)n.push(0);n[B]>=w&&(n[B]=0);var C=h[Math.floor(n[B])%w];n[B]=(n[B]+1/f.Yf)%w;if(0===q)return C;u[0]=
C[0];u[1]=C[1];u[2]=q;return u},Zg:function(B){B>=n.length||(n[B]=Math.floor(Math.random()*h.length))},bh:function(B){q=B;if(0===q)h=l;else{for(var w=p.length,C=w-1,v=0;v<w;++v)if(p[v]<=B){C=v;break}h=m[C]}},reset:function(){for(var B=l.length/n.length,w=0;w<n.length;++w)n[w]=Math.floor(w*B);q=0;h=l}}}(),Fb={Rb:function(){return Date.now()},xg:function(){return performance.now()}},Hb=function(){var a={ef:!0,isLinear:!0,ec:[4,11]};return{tg:function(d,f,l){return f.isDetected?Math.floor(f.s*d):(d=
Math.floor(Math.log2(d/4)),d=Math.min(Math.max(d,4),9),Math.max(l,Math.pow(2,d)))},instance:function(d){var f=Object.assign({},a,d),l=[],m=null,p=-1,n=null,r=!1;for(d=f.ec[0];d<=f.ec[1];++d)l[d]=null;return{I:function(h,q){q!==p&&(m&&m.remove(),m=T.instance({isLinear:f.isLinear,isPot:!0,width:q}));if(r=f.ef&&q<.5*h){h=Math.floor(Math.log2(h));var u=f.ec;h=Math.min(Math.max(h,u[0]),u[1]);u=h;if(!l[u]){var B=T.instance({isPot:!0,isMipmap:!0,od:!0,width:Math.pow(2,u)});l[u]={ba:B,wd:-1}}h=l[h];n=h.ba;
h.wd!==q&&(n.Sd(Math.log2(q)),h.wd=q)}else n=m;p=q;n.I()},g:function(h){n.g(h);r&&n.ib()},remove:function(){m&&m.remove();l.forEach(function(h){h&&h.ba.remove()})}}}}}(),Ib=function(){var a=0,d=null,f=null,l=null,m=null;return{v:function(p,n){a=p.length;d=n;f=p;l=new Float32Array(a);m=new Float32Array(a)},We:function(){return m},Xf:function(p,n,r){p.forEach(function(h,q){var u=Math.min(1,f[q]*r*(n+.33*(1-n)));h=u*h+(1-u)*l[q];l[q]=h;h=d[q](h);h=Math.min(Math.max(h,0),1);m[q]=h})}}}(),X={VERSION:"1.4.0",
ua:[],Jb:!1,Kb:!1,Ib:!1,Ua:!0,Ta:!1,ready:!1,initialized:!1},Jb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",Hc:"../../",va:0,width:512,height:512,Zf:40,Nd:[.6,5.8],ca:[.07,.07,.15],Kf:.7,If:2,Jf:[2,2,2],gb:!0,He:[.03,.005],threshold:.8,Xd:.7,Yd:.03,Be:.06,Ge:.02,fe:[1,.05],fg:10,bf:!1,Hb:[2,7],O:{dd:[3,
7],quality:[0,6],position:[0,7],rotation:[5,7]},ic:11,xd:1,qf:1,ge:[.1,.01],Gf:[.4,-.7,-.4],Hf:[.3,0,0],Ae:!1,he:.001,Kc:[Math.PI/10,Math.PI/6],Ed:[.1,.4],Fd:[.009,.02],Gd:[.1,.2],hc:5,ed:.1,ee:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],rf:[Ja.bind(null,.1,.7),Ja.bind(null,.1,.7),Ja.bind(null,.05,.4),Ja.bind(null,.05,.4),Ja.bind(null,.05,.6),Ja.bind(null,.05,.6),Ja.bind(null,.1,.5),Ja.bind(null,.3,.7),Ja.bind(null,.7,.8),Ja.bind(null,.7,.8),Ja.bind(null,.15,.6)]};X.get_nMorphs=function(){return b.ic};
var Kb=null,Lb=null,Mb=null,Nb=[],Ob=b.threshold;
function Pb(){function a(){1===++ea&&(Ib.v(b.ee,b.rf),d(),X.ready=!0,X.ua.forEach(function(z){z()}),X.ua.splice(0,X.ua.length),f(),ea=0)}function d(){I=new Float32Array(b.ic);J=new Float32Array(b.ic);e=new Uint8Array(g*g*4);X.get_morphTargetInfluences=function(){return I};X.get_morphTargetInfluencesStabilized=function(){return Ib.We()};X.set_morphUpdateCallback=function(z){x=z};X.get_rotation=function(){return t};X.get_positionScale=function(){var z=L.Vd.Te();z.Pb(!1);z=z.rc();c[0]=1-z[1][0];c[1]=
z[2][0];c[2]=z[3][0]*D.G[0];return c};X.get_rotationStabilized=function(){return N};X.switch_sleep=function(z){ma!==ha.wc||z?ma=z?ha.wc:ha.play:f()};X.on_detect=function(z){z(y.$);y.lc.push(z)};X.is_detected=function(){return y.$};X.set_animateDelay=function(z){v=z;Db.update({va:v})}}function f(){ma!==ha.play&&(ma=ha.play,Db.stop(),l())}function l(){var z,P;return Aa(new va(new oa(function(aa){switch(aa.la){case 1:a:{if("VIDEO"===G.element.nodeName){var Q=G.element.currentTime-ya;0>Q&&(ya=G.element.currentTime);
if(1E3*Q<b.fg)break a;ya+=Q}G.ba.refresh();Q=xa.ad();Q[0]===G.G[0]&&Q[1]===G.G[1]||q()}z=Cb.Ve();P=0;case 2:if(!(P<z)){aa.la=4;break}Q=L;var na=A;K.set("s63");Xa.Z();Q.gd.I(.5*Math.min(G.G[0],G.G[1]),C);G.ba.g(0);Q.Bb.g(1);b.gb&&K.L("u40",k);U.l(!1,!1);na.R(Q.gd);b.bf?Q=T.Ef(H,e).then(m):(T.Df(H,e),m(),Q=Promise.resolve());aa.la=3;return{value:Q};case 3:++P;aa.la=2;break;case 4:Jb.disableRendering||(Q=L,Xa.Z(),R.I(),K.set("s66"),b.gb&&K.L("u40",k),Q.Bb.g(0),U.l(!1,!1)),Q=Cb.Ke(),O=3*(1-Q)+1*Q,Cb.Zd(),
X.Ua&&(Xa.ag(),K.set("s62"),G.ba.g(0),U.l(!1,!1),E.enable(E.BLEND),E.blendFunc(E.SRC_ALPHA,E.ONE),R.g(0),U.l(!1,!1),E.disable(E.BLEND)),E.flush(),ma!==ha.wc&&Db.Kd(l),aa.la=0}})))}function m(){r();if(!b.Ae&&y.$){for(var z=0,P=0;3>P;++P)z=n(P+b.O.rotation[0],b.O.rotation[1]),z=(2*z-1)*b.Gf[P],z+=b.Hf[P],M[P]=z;b.gb&&(P=Da(b.He,ba.U),k=k*(1-P)+(-z+k)*P)}p();z=Fb.Rb();P=Math.max(1,z-ba.td);var aa=n(b.O.quality[0],b.O.quality[1]);ba.Dd=Ja(b.Ed[0],b.Ed[1],aa);aa=n(b.O.position[0],b.O.position[1]);var Q=
n(b.O.position[0]+1,b.O.position[1]),na=n(b.O.position[0]+2,b.O.position[1]);ba.Ld=1-Ja(b.Gd[0],b.Gd[1],Math.sqrt(aa*aa+Q*Q+na*na)/P);aa=ba.Aa[0]-M[0];Q=ba.Aa[1]-M[1];na=ba.Aa[2]-M[2];P=Math.sqrt(aa*aa+Q*Q+na*na)/P;ba.Aa[0]=M[0];ba.Aa[1]=M[1];ba.Aa[2]=M[2];ba.Hd=1-Ja(b.Fd[0],b.Fd[1],P);ba.U=ba.Dd*ba.Ld*ba.Hd;ba.td=z;ba.sd[ba.ac]=ba.U;ba.ac=(ba.ac+1)%b.hc;for(z=0;z<b.hc;++z)ba.U=Math.min(ba.sd[z],ba.U);Ib.Xf(I,ba.U,O,J);x&&x(ba.U,O);if(y.$){z=O*Da(b.ge,ba.U);for(P=0;3>P;++P)t[P]=z*M[P]+(1-z)*t[P],
N[P]=t[P];N[2]-=k}else z=Fb.Rb()*b.he,S[0]=b.Kc[0]*Math.sin(z),S[1]=b.Kc[1]*Math.cos(z),N[0]=S[0],N[1]=S[1],N[2]=S[2]}function p(){var z=n(b.O.dd[0],b.O.dd[1]);y.rb=b.ed*z+(1-b.ed)*y.rb;y.rb>b.Xd+b.Yd&&!y.$?(y.lc.forEach(function(P){P(!0)}),y.$=!0):y.rb<b.Xd-b.Yd&&y.$&&(y.lc.forEach(function(P){P(!1)}),y.$=!1,k=0)}function n(z,P){z+=g*P;return(e[4*z]+e[4*z+1]+e[4*z+2]+e[4*z+3])/1020}function r(){I.forEach(function(z,P){if(y.$){var aa=(b.xd+P)%g,Q=b.qf+Math.floor((b.xd+P)/g);Q=g-1-Q;aa+=g*Q;Q=e.slice(4*
aa,4*aa+4);aa=(Q[0]+Q[1]+Q[2]+Q[3])/1020;Q=b.Ge*Math.sqrt((Q[0]*Q[0]+Q[1]*Q[1]+Q[2]*Q[2]+Q[3]*Q[3])/1020-aa*aa);I[P]=z>aa-Q&&z<aa+Q?z:aa}else I[P]=0})}function h(z){A=new ob({Oa:z.layers,wb:"gpuRaw",vb:function(P){var aa=L;aa.Bb.Qd(1);E.viewport(0,0,1,1);K.set("s64");b.gb&&K.L("u40",k);K.L("u41",ba.U);K.Sf("u42",Eb.get(0));U.l(!1,!1);aa.Vd.Qd(1);K.set("s65");K.L("u41",ba.U);aa.Bb.g(0);U.l(!1,!1);H=P}});z=A.Se();z!==C&&(C=z,u(),B());g=A.Ye();a()}function q(){var z=xa.ad();G.G[0]=z[0];G.G[1]=z[1];Ya.jb().width=
z[0];Ya.jb().height=z[1];b.width=z[0];b.height=z[1];z=G.eg;var P=G.G[1]/G.G[0],aa=Ya.V()/Ya.H();P>aa?1>=P?z[0]*=P:z[1]/=P:(z[0]*=P,P=1/aa,z[0]*=P,z[1]*=P);z[1]*=aa;K.M("s66",[{name:"u43",type:"1f",value:aa}]);G.D[0]=0;G.D[1]=0;G.D[2]=0;G.D[3]=0;switch(Jb.rotate){case 0:G.D[0]=z[0];G.D[3]=z[1];break;case 180:G.D[0]=-z[0];G.D[3]=-z[1];break;case 90:G.D[1]=z[0];G.D[2]=-z[1];break;case -90:G.D[1]=-z[0],G.D[2]=z[1]}z=[{type:"mat2",name:"u44",value:G.D}];K.M("s63",z);K.M("s62",z);K.M("s66",[{type:"mat2",
name:"u44",value:90===Math.abs(Jb.rotate)?[0,-G.D[1],-G.D[2],0]:G.D}])}function u(){D.C=b.width;D.ja=b.height;Eb.v({xb:b.Jf,zd:b.If,C:D.C,ja:D.ja,Md:b.Kf,ca:b.ca,tc:!0});D.G=[1,D.C/D.ja]}function B(){K.M("s62",[{type:"1i",name:"u1",value:0}]);K.M("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u40",value:0},{type:"2f",name:"u46",value:D.G}]);K.M("s66",[{type:"1i",name:"u45",value:0},{type:"2f",name:"u46",value:D.G},{type:"1f",name:"u40",value:0},{type:"3f",name:"u47",
value:[0,.5,1]}]);K.M("s64",[{type:"1i",name:"u48",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u49",value:b.Nd[0]},{type:"1f",name:"u50",value:b.Nd[1]},{type:"1f",name:"u51",value:b.Zf},{type:"1f",name:"u52",value:Ob},{type:"1f",name:"u53",value:b.Be},{type:"1f",name:"u40",value:0},{type:"3f",name:"u54",value:[b.ca[0]*D.G[0],b.ca[1]*D.G[1],b.ca[2]]}]);K.M("s65",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u12",value:1},{type:"2f",name:"u55",value:b.fe}])}function w(z){var P=new Float32Array([0,
.5,.5,0]);z.gd=Hb.instance({});P={width:1,height:1,isFloat:!0,isPot:!1,array:P};z.Bb=Za.instance(P);z.Vd=Za.instance(P)}var C=64,v=b.va,A=null,g=0,L={},R=null,I=null,J=null,e=null,x=null,H=null,M=[0,0,0],t=[0,0,0],S=[0,0,0],N=[0,0,0],c=[0,0,0],k=0,D={G:null,C:-1,ja:-1},O=1,G={eg:[.5,.5],D:[.5,0,0,.5],element:null,ba:null,G:[-1,-1]},ea=0,ha={we:-4,sf:-3,Yg:-2,wc:-1,play:0},ma=ha.sf,y={rb:0,$:!1,lc:[]},ba={U:1,Ld:1,Dd:1,Hd:1,Aa:[0,0,0],td:Fb.Rb(),sd:new Float32Array(b.hc),ac:0},ya=0,xa={v:function(){G.ba=
T.instance({J:G.element,isPot:!1,isFloat:!1,isFlipY:!0});R=T.instance({isPot:!1,isFloat:!1,width:D.C,height:D.ja});w(L);Db.v({nd:!1,va:v});Cb.v({fc:0,n:b.Hb[1]-b.Hb[0]+1,vd:b.Hb[0]});Mb?h(Mb):Ea(function(z){z=JSON.parse(z);h(z)})},m:function(){Db.stop();A&&(A.m(),A=null);ma=ha.we},se:function(z){X.Jb&&X.Jb();var P={video:{facingMode:{ideal:Jb.facingMode},width:{min:Jb.minWidth,max:Jb.maxWidth,ideal:Jb.idealWidth},height:{min:Jb.minHeight,max:Jb.maxHeight,ideal:Jb.idealHeight}},audio:Jb.isAudio};tb(P,
Jb.deviceId);zb(function(aa,Q){Kb=Q;X.Kb&&X.Kb();z(aa)},function(){window.Gb&&window.Gb("WEBCAM_UNAVAILABLE")},P)},ud:function(z,P){K.Va([{id:"s62",name:"_",Ca:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",Xa:["a0"],Ga:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u44"],precision:"lowp"},{id:"s63",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
Ca:"attribute vec2 a0;uniform sampler2D u45;uniform mat2 u44;uniform vec2 u46;uniform float u40;const vec2 e=vec2(.25,.5),f=vec2(.5);varying vec2 vv0;void main(){vec4 a=texture2D(u45,e);vec2 d=a.gb,h=a.a*u46;float b=cos(u40),c=sin(u40);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u44*k,gl_Position=vec4(a0,0.,1.);}",Xa:["a0"],Ga:[2],i:["u1","u45","u46","u44","u40"],precision:"lowp"},{id:"s64",name:"_",Ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u48,u45;uniform vec3 u42,u54;uniform float u49,u50,u51,u52,u41,u53,u40;varying vec2 vv0;const vec4 e=vec4(.25);void main(){vec4 h=texture2D(u48,vec2(.4375,.9375)),i=texture2D(u48,vec2(.5625,.9375));float j=dot(h-i,e);bool k=j>u52;vec4 a=texture2D(u45,vec2(.5,.5));k?a.r=2.:a.r>u51?a.r=0.:a.r>1.9&&(a.a>u50||a.a<u49)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u42,a.r=1.;else{float l=dot(e,texture2D(u48,vec2(.0625,.9375))),m=dot(e,texture2D(u48,vec2(.1875,.9375))),d=dot(e,texture2D(u48,vec2(.3125,.9375))),f=cos(u40),g=sin(u40);vec2 c=mat2(f,g,-g,f)*vec2(l,m);float b;a.r>1.9?(b=1.-u41,b*=1.-step(abs(c.x),u53)*step(abs(c.y),u53)*step(abs(d),u53)):(b=1.,a.r=0.),a.gba+=vec3(c,d)*u54*a.a*b;}gl_FragColor=a;}",
i:"u48 u45 u42 u49 u50 u51 u52 u54 u41 u53 u40".split(" ")},{id:"s66",name:"_",Ca:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",h:"uniform sampler2D u45;uniform vec3 u47;uniform vec2 u46;uniform float u40,u43;varying vec2 vv0;const vec2 l=vec2(1),e=vec2(.5),m=vec2(.25,.5);void main(){float f=cos(u40),g=-sin(u40);mat2 h=mat2(f,g/u43,-g*u43,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u45,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u46,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u47*max(a.x,a.y),1.);}",
i:"u45 u46 u47 u44 u40 u43".split(" "),precision:"lowp"},{id:"s65",name:"_",h:"uniform sampler2D u1,u12;uniform vec2 u55;uniform float u41;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);float c=mix(u55.x,u55.y,u41);gl_FragColor=mix(b,a,c*f);}",i:["u1","u12","u55","u41"]}]);G.element=z;Lb=G.element;q();u();B();xa.v();P&&P()},ad:function(){var z=[-1,-1],P=G.element;"VIDEO"===P.nodeName?(z[0]=P.videoWidth,z[1]=P.videoHeight):(z[0]=P.width,z[1]=P.height);
90===Math.abs(Jb.rotate)&&z.reverse();return z}};Nb.push(xa);return xa}X.onLoad=function(a){X.ready?a():X.ua.push(a)};X.switch_displayVideo=function(a){X.Ua=a;X.Ta&&(X.Ta.style.display=X.Ua?"block":"none")};X.onWebcamAsk=function(a){X.Jb=a};X.onContextLost=function(a){X.Ib=a};X.onWebcamGet=function(a){X.Kb=a};
X.destroy=function(){Db.m();Lb&&Lb.srcObject&&Lb.srcObject.getTracks().forEach(function(a){a.stop()});Nb.forEach(function(a){a.m()});Nb.splice(0);Ya.m();X.switch_displayVideo(!1);X.initialized=!1;X.ua.splice(0)};X.set_size=function(a,d){b.width=a;b.height=d};X.get_size=function(){return{width:b.width,height:b.height}};X.get_videoStream=function(){return Kb};X.get_video=function(){return Lb};X.get_cv=function(){return Ya.jb()};X.set_color=function(a){K.M("s66",[{type:"3f",name:"u47",value:a}])};
X.init=function(a){var d=Pb(),f=a.callbackReady||function(p){console.log("ERR:",p)},l=a.callbackReady?a.callbackReady.bind(null,!1):null;if(a.canvasId||a.canvas){var m=a.canvas?a.canvas:document.getElementById(a.canvasId);if(m)if(X.initialized)f("ALREADY_INITIALIZED");else{X.initialized=!0;window.Gb=f?function(p){f(p);window.Gb=!1}:!1;a.NNCPath&&(b.Hc=a.NNCPath);"undefined"!==typeof a.NNC&&(Mb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&X.ua.push(l);Ob=a.threshold||Ob;if(!Ya.v({$a:m,width:b.width,
height:b.height,debug:!1,kd:!1,kc:function(){X.Ib&&X.Ib()},premultipliedAlpha:!1}))return f("GL_INCOMPATIBLE"),!1;X.Ta=Ya.jb();X.Ua||(X.Ta.style.display="none");a.videoSettings&&a.videoSettings.videoElement?d.ud(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Jb,a.videoSettings),d.se(function(p){d.ud(p,!1)}));return!0}else f("INVALID_CANVAS")}else f("NO_CANVASID")};const JEELIZFACEEXPRESSIONS=X;
if(typeof(module)!=='undefined'){module.exports=JEELIZFACEEXPRESSIONS;}
