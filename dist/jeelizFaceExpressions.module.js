/* eslint-enable */
/* prettier-ignore */
function ca(){this.Oa=!1;this.na=null;this.be=void 0;this.la=1;this.Xc=this.te=0;this.Ga=null}function fa(a){if(a.Oa)throw new TypeError("Generator is already running");a.Oa=!0}ca.prototype.Qa=function(a){this.be=a};ca.prototype.Ta=function(a){this.Ga={Ee:a,ff:!0};this.la=this.te||this.Xc};ca.prototype.return=function(a){this.Ga={return:a};this.la=this.Xc};function oa(a){this.o=new ca;this.wf=a}
oa.prototype.Qa=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na.next,a,this.o.Qa);this.o.Qa(a);return ra(this)};function ta(a,c){fa(a.o);var f=a.o.na;if(f)return pa(a,"return"in f?f["return"]:function(l){return{value:l,done:!0}},c,a.o.return);a.o.return(c);return ra(a)}oa.prototype.Ta=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na["throw"],a,this.o.Qa);this.o.Ta(a);return ra(this)};
function pa(a,c,f,l){try{var m=c.call(a.o.na,f);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return a.o.Oa=!1,m;var p=m.value}catch(n){return a.o.na=null,a.o.Ta(n),ra(a)}a.o.na=null;l.call(a.o,p);return ra(a)}
function ra(a){for(;a.o.la;)try{var c=a.wf(a.o);if(c)return a.o.Oa=!1,{value:c.value,done:!1}}catch(f){a.o.be=void 0,a.o.Ta(f)}a.o.Oa=!1;if(a.o.Ga){c=a.o.Ga;a.o.Ga=null;if(c.ff)throw c.Ee;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function ua(a){this.next=function(c){return a.Qa(c)};this.throw=function(c){return a.Ta(c)};this.return=function(c){return ta(a,c)};this[Symbol.iterator]=function(){return this}}
function Aa(a){function c(l){return a.next(l)}function f(l){return a.throw(l)}return new Promise(function(l,m){function p(n){n.done?l(n.value):Promise.resolve(n.value).then(c,f).then(p,m)}p(a.next())})}function Da(a,c){return a[0]*(1-c)+a[1]*c}function Ea(a){var c=new XMLHttpRequest;c.open("GET",b.Hc+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}
function Ia(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var f in a)a[f]=Ia(a[f],c);return a}function Ja(a,c,f){return Math.min(Math.max((f-a)/(c-a),0),1)}
function Ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return"gl_FragColor=gl_FragColor;\n          vec4 zou=gl_FragColor;\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          gl_FragColor=0.5*zou*(vec4(1.)+tanhZou);";
default:return!1}}function Oa(a,c){var f=c%8;return a[(c-f)/8]>>7-f&1}function Pa(a,c,f){var l=1,m=0;for(f=c+f-1;f>=c;--f)m+=l*Oa(a,f),l*=2;return m}function Qa(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,f=new Uint8Array(c),l=0;l<c;++l)f[l]=a.charCodeAt(l);return f}function Ra(a){return"string"===typeof a?JSON.parse(a):a}
function Sa(a){if("undefined"===typeof Ra(a).nb){var c=Ra(a);a=c.ne;var f=c.nf,l=c.n;c=Qa(c);for(var m=new Float32Array(l),p=new Float32Array(f),n=a+f+1,t=0;t<l;++t){var g=n*t,q=0===Oa(c,g)?1:-1,v=Pa(c,g+1,a);g=g+1+a;for(var B=p.length,w=0,r=g;r<g+B;++r)p[w]=Oa(c,r),++w;for(B=g=0;B<f;++B)g+=p[B]*Math.pow(2,-B-1);m[t]=0===g&&0===v?0:q*(1+g)*Math.pow(2,1+v-Math.pow(2,a-1))}a=m}else if(l=Ra(a),a=l.nb,0===a)a=new Uint8Array(l.nb);else{f=l.n;l=Qa(l);c=new Uint32Array(f);for(m=0;m<f;++m)c[m]=Pa(l,m*a,a);
a=c}return a}
var I=function(){function a(d,k,C){k=d.createShader(k);d.shaderSource(k,C);d.compileShader(k);return d.getShaderParameter(k,d.COMPILE_STATUS)?k:null}function c(d,k,C){k=a(d,d.VERTEX_SHADER,k);C=a(d,d.FRAGMENT_SHADER,C);d===D&&t.push(k,C);var O=d.createProgram();d.attachShader(O,k);d.attachShader(O,C);d.linkProgram(O);return O}function f(d){return["float","sampler2D","int"].map(function(k){return"precision "+d+" "+k+";\n"}).join("")}function l(d,k){k.u=k.u?!0:!1;if(!k.u){k.Da=k.Da||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";k.Ya=
k.Ya||["a0"];k.Ha=k.Ha||[2];k.precision=k.precision||w;k.id=v++;void 0!==k.Od&&(k.Od.forEach(function(H,ea){k.h=k.h.replace(H,k.zb[ea])}),k.Od.splice(0));k.Dc=0;k.Ha.forEach(function(H){k.Dc+=4*H});var C=f(k.precision);k.sa=c(d,C+k.Da,C+k.h);k.B={};k.i.forEach(function(H){k.B[H]=d.getUniformLocation(k.sa,H)});k.attributes={};k.Ia=[];k.Ya.forEach(function(H){var ea=d.getAttribLocation(k.sa,H);k.attributes[H]=ea;k.Ia.push(ea)});if(k.j){d.useProgram(k.sa);q=k;g=k.id;for(var O in k.j)d.uniform1i(k.B[O],
k.j[O])}k.qa=!0}}function m(d){Ta.Qf(N);g!==d.id&&(N.R(),g=d.id,q=d,D.useProgram(d.sa),d.Ia.forEach(function(k){0!==k&&D.enableVertexAttribArray(k)}))}function p(d,k,C){l(d,k,C);d.useProgram(k.sa);d.enableVertexAttribArray(k.attributes.a0);g=-1;return q=k}function n(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var t=[],g=-1,q=null,v=0,B=!1,w="highp",r=["u1"],F=["u0"],A={u1:0},h={u0:0},M={u1:0,u2:1},R={u1:0,u3:1},J=["u1","u3","u4"],
G={u5:0},e=["u6","u7","u8","u9"],x={u6:0,u7:1},K={s0:n(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:r,j:A,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:M},s3:{h:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:A,u:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:r,j:A},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:M},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:r,j:A},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:r,j:A},s8:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:h},s9:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:h},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:r,j:A},s11:{h:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:A},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:r,j:A,u:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:r,j:A,u:!0},s15:{h:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:A},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:F,j:h,u:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:F,j:h,u:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:F,j:h,u:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:F,j:h,u:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:F,j:h},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:F,j:h},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:F,j:h,u:!0},s23:{h:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},u:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:A},s25:{h:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},x),u:!0},s26:{h:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:e,j:x},s27:{h:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(e),j:x,u:!0},s28:{h:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(e),j:Object.assign({u25:3,u22:4,u23:5,u24:6},x),u:!0},s29:{h:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(e),j:Object.assign({u3:2},x)},s30:{h:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:x,u:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:J,j:R},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(J),j:R,u:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:J,j:R,u:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(J),j:R,u:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:J,j:R,u:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:r,j:A,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:A,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:A,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:M,u:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:M,u:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:G},s42:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:G,u:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:A,precision:"lowp",u:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:A,precision:"lowp",u:!0},s45:{h:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},u:!0}},L={s46:{h:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],zb:["1.1111",",gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),zb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},u=null,S=null,N={sb:function(){return B},v:function(){if(!B){u=Ia(K,2);S=Ia(L,2);w="highp";D.getShaderPrecisionFormat&&(D.getShaderPrecisionFormat(D.FRAGMENT_SHADER,D.MEDIUM_FLOAT),D.getShaderPrecisionFormat(D.FRAGMENT_SHADER,D.LOW_FLOAT));for(var d in u)l(D,u[d],d);I.set("s0");D.enableVertexAttribArray(0);B=!0}},Wa:function(d){d.forEach(function(k){N.Jc(k)})},Jc:function(d){u[d.id]=d;l(D,d,d.id)},af:function(d,k,
C){k||(k=d);u[k]=Object.create(S[d]);u[k].hf=!0;S[d].zb&&S[d].zb.forEach(function(O,H){u[k].h=u[k].h.replace(new RegExp(O,"g"),C[H])});l(D,u[k],k)},set:function(d){var k=u[d];k.u&&(k.u=!1,l(D,k,d));m(k)},Ra:function(d){return p(d,n(),"s48")},uc:function(d){return p(d,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s49")},Fe:function(d){return"undefined"===typeof u[d]?!1:u[d].qa},R:function(){-1!==g&&(g=-1,q.Ia.forEach(function(d){0!==d&&D.disableVertexAttribArray(d)}))},vc:function(){var d=
0;q.Ia.forEach(function(k,C){C=q.Ha[C];D.vertexAttribPointer(k,C,D.FLOAT,!1,q.Dc,d);d+=4*C})},De:function(){D.enableVertexAttribArray(0)},Sa:function(){N.Ab(D)},Ab:function(d){d.vertexAttribPointer(q.Ia[0],2,d.FLOAT,!1,8,0)},fh:function(d,k){D.uniform1i(q.B[d],k)},L:function(d,k){D.uniform1f(q.B[d],k)},T:function(d,k,C){D.uniform2f(q.B[d],k,C)},Rf:function(d,k){D.uniform2fv(q.B[d],k)},Sf:function(d,k){D.uniform3fv(q.B[d],k)},gh:function(d,k,C,O){D.uniform3f(q.B[d],k,C,O)},Tf:function(d,k,C,O,H){D.uniform4f(q.B[d],
k,C,O,H)},Td:function(d,k){D.uniform4fv(q.B[d],k)},hh:function(d,k){D.uniformMatrix2fv(q.B[d],!1,k)},ih:function(d,k){D.uniformMatrix3fv(q.B[d],!1,k)},jh:function(d,k){D.uniformMatrix4fv(q.B[d],!1,k)},M:function(d,k){N.set(d);k.forEach(function(C){switch(C.type){case "4f":D.uniform4fv(q.B[C.name],C.value);break;case "3f":D.uniform3fv(q.B[C.name],C.value);break;case "2f":D.uniform2fv(q.B[C.name],C.value);break;case "1f":D.uniform1f(q.B[C.name],C.value);break;case "1i":D.uniform1i(q.B[C.name],C.value);
break;case "mat2":D.uniformMatrix2fv(q.B[C.name],!1,C.value);break;case "mat3":D.uniformMatrix3fv(q.B[C.name],!1,C.value);break;case "mat4":D.uniformMatrix4fv(q.B[C.name],!1,C.value)}})},Fg:function(){return"lowp"},m:function(){N.R();D.disableVertexAttribArray(0);for(var d in u){var k=u[d];k.qa&&(k.qa=!1,D.deleteProgram(k.sa));k.hf&&delete u[d]}t.forEach(function(C){D.deleteShader(C)});t.splice(0);v=0;B=!1;q=null;g=-1}};return N}(),D=null,Ya=function(){function a(r){console.log("ERROR in ContextFF: ",
r);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function f(r,F,A){r.setAttribute("width",F);r.setAttribute("height",A)}function l(r){if(c())return!1;var F=document.createElement("canvas");f(F,5,5);var A=null;try{A=F.getContext("webgl2",r)}catch(h){return!1}if(!A)return!1;m(A);Va.Pc(A);r=Va.Ob(A);if(!r.ga&&!r.ia)return Wa.m(),Va.reset(),!1;A=Wa.Lc(A,r);Wa.m();Va.reset();return A?!0:!1}function m(r){r.clearColor(0,0,0,0);r.disable(r.DEPTH_TEST);r.disable(r.BLEND);
r.disable(r.DITHER);r.disable(r.STENCIL_TEST);r.disable(r.CULL_FACE);r.GENERATE_MIPMAP_HINT&&r.FASTEST&&r.hint(r.GENERATE_MIPMAP_HINT,r.FASTEST);r.disable(r.SAMPLE_ALPHA_TO_COVERAGE);r.disable(r.SAMPLE_COVERAGE);r.depthFunc(r.LEQUAL);r.clearDepth(1)}var p=null,n=null,t=null,g=!0,q=null,v=null,B=[],w={H:function(){return p.width},V:function(){return p.height},jb:function(){return p},wg:function(){return D},ka:function(){return g},flush:function(){D.flush()},Ng:function(){Xa.Z();w.Ff()},Ff:function(){T.reset();
U.reset();I.R();I.De();D.disable(D.DEPTH_TEST);D.disable(D.BLEND);U.Za();I.Sa()},Le:function(){q||(q=new Uint8Array(p.width*p.height*4));D.readPixels(0,0,p.width,p.height,D.RGBA,D.UNSIGNED_BYTE,q);return q},zg:function(){return p.toDataURL("image/jpeg")},Ag:function(){Xa.P();n||(n=document.createElement("canvas"),t=n.getContext("2d"));f(n,p.width,p.height);for(var r=w.Le(),F=t.createImageData(n.width,n.height),A=n.width,h=n.height,M=F.data,R=0;R<h;++R)for(var J=h-R-1,G=0;G<A;++G){var e=4*(R*A+G),
x=4*(J*A+G);M[e]=r[x];M[e+1]=r[x+1];M[e+2]=r[x+2];M[e+3]=r[x+3]}t.putImageData(F,0,0);return n.toDataURL("image/png")},yg:function(r){!n&&r&&(n=document.createElement("canvas"),t=n.getContext("2d"));var F=r?n:document.createElement("canvas");f(F,p.width,p.height);(r?t:F.getContext("2d")).drawImage(p,0,0);return F},v:function(r){r=Object.assign({ha:null,kc:null,$a:null,Nc:null,width:512,height:512,premultipliedAlpha:!1,kd:!0,antialias:!1,debug:!1,qg:!1},r);r.ha?(D=r.ha,p=r.ha.canvas):r.Nc&&!r.$a?p=
document.getElementById(r.Nc):r.$a&&(p=r.$a);p||(p=document.createElement("canvas"));p.width=r.width;p.height=r.height;if(D)g=D instanceof WebGL2RenderingContext;else{g=!0;var F={antialias:r.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:r.premultipliedAlpha,stencil:!1,depth:r.kd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&(F.antialias=!1);var A=l(F);A||!F.antialias||c()||(F.antialias=
!1,A=l(F));A&&(D=p.getContext("webgl2",F));D?g=!0:((D=p.getContext("webgl",F))||(D=p.getContext("experimental-webgl",F)),g=!1)}if(!D)return a("WebGL1 and 2 are not enabled");r.kc&&p.addEventListener&&(v=r.kc,p.addEventListener("webglcontextlost",v,!1));if(!Va.v())return a("Not enough GL capabilities");m(D);I.v();U.v();Wa.Lc(D,Va.Je());B.forEach(function(h){h(D)});B.splice(0);return!0},kg:function(){return new Promise(function(r){D?r(D):B.push(r)})},m:function(){D&&(Va.m(),I.m(),Wa.m());v&&(p.removeEventListener("webglcontextlost",
v,!1),v=null);D=q=t=n=p=null;B.splice(0)}};return w}(),Ta=function(){function a(){null===c&&("undefined"!==typeof I?c=I:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Qf:function(f){c!==f&&(c&&c.R(),c=f)},sb:function(){return c.sb()},Sa:function(){return c.Sa()},Ab:function(f){return c.Ab(f)},vc:function(){return c.vc()},R:function(){return c.R()},set:function(f){a();return c.set(f)},Ra:function(f){a();return c.Ra(f)},uc:function(f){a();return c.uc(f)}}}(),
T=function(){function a(d){D.bindTexture(D.TEXTURE_2D,d)}function c(d){L[0]=d;d=u[0];var k=d>>16&32768,C=d>>12&2047,O=d>>23&255;return 103>O?k:142<O?k|31744|((255==O?0:1)&&d&8388607):113>O?(C|=2048,k|(C>>114-O)+(C>>113-O&1)):k=(k|O-112<<10|C>>1)+(C&1)}function f(d){var k=new Uint16Array(d.length);d.forEach(function(C,O){k[O]=c(C)});return k}function l(){if(null!==S.Vb)return S.Vb;var d=p(f([.5,.5,.5,.5]),!0);return null===d?!0:S.Vb=d}function m(){if(null!==S.Wb)return S.Wb;var d=p(new Uint8Array([127,
127,127,127]),!1);return null===d?!0:S.Wb=d}function p(d,k){if(!Ta.sb()||!A)return null;var C=null,O=Math.sqrt(d.length/4);try{var H=D.getError();if("FUCKING_BIG_ERROR"===H)return!1;C=N.instance({isFloat:!1,N:k,array:d,width:O});H=D.getError();if(H!==D.NO_ERROR)return!1}catch(ea){return!1}Xa.P();D.viewport(0,0,O,O);D.clearColor(0,0,0,0);D.clear(D.COLOR_BUFFER_BIT);Ta.set("s0");C.wa(0);U.l(!0,!0);d=4*O*O;k=new Uint8Array(d);D.readPixels(0,0,O,O,D.RGBA,D.UNSIGNED_BYTE,k);O=!0;for(H=0;H<d;++H)O=O&&3>
Math.abs(k[H]-127);C.remove();Xa.Z();return O}var n=0,t=null,g=0,q=null,v=null,B=null,w=null,r=null,F=null,A=!1,h=[],M={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,od:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,J:null,bd:null,gf:!1,N:!1,F:null,ub:4,cc:0},R=!1,J=null,G=null,e=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],x=!1,K=!1,L=new Float32Array(1),u=new Int32Array(L.buffer),S={Vb:null,Wb:null},N={v:function(){A||
(r=[D.RGBA,null,D.RGBA,D.RGBA],F=[D.RGBA,null,D.RGBA,D.RGBA],t=[D.TEXTURE0,D.TEXTURE1,D.TEXTURE2,D.TEXTURE3,D.TEXTURE4,D.TEXTURE5,D.TEXTURE6,D.TEXTURE7],x="undefined"!==typeof JEContext,K="undefined"!==typeof Va,x&&JEContext.Wg()&&t.push(D.TEXTURE8,D.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],w=[D.UNSIGNED_BYTE,D.FLOAT,D.FLOAT],A=!0)},$e:function(){if(!v){for(var d=new Float32Array(16384),k=0;16384>k;++k)d[k]=2*Math.random()-1;v={random:N.instance({isFloat:!0,isPot:!0,array:d,width:64}),ae:N.instance({isFloat:!1,
isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}N.dg()},Rd:function(d){D.framebufferTexture2D(Xa.Tb(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,d,0)},Lg:function(){return v.ae},dg:function(){w[1]=Va.Sb(D)},Of:function(){F=r=[D.RGBA,D.RGBA,D.RGBA,D.RGBA]},Jd:function(d){I.set("s1");Xa.P();var k=d.H(),C=d.V();D.viewport(0,0,k,C);d.g(0);U.l(!1,!1)},Df:function(d,k){N.Jd(d);D.readPixels(0,0,d.H(),d.V(),D.RGBA,D.UNSIGNED_BYTE,k)},Ef:function(d,k){N.Jd(d);return Va.sc(0,0,d.H(),d.V(),k)},Wc:function(d,k,C,O,
H,ea,ha){d.activeTexture(d.TEXTURE0);var ma=d.createTexture();d.bindTexture(d.TEXTURE_2D,ma);H=H instanceof Float32Array?H:new Float32Array(H);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,ea);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,C,O,0,d.RGBA,d.FLOAT,H);d.bindTexture(d.TEXTURE_2D,
null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!1);ha&&(Xa.Z(),I.Ra(d));d.viewport(0,0,C,O);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,k,0);d.bindTexture(d.TEXTURE_2D,ma);ha?U.l(!0,!0):U.fb(d);d.deleteTexture(ma);A&&(q[0]=-1,B=null,n=0)},Lb:function(d){d!==n&&(D.activeTexture(t[d]),n=d)},instance:function(d){var k;function C(){X=void 0!==y.J.videoWidth?y.J.videoWidth:y.J.width;Y=void 0!==y.J.videoHeight?y.J.videoHeight:y.J.height}function O(E){var V=D.getError();if("FUCKING_BIG_ERROR"===
V)return!1;D.texImage2D(D.TEXTURE_2D,0,ka,ia,ja,E);V=D.getError();V!==D.NO_ERROR&&ia!==D.RGBA&&(ia=D.RGBA,D.texImage2D(D.TEXTURE_2D,0,ka,ia,ja,E));return!0}function H(){if(!cb){a(Q);va&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,va);y.isPot?(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,y.isMirrorX?D.MIRRORED_REPEAT:D.REPEAT),D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_T,y.isMirrorY?D.MIRRORED_REPEAT:D.REPEAT)):(D.texParameteri(D.TEXTURE_2D,D.TEXTURE_WRAP_S,D.CLAMP_TO_EDGE),D.texParameteri(D.TEXTURE_2D,
D.TEXTURE_WRAP_T,D.CLAMP_TO_EDGE));y.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&D.texParameterf(D.TEXTURE_2D,JEContext.Cg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.gg);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,y.isLinear?D.LINEAR:D.NEAREST);var E=y.isMipmap&&!Ba;D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,y.od?D.LINEAR_MIPMAP_LINEAR:y.isLinear?E?D.NEAREST_MIPMAP_LINEAR:D.LINEAR:E?D.NEAREST_MIPMAP_NEAREST:D.NEAREST);ia=r[y.ub-1];ka=F[y.ub-1];ja=w[ya];Va.ka()&&(E=Va.Me(),ia===
D.RGBA&&ja===D.FLOAT?y.isMipmap||y.isLinear?ka=Wa.Oe(D):Va.Mc()?E&&(ka=E):ka=D.RGBA16F||D.RGBA:ia===D.RGB&&ja===D.FLOAT&&E&&(ka=E,ia=D.RGBA));if(y.N&&!y.isFloat||y.isFloat&&y.isMipmap&&Wa.lf())ka=Va.Ne(),ja=Va.Sb(D);y.cc&&(La=y.cc);y.isSrgb&&4===y.ub&&(ia=JEContext.Jg());if(y.J)O(y.J);else if(y.url)O(na);else if(qa){E=qa;try{"FUCKING_BIG_ERROR"!==D.getError()&&(D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,E),D.getError()!==D.NO_ERROR&&(D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null),D.getError()!==
D.NO_ERROR&&D.texImage2D(D.TEXTURE_2D,0,D.RGBA,X,Y,0,D.RGBA,D.UNSIGNED_BYTE,null)))}catch(Rb){D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null)}y.isKeepArray||(qa=null)}else E=D.getError(),"FUCKING_BIG_ERROR"!==E&&(D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null),E=D.getError(),E!==D.NO_ERROR&&(ia=D.RGBA,y.N&&ja!==D.FLOAT&&(ja=D.FLOAT,D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null))));if(y.isMipmap)if(!Ba&&da)da.ib(),Ma=!0;else if(Ba){E=Math.log2(Math.min(X,Y));Ca=Array(1+E);Ca[0]=Q;for(var V=1;V<=
E;++V){var la=Math.pow(2,V),Z=X/la;la=Y/la;var za=D.createTexture();a(za);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MIN_FILTER,D.NEAREST);D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAG_FILTER,D.NEAREST);D.texImage2D(D.TEXTURE_2D,0,ka,Z,la,0,ia,ja,null);a(null);Ca[V]=za}Ma=!0}a(null);q[n]=-1;va&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;y.F&&da&&(y.F(da),y.F=null)}}function ea(){for(var E=X*Y,V=2*E,la=3*E,Z=0;Z<E;++Z)sa[0][Z]=Ga[Z],sa[1][Z]=Ga[Z+E],sa[2][Z]=Ga[Z+V],sa[3][Z]=Ga[Z+la]}function ha(){var E=
X*Y*4;wa=[new Uint8Array(E),new Uint8Array(E),new Uint8Array(E),new Uint8Array(E)];sa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*E);Ga=new Float32Array(Na.buffer);Ha=!0}function ma(){k=new Uint8Array(X*Y*4);db=new Float32Array(k.buffer);Ua=!0}var y=Object.assign({},M,d),ba=g++;null===y.isFlipY&&(y.isFlipY=y.url?!0:!1);y.data&&(y.array="string"===typeof y.data?Sa(y.data):y.isFloat?new Float32Array(y.data):
new Uint8Array(y.data),y.isFlipY=!1);var ya=0,xa=y.J?!0:!1,z=null,P=null,aa=!1;y.N=y.N||y.isFloat;y.N&&(ya=1);!y.gf&&y.isFloat&&K&&!Va.Mc()&&(y.isFloat=!1);y.isFloat&&(ya=2);y.isAnisotropicFiltering&&x&&!JEContext.Qg()&&(y.isAnisotropicFiltering=!1);var Q=y.bd||D.createTexture(),na=null,qa=!1,X=0,Y=0,Fa=!1,cb=!1,Ha=!1,sa=null,wa=null,Na=null,Ga=null,ka=null,ia=null,ja=null,va=y.isFlipY,vb=(d=y.N&&y.isMipmap)&&Wa.pe(),Ba=d&&!vb?!0:!1,Ca=null,La=-1,eb=-1,Ma=!1;var Ua=!1;var db=k=null;y.width&&(X=y.width,
Y=y.height?y.height:X);var da={get:function(){return Q},H:function(){return X},V:function(){return Y},Mg:function(){return y.url},Rg:function(){return y.isFloat},Tg:function(){return y.N},dh:function(E){Q=E},Ug:function(){return y.isLinear},ib:function(){D.generateMipmap(D.TEXTURE_2D)},le:function(E,V){Ba?(E||(E=da.$c()),N.Lb(V),a(Ca[E]),q[V]=-1):da.g(V)},$c:function(){-1===La&&(La=Math.log2(X));return La},Sd:function(E){D.TEXTURE_MAX_LEVEL&&D.texParameteri(D.TEXTURE_2D,D.TEXTURE_MAX_LEVEL,E)},Ie:function(E){E||
(E=da.$c());if(Ba){I.set("s12");N.Lb(0);for(var V=X,la=Y,Z=1;Z<=E;++Z)V/=2,la/=2,I.T("u14",.25/V,.25/la),D.viewport(0,0,V,la),a(Ca[Z-1]),D.framebufferTexture2D(Xa.Tb(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,Ca[Z],0),U.l(!1,1===Z);q[0]=-1}else E!==eb&&(eb=E,da.Sd(E)),da.ib()},eh:function(E){(xa=!(Array.isArray(E)||E.constructor===Float32Array||E.constructor===Uint8Array))?(qa=null,y.J=E,C()):qa=E},g:function(E){if(!Fa)return!1;N.Lb(E);if(q[E]===ba)return!1;a(Q);q[E]=ba;return!0},wa:function(E){D.activeTexture(t[E]);
n=E;a(Q);q[E]=ba},A:function(){B=da;N.Rd(Q)},I:function(){D.viewport(0,0,X,Y);B=da;N.Rd(Q)},Bc:N.Bc,Mf:function(E,V){X=E;Y=V},resize:function(E,V){da.Mf(E,V);H()},clone:function(E){E=N.instance({width:X,height:Y,N:y.N,isFloat:y.isFloat,isLinear:y.isLinear,isMirrorY:y.isMirrorY,isFlipY:E?!va:va,isPot:y.isPot});Ta.set("s0");Xa.Z();E.I();da.g(0);U.l(!0,!0);return E},Uf:function(){D.viewport(0,0,X,Y)},remove:function(){D.deleteTexture(Q);cb=!0;h.splice(h.indexOf(da),1);da=null},refresh:function(){da.wa(0);
va&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);xa?D.texImage2D(D.TEXTURE_2D,0,ka,ia,ja,y.J):D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,qa);va&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},rc:function(){Ha||ha();D.readPixels(0,0,X,4*Y,D.RGBA,D.UNSIGNED_BYTE,Na);ea();return sa},zf:function(){Ha||ha();return Va.sc(0,0,X,4*Y,Na).then(function(){ea();return sa})},Bf:function(){Ua||ma();D.readPixels(0,0,X,Y,D.RGBA,D.UNSIGNED_BYTE,k);return db},Af:function(){Ua||ma();return Va.sc(0,0,X,Y,k)},Pb:function(E){Xa.P();
I.set("s15");da.g(0);if(E)D.viewport(0,0,X,Y),I.Tf("u15",.25,.25,.25,.25),U.l(!1,!0);else for(E=0;4>E;++E)D.viewport(0,Y*E,X,Y),I.Td("u15",e[E]),U.l(!1,0===E)},Cc:function(E){var V=ja===w[0]&&!m();a(Q);va&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);V?(aa||(z=document.createElement("canvas"),z.width=X,z.height=Y,P=z.getContext("2d"),P.createImageData(X,Y),aa=!0),null.data.set(E),P.putImageData(null,0,0),D.texImage2D(D.TEXTURE_2D,0,ka,ia,ja,z)):D.texImage2D(D.TEXTURE_2D,0,ka,X,Y,0,ia,ja,E);q[n]=ba;va&&
D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},nh:function(E,V){a(Q);V&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!0);D.texImage2D(D.TEXTURE_2D,0,ka,ia,ja,E);q[n]=ba;V&&D.pixelStorei(D.UNPACK_FLIP_Y_WEBGL,!1)},ah:function(E,V){var la=X*Y,Z=4*la;E=y.N?E?"RGBE":"JSON":"RGBA";V&&(E=V);V=Va.ka()&&!1;var za=null;switch(E){case "RGBE":za="s13";break;case "JSON":za=V?"s0":"s15";break;case "RGBA":case "RGBAARRAY":za="s7"}Ha||("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==E||V||ha());Xa.P();
I.set(za);da.g(0);Z=null;if("RGBA"===E||"RGBE"===E||"RGBAARRAY"===E){D.viewport(0,0,X,Y);U.l(!0,!0);D.readPixels(0,0,X,Y,D.RGBA,D.UNSIGNED_BYTE,wa);if("RGBAARRAY"===E)return{data:wa};R||(J=document.createElement("canvas"),G=J.getContext("2d"),R=!0);J.width=X;J.height=Y;la=G.createImageData(X,Y);la.data.set(wa);G.putImageData(la,0,0);Z=J.toDataURL("image/png")}else if("JSON"===E)if(V)Z=new Float32Array(la),D.viewport(0,0,X,Y),U.l(!0,!0),D.readPixels(0,0,X,Y,D.RGBA,D.FLOAT,Z);else{for(Z=0;4>Z;++Z)D.viewport(0,
Y*Z,X,Y),I.Td("u15",e[Z]),U.l(!Z,!Z);da.rc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=sa[0][V],Z[4*V+1]=sa[1][V],Z[4*V+2]=sa[2][V],Z[4*V+3]=sa[3][V]}return{format:E,data:Z,width:X,height:Y,isMirrorY:y.isMirrorY,isFlipY:"RGBA"===E?y.isFlipY:!y.isFlipY}}};y.isMipmap&&!Ba&&Fa&&!Ma&&(da.ib(),Ma=!0);if(y.url)a(Q),D.texImage2D(D.TEXTURE_2D,0,D.RGBA,1,1,0,D.RGBA,D.UNSIGNED_BYTE,null),na=new Image,na.pg="Anonymous",na.crossOrigin="Anonymous",na.src=y.url,na.onload=function(){X=na.width;Y=na.height;H()};else if(y.J){var fb=
function(){C();X?H():setTimeout(fb,1)};fb()}else y.array?(y.N&&!y.isFloat?y.array instanceof Uint16Array?(qa=y.array,H()):l()?(qa=f(y.array),H()):(H(),N.Wc(D,Q,da.H(),da.V(),y.array,va,!0)):(qa=y.isFloat?y.array instanceof Float32Array?y.array:new Float32Array(y.array):y.array instanceof Uint8Array?y.array:new Uint8Array(y.array),H()),y.isKeepArray||(qa&&qa!==y.array&&(qa=null),delete y.array)):y.bd?Fa=!0:H();da.Ig=da.H;y.F&&Fa&&(y.F(da),y.F=null);h.push(da);return da},P:function(d){d!==n&&(D.activeTexture(t[d]),
n=d);q[d]=-1;a(null)},jg:function(d){v.random.g(d)},Bc:function(){B=null;D.framebufferTexture2D(Xa.Tb(),D.COLOR_ATTACHMENT0,D.TEXTURE_2D,null,0)},reset:function(){0!==n&&D.activeTexture(t[0]);for(var d=0;d<t.length;++d)q[d]=-1;n=-1},$g:function(){n=-1},$f:function(){for(var d=0;d<t.length;++d)N.P(d)},Yc:function(){v&&(v.random.remove(),v.ae.remove())},mh:function(d,k){if("RGBA"===d.format||"RGBE"===d.format){var C=new Image;C.src=d.data;C.onload=function(){N.instance({isMirrorY:d.isMirrorY,isFlipY:d.isFlipY,
isFloat:!1,J:C,F:function(O){if("RGBA"===d.format)k(O);else{var H=d.width,ea=d.height,ha=N.instance({isMirrorY:d.isMirrorY,isFloat:!0,width:H,height:ea,isFlipY:d.isFlipY});Xa.Z();D.viewport(0,0,H,ea);I.set("s14");ha.A();O.g(0);U.l(!0,!0);N.P(0);k(ha);Va.flush();O.remove()}}})}}else"JSON"===d.format?k(N.instance({isFloat:!0,isFlipY:d.isFlipY,width:d.width,height:d.height,array:new Float32Array(d.data)})):k(!1)},ue:f,m:function(){B&&(Xa.Z(),N.Bc(),Xa.P());N.$f();h.slice(0).forEach(function(d){d.remove()});
h.splice(0);A=!1;g=0;"undefined"!==typeof Wa&&Wa.m();v=null}};return N}(),Za={instance:function(a){var c=[T.instance(a),T.instance(a)],f=[c[1],c[0]],l=f,m={Qd:function(p){l[1].A();l[0].g(p);m.Wd()},Lf:function(p){l[1].I();l[0].g(p);m.Wd()},Wd:function(){l=l===c?f:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(p){l[0].g(p)},wa:function(p){l[0].wa(p)},ig:function(p){l[1].g(p)},Te:function(){return l[0]},Gg:function(){return l[1]},Cc:function(p){l[0].Cc(p);l[1].Cc(p)},remove:function(){l[0].remove();
l[1].remove();l=null},sync:function(){m.Lf(0);I.set("s0");U.l(!1,!1)}};return m}},U=function(){function a(g){var q={da:null,indices:null};q.da=g.createBuffer();g.bindBuffer(g.ARRAY_BUFFER,q.da);g.bufferData(g.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),g.STATIC_DRAW);q.indices=g.createBuffer();g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,q.indices);g.bufferData(g.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),g.STATIC_DRAW);return q}var c=null,f=0,l=!1,m=[],p=-2,n=-2,t={reset:function(){n=p=-2},v:function(){l||
(c=a(D),t.Za(),l=!0)},instance:function(g){var q=f++,v=g.indices?g.indices.length:0,B="undefined"===typeof g.mode?D.STATIC_DRAW:g.mode,w=D.createBuffer();D.bindBuffer(D.ARRAY_BUFFER,w);D.bufferData(D.ARRAY_BUFFER,g.da instanceof Float32Array?g.da:new Float32Array(g.da),B);p=q;var r=null,F=null,A=null;if(g.indices){r=D.createBuffer();D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,r);var h=null;65536>g.indices.length?(h=Uint16Array,F=D.UNSIGNED_SHORT,A=2):(h=Uint32Array,F=D.UNSIGNED_INT,A=4);h=g.indices instanceof
h?g.indices:new h(g.indices);D.bufferData(D.ELEMENT_ARRAY_BUFFER,h,B);n=q}var M={me:function(R){p!==q&&(D.bindBuffer(D.ARRAY_BUFFER,w),p=q);R&&Ta.vc()},je:function(){n!==q&&(D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,r),n=q)},bind:function(R){M.me(R);M.je()},rg:function(){D.drawElements(D.TRIANGLES,v,F,0)},sg:function(R,J){D.drawElements(D.TRIANGLES,R,F,J*A)},remove:function(){D.deleteBuffer(w);g.indices&&D.deleteBuffer(r);M=null}};m.push(M);return M},Za:function(){-1!==p&&(D.bindBuffer(D.ARRAY_BUFFER,c.da),
p=-1);-1!==n&&(D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,c.indices),n=-1)},l:function(g,q){g&&U.Za();q&&Ta.Sa();D.drawElements(D.TRIANGLES,3,D.UNSIGNED_SHORT,0)},fb:function(g){g=g||D;var q=a(g);g.bindBuffer(g.ARRAY_BUFFER,q.da);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,q.indices);Ta.Ab(g);g.clear(g.COLOR_BUFFER_BIT);g.drawElements(g.TRIANGLES,3,g.UNSIGNED_SHORT,0);g.flush();g.bindBuffer(g.ARRAY_BUFFER,null);g.bindBuffer(g.ELEMENT_ARRAY_BUFFER,null);g.deleteBuffer(q.da);g.deleteBuffer(q.indices);t.reset();l&&
(t.Za(),Ta.Sa())},Yc:function(){var g=D,q=c;g.deleteBuffer(q.da);g.deleteBuffer(q.indices)},m:function(){t.Yc();m.forEach(function(g){g.remove()});D.bindBuffer(D.ARRAY_BUFFER,null);D.bindBuffer(D.ELEMENT_ARRAY_BUFFER,null);t.reset();l=!1;m.splice(0);f=0}};return t}(),Xa=function(){var a=null,c=null,f=null,l=!1,m=[],p={K:-2,Vc:1},n={sb:function(){return l},v:function(){if(!l){a=D.createFramebuffer();var t=Va.ka();c=t&&D.DRAW_FRAMEBUFFER?D.DRAW_FRAMEBUFFER:D.FRAMEBUFFER;f=t&&D.READ_FRAMEBUFFER?D.READ_FRAMEBUFFER:
D.FRAMEBUFFER;l=!0}},Dg:function(){return c},Pe:function(){return f},Tb:function(){return D.FRAMEBUFFER},Hg:function(){return p},vg:function(){return a},instance:function(t){void 0===t.jd&&(t.jd=!1);var g=t.ba?t.ba:null,q=t.width,v=void 0!==t.height?t.height:t.width,B=a,w=null,r=!1,F=!1,A=0;g&&(q=q?q:g.H(),v=v?v:g.V());var h={Pd:function(){r||(B=D.createFramebuffer(),r=!0,A=p.Vc++)},de:function(){h.Pd();h.A();w=D.createRenderbuffer();D.bindRenderbuffer(D.RENDERBUFFER,w);D.renderbufferStorage(D.RENDERBUFFER,
D.DEPTH_COMPONENT16,q,v);D.framebufferRenderbuffer(c,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,w);D.clearDepth(1)},bind:function(M,R){A!==p.K&&(D.bindFramebuffer(c,B),p.K=A);g&&g.A();R&&D.viewport(0,0,q,v);M&&D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT)},hg:function(){A!==p.K&&(D.bindFramebuffer(c,B),p.K=A)},clear:function(){D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT)},ng:function(){D.clear(D.COLOR_BUFFER_BIT)},og:function(){D.clear(D.DEPTH_BUFFER_BIT)},Uf:function(){D.viewport(0,0,q,v)},A:function(){A!==
p.K&&(D.bindFramebuffer(c,B),p.K=A)},rtt:function(M){g=M;p.K!==A&&(D.bindFramebuffer(D.FRAMEBUFFER,B),p.K=A);M.A()},P:function(){D.bindFramebuffer(c,null);p.K=-1},resize:function(M,R){q=M;v=R;w&&(D.bindRenderbuffer(D.RENDERBUFFER,w),D.renderbufferStorage(D.RENDERBUFFER,D.DEPTH_COMPONENT16,q,v))},remove:function(){B===a||F||(D.bindFramebuffer(c,B),D.framebufferTexture2D(c,D.COLOR_ATTACHMENT0,D.TEXTURE_2D,null,0),w&&D.framebufferRenderbuffer(c,D.DEPTH_ATTACHMENT,D.RENDERBUFFER,null),D.bindFramebuffer(c,
null),D.deleteFramebuffer(B),w&&D.deleteRenderbuffer(w));F=!0}};t.jd&&h.de();m.push(h);return h},P:function(){D.bindFramebuffer(c,null);p.K=-1},ag:function(){D.bindFramebuffer(c,null);D.clear(D.COLOR_BUFFER_BIT|D.DEPTH_BUFFER_BIT);Va.Ud();p.K=-1},reset:function(){p.K=-2},Z:function(){0!==p.K&&(D.bindFramebuffer(c,a),p.K=0)},clear:function(){Va.Ud();D.clear(D.COLOR_BUFFER_BIT)},m:function(){n.P();m.forEach(function(t){t.remove()});null!==a&&(D.deleteFramebuffer(a),a=null);n.reset();l=!1;m.splice(0);
p.Vc=1}};return n}(),Va=function(){function a(){t="undefined"===typeof Ya?JEContext:Ya;g=!0}function c(e,x,K){for(var L=0;L<x.length;++L){var u=K.getExtension(x[L]+"_"+e);if(u)return u}return null}function f(){null!==h.Db&&(clearTimeout(h.Db),h.Db=null);h.ya=!1}function l(e){if(0===h.oa.length){h.W=D.PIXEL_PACK_BUFFER;h.oa.splice(0);h.lb.splice(0);for(var x=0;x<h.Ja;++x)h.oa.push(D.createBuffer()),h.lb.push(-1);h.fa=0;h.jc=0}D.bindBuffer(h.W,h.oa[h.fa]);e.byteLength!==h.lb[h.fa]&&(D.bufferData(h.W,
e.byteLength,D.STREAM_READ),h.lb[h.fa]=e.byteLength);h.Og=!0}function m(){D.bindBuffer(h.W,null)}function p(){h.xa.forEach(function(e){D.deleteSync(e)});h.xa.splice(0)}function n(){h.fa=(h.fa+1)%h.Ja;++h.jc}var t=null,g=!1,q={ld:!1,xc:null,yc:null,pd:!1,kf:!1,zc:null,qd:!1,Ac:null,md:!1,Mb:null,cf:!1,Nb:null,df:!1},v=null,B={ga:!0,ia:!0,Qb:!0,Id:!1},w=null,r=!0,F=null,A=null,h={ve:1,Ja:-1,fa:0,jc:0,ya:!1,oa:[],xa:[],lb:[],W:null,Db:null},M="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),R=["OES",
"MOZ_OES","WEBKIT_OES"],J="undefined"===typeof window?{}:window,G={v:function(){if(g)return!0;G.reset();g||a();var e=D;if(!v.ld){v.xc=G.Sc(e);J.GL_EXT_FLOAT=v.xc;v.pd=v.xc?!0:!1;if(v.pd||G.ka())v.yc=G.Tc(e),v.kf=v.yc?!0:!1,J.GL_EXT_FLOATLINEAR=v.yc;v.ld=!0}if(!v.md){v.zc=G.cb(e);v.zc&&(v.qd=!0,J.GL_EXT_HALFFLOAT=v.zc);if(v.qd||G.ka())v.Ac=G.Uc(e),J.GL_EXT_HALFFLOATLINEAR=v.Ac;v.Pg=v.Ac?!0:!1;v.md=!0}v.Mb=G.Qc(e);v.cf=v.Mb?!0:!1;J.GL_EXT_COLORBUFFERFLOAT=v.Mb;v.Nb=G.Rc(e);v.df=v.Nb?!0:!1;J.GL_EXT_COLORBUFFERHALFFLOAT=
v.Nb;Xa.v();T.v();if(!G.xe())return!1;U.v();T.$e();return!0},reset:function(){v=Object.assign({},q);w=Object.assign({},B)},H:function(){g||a();return t.H()},V:function(){g||a();return t.V()},ka:function(){g||a();return t.ka()},Pc:function(e){G.Qc(e);G.Rc(e);G.Sc(e);G.Tc(e);G.cb(e);G.Uc(e)},Qc:c.bind(null,"color_buffer_float",M),Rc:c.bind(null,"color_buffer_half_float",M),Sc:c.bind(null,"texture_float",R),Tc:c.bind(null,"texture_float_linear",R),cb:c.bind(null,"texture_half_float",R),Uc:c.bind(null,
"texture_half_float_linear",R),Sb:function(e){var x=G.cb(e);return x&&x.HALF_FLOAT_OES?x.HALF_FLOAT_OES:e.HALF_FLOAT||e.FLOAT},Me:function(){return A||D.RGBA32F||D.RGBA},Ne:function(){return F||D.RGBA16F||D.RGBA},Je:function(){return w},Mc:function(){return w.ga},mg:function(){return w.ia},lg:function(){return w.Qb},qe:function(){return w.Id&&r},$d:function(e){r=e;!e&&h.ya&&(p(),D.bindBuffer(h.W,null),h.ya=!1)},Vg:function(){return h.ya},Cb:function(e,x,K){function L(){e.bindTexture(e.TEXTURE_2D,
null);e.bindFramebuffer(u,null);e.deleteTexture(d);e.deleteFramebuffer(N)}var u=e.FRAMEBUFFER,S=e.NEAREST,N=e.createFramebuffer();e.bindFramebuffer(u,N);var d=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,d);e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,!1);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,S);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,
S);e.texImage2D(e.TEXTURE_2D,0,x,3,3,0,e.RGBA,K,null);e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,d,0);if(e.checkFramebufferStatus(e.READ_FRAMEBUFFER||e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE)return L(),!1;Ta.uc(e);e.clearColor(0,0,0,0);e.viewport(0,0,3,3);e.disable(e.DEPTH_TEST);e.clear(e.COLOR_BUFFER_BIT);U.fb(e);e.bindFramebuffer(u,null);Ta.Ra(e);e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,d);U.fb(e);x=new Uint8Array(36);e.readPixels(0,0,3,3,e.RGBA,e.UNSIGNED_BYTE,
x);L();for(K=0;36>K;++K)if(3!==K%4&&3<Math.abs(x[K]-127))return!1;return!0},Ob:function(e){var x={ga:!1,ia:!1};e.disable(e.BLEND);e.clearColor(0,0,0,0);e.clear(e.COLOR_BUFFER_BIT);e.RGBA32F&&G.Cb(e,e.RGBA32F,e.FLOAT)&&(x.ga=!0,A=e.RGBA32F);!x.ga&&G.Cb(e,e.RGBA,e.FLOAT)&&(x.ga=!0,A=e.RGBA);var K=G.Sb(e);F=null;e.RGBA16F&&G.Cb(e,e.RGBA16F,K)&&(x.ia=!0,F=e.RGBA16F);!x.ia&&G.Cb(e,e.RGBA,K)&&(x.ia=!0,F=e.RGBA);return x},ye:function(){var e=Xa.instance({width:2});e.Pd();var x=T.instance({width:2,isFloat:!0,
ub:3});e.A();x.A();G.flush();D.checkFramebufferStatus(Xa.Pe())!==D.FRAMEBUFFER_COMPLETE?(T.Of(),w.Qb=!1):w.Qb=!0;e.remove();x.remove()},ze:function(){var e=!1;G.ka()&&(e="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(x){return"undefined"!==typeof D[x]}));w.Id=e},xe:function(){var e=G.Ob(D);Object.assign(w,e);if(!w.ga&&!w.ia)return!1;G.ye();G.ze();return!0},Cf:function(e,x,K,L,u){D.readPixels(e,x,K,L,D.RGBA,D.UNSIGNED_BYTE,
u);return Promise.resolve(u,!1)},sc:function(e,x,K,L,u,S,N){if(!G.qe())return G.Cf(e,x,K,L,u);h.Ja=N||h.ve;l(u);D.readPixels(e,x,K,L,D.RGBA,D.UNSIGNED_BYTE,0);h.xa[h.fa]=D.fenceSync(D.SYNC_GPU_COMMANDS_COMPLETE,0);G.flush();var d=!1;return new Promise(function(k,C){function O(){if(!h.ya)return f(),m(),n(),C(),!1;var H=(h.fa+1)%h.Ja;switch(D.clientWaitSync(h.xa[H],0,0)){case D.TIMEOUT_EXPIRED:case D.WAIT_FAILED:break;default:return f(),D.deleteSync(h.xa[H]),h.xa[H]=null,D.bindBuffer(h.W,h.oa[H]),D.getBufferSubData(h.W,
0,u),m(),n(),k(u,d),!0}h.Db=setTimeout(O,0);return!1}f();h.jc+1<h.Ja?(m(),n(),k(u,!1)):(h.ya=!0,O()||!S||d||(d=!0,S()))})},Ud:function(){D.viewport(0,0,G.H(),G.V())},flush:function(){D.flush()},m:function(){f();p();T.m();Xa.m();U.m();h.oa.forEach(function(e){D.deleteBuffer(e)});h.oa.splice(0);Ta.reset();g=!1}};return G}(),Wa=function(){function a(e,x,K,L){h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MIN_FILTER,L?h.NEAREST_MIPMAP_NEAREST:h.LINEAR);var u=null;if(null!==K)try{u=h.getError();if("FUCKING_BIG_ERROR"===
u)return!1;h.texImage2D(h.TEXTURE_2D,0,e,4,4,0,h.RGBA,x,K);u=h.getError();if(u!==h.NO_ERROR)return!1}catch(S){return!1}L&&h.generateMipmap(h.TEXTURE_2D);h.clear(h.COLOR_BUFFER_BIT);U.fb(h);u=h.getError();if("FUCKING_BIG_ERROR"===u)return!1;h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,v);u=h.getError();u===h.INVALID_OPERATION&&"undefined"!==typeof h.PIXEL_PACK_BUFFER&&(h.bindBuffer(h.PIXEL_PACK_BUFFER,null),h.readPixels(0,0,2,2,h.RGBA,h.UNSIGNED_BYTE,v),u=h.getError());if(u!==h.NO_ERROR)return!1;K=
!0;for(L=0;16>L;++L)K=K&&4>Math.abs(v[L]-127);K&&(g.Bd=x,g.hd=e);return K}function c(e,x){return M.ga&&a(e,h.FLOAT,new Float32Array(B),x)?(t=n.Ic,!0):!1}function f(e,x,K){if(!M.ia)return!1;var L=T.ue(B),u=Va.cb(h);if(u&&u.HALF_FLOAT_OES&&a(e,u.HALF_FLOAT_OES,L,x)||h.HALF_FLOAT&&a(e,h.HALF_FLOAT,L,x))return t=n.Fa,!0;L=new Float32Array(B);if(a(e,h.FLOAT,L,x))return t=n.Fa,!0;h.bindTexture(h.TEXTURE_2D,K);h.texImage2D(h.TEXTURE_2D,0,h.RGBA,2,2,0,h.RGBA,h.UNSIGNED_BYTE,null);h.bindFramebuffer(g.ab,G);
T.Wc(h,K,2,2,L,!1,!1);h.bindFramebuffer(g.ab,null);h.bindTexture(h.TEXTURE_2D,K);return a(e,null,null,x)?(t=n.Fa,!0):!1}function l(e,x,K){q=!0;if(f(e,!0,K)||c(x,!0))return!0;q=!1;return f(e,!1,K)||c(x,!1)?!0:!1}function m(e){if(t===n.R){h=e||D;t=n.RGBA8;q=!0;Va.Pc(h);M||(M=Va.Ob(h));Xa.reset();G=h.createFramebuffer();g.ab=h.DRAW_FRAMEBUFFER||h.FRAMEBUFFER;h.bindFramebuffer(g.ab,null);h.clearColor(0,0,0,0);h.viewport(0,0,2,2);I.R();R=I.Ra(h);e=h.createTexture();h.activeTexture(h.TEXTURE0);h.bindTexture(h.TEXTURE_2D,
e);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_S,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_WRAP_T,h.REPEAT);h.texParameteri(h.TEXTURE_2D,h.TEXTURE_MAG_FILTER,h.NEAREST);J=e;var x=e=h.RGBA,K=h.RGBA16F,L=h.RGBA32F;L&&(e=L);K&&(x=K);if((K||L)&&l(x,e,J))return p(),!0;e=x=h.RGBA;if(l(x,e,J))return p(),!0;t=n.RGBA8;p();return!1}}function p(){h.deleteProgram(R.sa);h.deleteTexture(J);J=R=null}for(var n={R:-1,Ic:3,Fa:2,RGBA8:0},t=n.R,g={Bd:null,hd:null,ab:null},q=!0,v=new Uint8Array(16),B=Array(64),
w=0;4>w;++w)for(var r=0;4>r;++r){var F=0===(r+w)%2?1:0,A=4*w+r;B[4*A]=F;B[4*A+1]=F;B[4*A+2]=F;B[4*A+3]=F}var h=null,M=null,R=null,J=null,G=null;return{pe:function(e){m(e);return q},Lc:function(e,x){t===n.R&&(typeof("undefined"!==x)&&(M=x),m(e));return t!==n.RGBA8},Sg:function(e){m(e);return t===n.Ic},lf:function(e){m(e);return t===n.Fa},Eg:function(e){m(e);return g.Bd},Oe:function(e){m(e);return g.hd},m:function(){h=null;q=!0;t=n.R;M=null}}}(),hb={instance:function(a){function c(){w&&w.remove();w=
T.instance({isFloat:!1,isPot:!1,width:a.size*a.X[0],height:a.size*a.X[1]})}var f=null,l=!1,m=!1,p=null,n=!1,t=!1,g=null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,v="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(l=!0,b&&void 0!==b.ie&&(a.mask=b.ie+a.mask),f=T.instance({isFloat:!1,url:a.mask}));var B=!1;a.customInputShader&&(B="s50",I.Jc({name:"_",id:B,h:a.customInputShader,lh:["uSource"],precision:"lowp"}),I.M(B,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":g=
"s39";n=!0;break;case "meanNormalization":g="s40";n=!0;break;case "grayScale":g="s36";n=!1;break;case "grayScaleTilt":g="s37";t=!0;n=!1;break;case "rgbGrayTilt":g="s38";t=!0;n=!1;break;case "copy":g=B?B:"s0";break;case "inputLightRegulation":g=B?B:"s36";p=$a.instance({fd:v,Ad:a.size,yd:a.nBlurPass,Y:!1});m=!0;break;case "inputMix0":g="none";p=ab.instance({C:v,ma:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Y:!1});m=!0;break;case "inputMix1":g="none";p=bb.instance({C:v,ma:a.varianceMin,ea:a.blurKernelSizePx,
gain:a.gain||1,Y:!1});m=!0;break;case "inputCut4":g="none";p=gb.instance({C:v,ma:a.varianceMin,ea:a.blurKernelSizePx,gain:a.gain||1,Ma:a.isNormalized||!1,qc:a.overlap||0,Y:!1});v*=p.Qe();m=!0;break;case "direct":case "none":case "abort":g="abort";break;default:g="s4"}v=Math.ceil(v);t&&I.M(g,[{name:"u29",type:"1f",value:a.tilt}]);l&&(g+="Mask");var w=null;c();var r={H:function(){return a.size},Re:function(){return v},Ub:function(){return r.H()},Xe:function(){return m?p.Ka():w},Eb:function(F){a.X=F;
c()},S:function(F){Xa.Z();if("abort"===g)return F.g(0),F;"none"!==g&&(I.set(g),n&&I.L("u30",1/a.size),w.I(),l&&f.g(1),U.l(!1,!1),w.g(0),F=w);m&&p.process(F)},m:function(){w.remove();l&&f.remove()}};return r}},nb={instance:function(a){function c(){if(G.Ca){m.input&&(m.input.remove(),m.pb.remove());var x=a.size*a.sparsity;J=Math.log(x/a.size)/Math.log(2);m.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:x*a.X[0],height:x*a.X[1],cc:J});m.pb=T.instance({isFloat:!0,isPot:!0,width:a.size*a.X[0],
height:a.size*a.X[1]})}}function f(){m.ra&&m.ra.remove();m.ra=T.instance({isFloat:!0,isPot:!n,isLinear:!n&&t.isLinear,width:a.size*a.X[0],height:a.size*a.X[1]})}function l(x){t.buffer.forEach(function(K,L){t.results[L][0]=x[0][K];t.results[L][1]=x[1][K];t.results[L][2]=x[2][K];t.results[L][3]=x[3][K]});return t.results}a.normalize=a.normalize||!1;var m={input:null,bias:null,pb:null,ra:null,pc:null,nc:null,oc:null},p=null,n=!0,t={type:"undef",F:null,isLinear:!1,buffer:[],results:[],qb:!1},g=-1,q=a.isReorganize?
a.isReorganize:!1,v=a.kernelsCount?!0:!1,B=[a.La?"s32":"s31",a.La?"s34":"s33","s35"][a.shiftRGBAMode||0],w={isEnabled:!1},r=1/a.size;a.jf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.yb.Ub(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.yb.Ub());var F={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],A=a.sparsity*a.sparsity,h=!1,M=a.size,R="";if(a.maxPooling){switch(a.maxPooling.size){case 2:R="s41";break;case 4:R="s42"}h=!0;
M/=a.maxPooling.size;m.nc=T.instance({isFloat:!0,isPot:!1,width:M})}var J=-1,G=null;n&&f();m.bias=T.instance(a.bias);var e={H:function(){return a.size},Ub:function(){return M},Zc:function(){return a.classesCount},ke:function(x){p.g(x)},vf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,mf:T.instance(a.remap.maskTexture),Pa:a.remap.layers.map(function(x){return a.parent.Ue(x)}),depth:a.remap.depth})},Pf:function(){switch(a.connectivityUp){case "direct":G=ib.instance(a.connectivity);break;case "square":G=
jb.instance(a.connectivity);break;case "squareFast":G=kb.instance(a.connectivity,a.activation);break;case "full":G=lb.instance(Object.assign({La:a.La},a.connectivity));break;case "conv":g=a.kernelsCount,G=mb.instance(a.connectivity),q&&(m.pc=T.instance({width:M,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},S:function(x,K){p=x;G.Ca?(m.input.I(),v&&m.bias.g(2),G.S(w),m.input.g(0),m.input.Ie(J),m.pb.I(),v?I.set("s0"):(I.set(B),I.L("u4",A),m.bias.g(1)),m.input.le(J,0),U.l(!1,!1),I.set(F),m.ra.A(),m.pb.g(0),
U.l(!1,!1)):(m.ra.I(),m.bias.g(1),G.S());if(n)return K=m.ra,h&&(m.nc.I(),K.g(0),I.set(R),I.T("u14",r,r),U.l(!1,!1),K=m.nc),q&&(m.pc.A(),I.set("s24"),I.T("u18",g,M/g),K.g(0),U.l(!1,!1),K=m.pc),K.g(0),K;var L=m.ra;if(a.normalize||t.qb)x=a.normalize,I.set(t.qb?"s9":"s8"),I.L("u10",x?r:1),m.oc.I(),L.g(0),U.l(!1,!1),L=m.oc;x=null;switch(t.type){case "cpuRGBA2Float":L.Pb(!1);K?x=e.xf(L).then(t.F):(L=e.yf(L),t.F(L));break;case "cpuMeanFloat":L.Pb(!0);if(K)x=L.Af().then(t.F);else{L=L.Bf();for(var u=0;u<L.length;++u);
t.F(L)}break;case "gpuRawAvg":case "gpuRaw":L.g(0);case "none":null!==t.F&&t.F(L)}K&&null===x&&(x=Promise.resolve());return x},Eb:function(x){a.X=x;c();f()},Wf:function(x){x&&(t.type=x.wb||"none",t.F=x.vb||null,t.isLinear=x.mc?!0:!1);f();x="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var K=0,L=0,u=0;K<x;++K)t.buffer.push(L+(a.size-1-u)*a.size),t.results.push([-1,-1,-1,-1]),++L,L===a.size&&(L=0,++u);t.qb="gpuRawAvg"===t.type||"cpuMeanFloat"===t.type;if(a.normalize||
t.qb)m.oc=T.instance({isFloat:!0,isPot:!0,width:a.size})},xf:function(x){return x.zf().then(l)},yf:function(x){x=x.rc();l(x);return t.results},m:function(){for(var x in m){var K=m[x];K&&K.remove()}G&&(G.m(),G=null)}};a.yb&&e.Pf(a.yb);return e}};
function ob(a){var c=null,f=null,l=null,m=0,p=this,n=null,t={Pa:[],wb:"none",mc:!1,vb:null,grid:null};this.v=function(){this.oe(n.Pa);l.Wf({wb:n.wb,mc:n.mc,vb:n.vb})};this.Ue=function(g){return c[g]};this.Eb=function(g){["s32","s34","s27"].forEach(function(q){I.M(q,[{type:"2f",name:"u20",value:g}])});c&&c.forEach(function(q){q.Eb(g)})};this.oe=function(g){var q=null;m=g.length;var v=null!==n.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),B=v?n.grid:[1,1];v&&this.Eb(B);c=g.map(function(w,r){w=
Object.assign({},w,{index:r,parent:p,yb:q,jf:r===m-1,La:v,X:B});return q=r=0===r?hb.instance(w):nb.instance(w)});f=c[0];l=c[m-1];c.forEach(function(w,r){0!==r&&w.vf()})};this.S=function(g){g.g(0);var q=g;c.forEach(function(v){q=v.S(q,!1)});return q};this.Se=function(){return f.Re()};this.Ye=function(){return l.H()};this.Ka=function(){return l.Xe()};this.Zc=function(){return l.Zc()};this.m=function(){c&&(c.forEach(function(g){g.m()}),l=f=c=null,m=0)};"undefined"!==typeof a&&(n=Object.assign({},t,a),
this.v())}
var ib={instance:function(a){var c=T.instance(a.weights);return{Ca:!0,kb:function(){return 1},m:function(){c.remove()},Ze:function(){return c},S:function(){I.set("s30");c.g(1);U.l(!1,!1)}}}},lb={instance:function(a){var c=a.fromLayerSize,f=T.instance(a.weights),l=a.La?"s27":"s26";return{Ca:!0,kb:function(){return c},m:function(){f.remove()},S:function(m){if(m.isEnabled){I.set("s28");m.mf.g(3);for(var p=Math.min(m.Pa.length,m.depth),n=0;n<p;++n)m.Pa[n].ke(4+n)}else I.set(l);I.L("u8",a.toLayerSize);I.L("u9",
a.fromLayerSize);f.g(1);U.l(!1,!1)}}}},jb={instance:function(a){for(var c=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,m=l*f,p=m/c,n=c/f,t=0,g=0,q=0,v=Array(l*f*l*f*4),B=Array(l*f*l*f*4),w=Array(c*c),r=0;r<w.length;++r)w[r]=0;r=Math.floor(l/2);for(var F=.5/f,A=.5/c,h=.5/m,M=0;M<f;++M)for(var R=Math.round(M*n),J=0;J<f;++J){var G=Math.round(J*n),e=M/f,x=J/f;e+=F;x+=F;for(var K=0;K<l;++K){var L=R+K-r;0>L&&(L+=c);L>=c&&(L-=c);for(var u=0;u<l;++u){var S=t/m,N=g/m,d=G+u-r;0>d&&(d+=c);d>=c&&(d-=c);var k=
L/c,C=d/c;N=1-N-1/m;k+=A;C+=A;S+=h;N+=h;var O=M*l+K,H=J*l+u;H=f*l-H-1;O=H*f*l+O;v[4*O]=S;v[4*O+1]=N;v[4*O+2]=k;v[4*O+3]=C;C=w[d*c+L]++;O=C%p;k=L*p+O;d=d*p+(C-O)/p;d=c*p-1-d;d=d*c*p+k;B[4*d]=S;B[4*d+1]=N;B[4*d+2]=e;B[4*d+3]=x;++t>=m&&(t=0,++g);++q}}}w=null;var ea=T.instance(a.weights);delete a.weights.data;var ha=T.instance({width:m,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var ma=T.instance({width:m,isFloat:!0,array:new Float32Array(v),isPot:!0});v=null;return{Ca:!0,kb:function(){return p},
m:function(){ha.remove();ma.remove();ea.remove()},S:function(){I.set("s25");ea.g(1);ma.g(2);U.l(!1,!1)}}}},mb={instance:function(a){var c=a.kernelsCount,f=a.toSparsity,l=f*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],p=T.instance(a.weights);return{Ca:!0,kb:function(){return l},Kg:function(){return f},Ze:function(){return p},m:function(){p.remove()},S:function(){I.set("s29");I.Rf("u28",m);I.L("u26",c);I.L("u27",f);I.L("u8",a.toLayerSize);I.L("u9",a.fromLayerSize);p.g(1);U.l(!1,!1)}}}},kb={instance:function(a,
c){var f=a.fromLayerSize,l=a.toLayerSize,m=a.toSparsity,p=a.stride?a.stride:1,n=m*l/f,t=l<f,g=f/l,q=T.instance(a.weights),v="s51"+[f.toString(),l.toString(),m.toString(),p.toString(),c].join("_");I.Fe(v)||(a=Ka(c),l=[{type:"1f",name:"u8",value:l},{type:"1f",name:"u32",value:p}],t&&l.push({type:"1f",name:"u9",value:f}),f=[(t?n:m).toFixed(1),a],t&&f.push(g.toFixed(1)),I.af(t?"s47":"s46",v,f),I.M(v,l.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Ca:!1,kb:function(){return n},m:function(){q.remove()},S:function(){I.set(v);q.g(3);U.l(!1,!1)}}}},$a={instance:function(a){var c=a.yd?a.yd:3,f=a.fd?a.fd:64,l=a.Ad?a.Ad:64,m=a.Y?!0:!1;a={isFloat:!1,width:f,isPot:!1,isFlipY:!1};var p=T.instance(a),n=T.instance(a),t=T.instance(a),g=T.instance(a),q=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),v=1/f;return{process:function(B){I.set("s43");g.A();U.l(m,!1);I.set("s44");for(var w=0;w<c;++w)p.A(),I.T("u14",v,0),U.l(m,!1),t.A(),g.g(0),U.l(m,
!1),n.A(),p.g(0),I.T("u14",0,v),U.l(m,!1),g.A(),t.g(0),U.l(m,!1),w!==c-1&&n.g(0);I.set("s45");q.A();B.g(0);n.g(1);g.g(2);U.l(m,!1);q.g(0)},Ka:function(){return q}}}},ab={instance:function(a){function c(v){return T.instance({isFloat:v,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=c(!1),m=[c(!1),c(!1),c(!1)],p=[c(!1),c(!1),c(!1)],n=c(!0),t=[l,p[0],p[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6));var g="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),q={u1:0};I.Wa([{id:"s53",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:a,j:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",h:g,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){I.set("s53");l.I();U.l(f.Y,!1);I.set("s54");for(var v=0;3>v;++v)I.T("u33",1,0),m[v].A(),t[v].g(0),
U.l(!1,!1),I.T("u33",0,1),p[v].A(),m[v].g(0),U.l(!1,!1);I.set("s55");n.A();l.g(0);p[0].g(1);p[1].g(2);p[2].g(3);U.l(!1,!1);n.g(0)},Ka:function(){return n}}}},bb={instance:function(a){function c(q){return T.instance({isFloat:q,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=c(!1),m=c(!1),p=c(!1),n=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6));var t="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),g={u1:0};I.Wa([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:g,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:a,j:g,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",h:t,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){I.set("s56");l.I();U.l(f.Y,!1);I.set("s57");I.T("u33",1,0);m.A();l.g(0);U.l(!1,!1);I.T("u33",0,1);p.A();m.g(0);U.l(!1,!1);I.set("s58");n.A();l.g(0);p.g(1);U.l(!1,!1);n.g(0)},Ka:function(){return n}}}},gb={instance:function(a){function c(v){return T.instance({isFloat:v,width:f.C,isPot:!1,isFlipY:!1})}var f=Object.assign({ma:.1,
ea:9,C:128,gain:1,qc:0,Ma:!1,Y:!1},a),l=c(!1),m=null,p=null,n=null;f.Ma&&(m=c(!1),p=c(!1),n=c(!0));a={u1:0};var t=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",f.qc.toFixed(4)),j:a,i:["u1"],
precision:"lowp"}];if(f.Ma){var g="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((f.ea-1)/2).toFixed(2)).replace("2.2222",(1/f.C).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
f.ma.toFixed(4)).replace("2.2222",f.gain.toFixed(4));t.push({id:"s60",name:"_",h:g,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",h:q,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}I.Wa(t);return{process:function(){I.set("s59");l.I();U.l(f.Y,!1);f.Ma?(I.set("s60"),I.T("u33",1,0),m.A(),l.g(0),U.l(!1,!1),I.T("u33",0,1),p.A(),m.g(0),U.l(!1,!1),I.set("s61"),n.A(),l.g(0),p.g(1),U.l(!1,!1),n.g(0)):l.g(0)},Qe:function(){return 2-f.qc},Ka:function(){return f.Ma?n:l}}}};
function pb(a,c){a[c]=!0;a.setAttribute(c,"true")}function qb(a,c){window.addEventListener("beforeunload",function(){c&&c.getTracks&&c.getTracks().forEach(function(f){c.removeTrack(f)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)}function rb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function sb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function tb(a){if(!a)return a;var c=null;if(a.video){var f=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof a.video.width&&(c.width=f(a.video.width));"undefined"!==typeof a.video.height&&(c.height=f(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=f(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&ub(c,a.deviceId);return c}
function ub(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function wb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function xb(a){function c(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(r,F){return Math.abs(r-w)-Math.abs(F-w)})}function f(w){var r=tb(a);w=w(r);m.push(w);l(w)}function l(w){if(w.video&&w.video.facingMode&&w.video.facingMode.exact){var r=w.video.facingMode.exact;w=tb(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=r;m.push(w)}}var m=[];if(!a||!a.video)return m;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var p=
c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),t={},g=0;for(t.ta=void 0;g<p.length;t={ta:t.ta},++g){t.ta=p[g];var q={},v=0;for(q.pa=void 0;v<n.length;q={pa:q.pa},++v)if(q.pa=n[v],t.ta!==a.video.width.ideal||q.pa!==a.video.height.ideal){var B=Math.max(t.ta,q.pa)/Math.min(t.ta,q.pa);B<4/3-.1||B>16/9+.1||f(function(w,r){return function(F){F.video.width.ideal=w.ta;F.video.height.ideal=r.pa;return F}}(t,q))}}}f(function(w){return wb(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&f(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),f(function(w){delete w.video.width;delete w.video.height;return w}));a.video.facingMode&&(f(function(w){delete w.video.facingMode;return w}),a.video.width&&a.video.height&&f(function(w){wb(w);delete w.video.facingMode;return w}));m.push({audio:a.audio,video:!0});return m}
function yb(a){a.volume=0;pb(a,"muted");if(rb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;pb(a,"muted")},5)}}
function zb(a,c,f,l){function m(n){p||(p=!0,f(n))}var p=!1;navigator.mediaDevices.getUserMedia(l).then(function(n){function t(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)m("VIDEO_NULLSIZE");else{q={re:null,Vf:null,pf:null};try{var v=n.getVideoTracks()[0];v&&(q.pf=v,q.re=v.getCapabilities(),q.Vf=v.getSettings())}catch(B){}p||(qb(a,n),c(a,n,q))}}else m("VIDEO_NOTSTARTED")},700)}function g(){a.removeEventListener("loadeddata",g,!1);var q=a.play();yb(a);"undefined"===
typeof q?t():q.then(function(){t()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);yb(a);a.addEventListener("loadeddata",g,!1)}).catch(function(n){m(n)})}
function Ab(a,c,f){var l=sb()?document.createElement("video"):!1;l?sb()?(pb(l,"autoplay"),pb(l,"playsinline"),f&&f.audio?l.volume=0:pb(l,"muted"),Bb(f).then(function(){zb(l,a,function(){function m(n){if(0===n.length)c("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var t=n.shift();zb(l,a,function(){m(n)},t)}}var p=xb(f);m(p)},f)})):c&&c("MEDIASTREAMAPI_NOT_FOUND"):c&&c("VIDEO_NOT_PROVIDED")}
function Bb(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var f={user:[],environment:["camera2 0"]}[c];return f&&0!==f.length?new Promise(function(l){Cb(function(m){m?(m=m.find(function(p){var n=p.label;return n?f.some(function(t){return n.includes(t)}):!1}))?(a.video.deviceId={exact:m.deviceId},l("SUCCESS")):
l("NO_PREFERRED_DEVICE_FOUND"):l("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Cb(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}
var Db=function(){function a(A,h,M,R,J,G,e){if(!r)if(e===G.length)J();else{switch(G[e]){case "A":M();break;case "D":A();break;case "S":h().then(function(x,K){F.Zd();a(A,h,M,K?null:R,J,G,++e)}).catch(function(x){console.log("An error occurred in the WebAR loop: ",x);J()});return;case "R":R&&R()}a(A,h,M,R,J,G,++e)}}var c={n:5,fc:1,vd:0,hb:[35,49],bb:[2,200],k:.7,cg:200,uf:.05},f=-1,l=null,m=-1,p=-1,n=0,t=-1,g=-1,q=0,v=0,B=c.bb[1],w=Math.log(2),r=!0,F={Ve:function(){switch(f){case -1:return-1;case 0:return g+
l.vd;case 1:return q}},Ke:function(A){return Math.pow(Math.min(Math.max(t,0),l.n-1)/(l.n-1),A||1)},v:function(A){l=Object.assign({},c,A);t=g=l.fc;f=0;F.reset()},Zd:function(A){A=("undefined"===typeof A?Date.now():A)||0;var h=Math.min(Math.max(A-v,l.bb[0]),l.bb[1]);B=h;v=A;var M=-1===m?0:l.k;m=Math.min(Math.max(1E3/h,5),120)*(1-M)+m*M;A-p>l.cg&&5<++n&&(h=l.k,t=t*(1-h)+(m<l.hb[0]?g-1:m>l.hb[1]?g+1:g)*h,Math.abs(t-g)>1-l.uf&&(h=Math.min(Math.max(Math.round(t),0),l.n-1),h!==g&&(t=g=h,m=(l.hb[1]-l.hb[0])/
2)),p=A)},Kd:function(A,h,M,R,J,G){r=!1;a(A,h,M,R,J,G,0)},stop:function(){r=!0},Nf:function(A){q=A;f=1},bg:function(){f=0;F.reset()},reset:function(){B=c.bb[1];p=m=-1;n=0},kh:function(A,h,M){M=Math.exp(-w*B/M);return(1-M)*A+M*h},Bg:function(){return B}};return F}(),Eb=function(){function a(){f(A+r.dc);h.port.postMessage("DONE")}function c(){G.Xa=0===r.va?R(f):R(l)}function f(u){J.za&&null!==F&&(u-=A,u=Math.min(Math.max(u,r.Oc[0]),r.Oc[1]),A+=u,p(),e.isEnabled&&e.Na&&J.aa&&A-e.$b>r.Gc&&(q(),e.$b=A),
F(A))}function l(u){J.za&&(G.timeout=setTimeout(f.bind(null,u),r.va))}function m(){F=null;J.za=!1;p()}function p(){G.Xa&&(window.cancelAnimationFrame(G.Xa),G.Xa=null);G.timeout&&(window.clearTimeout(G.timeout),G.timeout=null)}function n(u){u&&!J.aa?(J.aa=!0,M&&Db.bg(),h.port.postMessage("STOP"),Va.$d(!0),c()):!u&&J.aa&&(J.aa=!1,M&&Db.Nf(1),Va.$d(!1),h.port.postMessage("START"))}function t(u){u.target.hidden?K():x()}function g(u,S,N){S=u.createShader(S);u.shaderSource(S,N);u.compileShader(S);return S}
function q(){e.Na=!1;var u=e.ha,S=e.mb,N=e.ob,d=e.W;u.uniform1f(e.cd,Math.random());e.Aa?S.beginQueryEXT(d,N):u.beginQuery(d,N);u.drawElements(u.POINTS,1,u.UNSIGNED_SHORT,0);e.Aa?S.endQueryEXT(d):u.endQuery(d);Va.flush();B().then(function(k){0===k||isNaN(k)?(e.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",k)):(k=r.ce*r.Fc*1E3/k,e.Fb=(e.Fb+1)%r.Ea,e.bc[e.Fb]=k,++e.rd>r.Ea&&(e.tb.set(e.bc),e.tb.sort(function(C,O){return C-O}),
k=e.tb[Math.floor(r.Ea/2)],e.eb=Math.max(e.eb,k),r.Ec(k/e.eb)),e.Na=!0)}).catch(function(){e.Na=!0})}function v(u){var S=e.ha,N=e.mb,d=e.ob;d=e.Aa?N.ug(d,N.QUERY_RESULT_AVAILABLE_EXT):S.getQueryParameter(d,S.QUERY_RESULT_AVAILABLE);S=S.getParameter(N.GPU_DISJOINT_EXT);d?u(!S):setTimeout(v.bind(null,u),.1)}function B(){return new Promise(function(u,S){v(function(N){if(N){N=e.ha;var d=e.mb,k=e.ob;N=e.Aa?d.getQueryObjectEXT(k,d.QUERY_RESULT_EXT):N.getQueryParameter(k,N.QUERY_RESULT);u(N)}else S()})})}
var w={nd:!0,Oc:[1,200],dc:20,va:0,Fc:50,ce:240,Gc:3E3,Ea:3,Ec:null},r=null,F=null,A=0,h=null,M=!1,R=null,J={qa:!1,aa:!0,Zb:!1,Yb:!1,Xb:!1,za:!1},G={Xa:null,timeout:null},e={isEnabled:!1,Na:!1,ha:null,mb:null,ob:null,W:null,cd:null,Aa:!0,$b:0,rd:0,bc:null,tb:null,Fb:0,eb:0},x=n.bind(null,!0),K=n.bind(null,!1),L={v:function(u){r=Object.assign(w,u);Object.assign(J,{aa:!0,qa:!0,za:!1});R=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==r.Ec){u=document.createElement("canvas");
u.setAttribute("width","1");u.setAttribute("height","1");var S={antialias:!1};u=u.getContext("webgl2",S)||u.getContext("webgl",S);if(S=u.getExtension("EXT_disjoint_timer_query")||u.getExtension("EXT_disjoint_timer_query_webgl2")){e.ha=u;e.mb=S;e.isEnabled=!0;e.Aa=S.beginQueryEXT?!0:!1;var N=g(u,u.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),d=g(u,u.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
r.Fc.toString())),k=u.createProgram();u.attachShader(k,N);u.attachShader(k,d);u.linkProgram(k);N=u.getAttribLocation(k,"a0");e.cd=u.getUniformLocation(k,"u39");u.useProgram(k);u.enableVertexAttribArray(N);k=u.createBuffer();u.bindBuffer(u.ARRAY_BUFFER,k);u.bufferData(u.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),u.STATIC_DRAW);u.vertexAttribPointer(N,4,u.FLOAT,!1,16,0);k=u.createBuffer();u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,k);u.bufferData(u.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),u.STATIC_DRAW);
u.disable(u.DEPTH_TEST);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.viewport(0,0,1,1);k=e.Aa?S.createQueryEXT():u.createQuery();e.ob=k;e.W=S.TIME_ELAPSED_EXT||u.TIME_ELAPSED;e.$b=-r.Gc;e.bc=new Float32Array(r.Ea);e.tb=new Float32Array(r.Ea);e.eb=0;e.Fb=0;e.rd=0;e.Na=!0}}if(r.nd){u=!1;try{if("undefined"===typeof SharedWorker){var C=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
r.dc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),O=new Worker(C);O.addEventListener("message",a);h={Cd:O,port:O};J.Zb=!0}else{var H=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
r.dc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(H);ea.port.start();ea.port.addEventListener("message",a);h={Cd:ea,port:ea.port};J.Yb=!0}u=!0}catch(ha){}u&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",t):(window.addEventListener("blur",K),window.addEventListener("focus",x)),window.addEventListener("pagehide",
K),window.addEventListener("pageshow",x),J.Xb=!0)}M="undefined"!==typeof Db},m:function(){m();J.Xb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",t):(window.removeEventListener("blur",K),window.removeEventListener("focus",x)),window.removeEventListener("pagehide",K),window.removeEventListener("pageshow",x),J.Xb=!1);J.Yb?(h.port.close(),J.Yb=!1):J.Zb&&(h.Cd.terminate(),J.Zb=!1);Object.assign(J,{aa:!0,qa:!1,za:!1});F=null},Xg:function(){return J.aa},update:function(u){Object.assign(r,
u)},Kd:function(u){J.qa||L.v({});p();J.za=!0;F=u;J.aa&&c()},stop:m};return L}(),Fb=function(){function a(B,w){var r=B[0]-.5;B=B[1]-.5;var F=w[0]-.5;w=w[1]-.5;return r*r+B*B-(F*F+w*w)}var c={zd:4,xb:[1.5,1.5,2],ca:[.1,.1,.1],Md:1,C:-1,ja:-1,Yf:2,tf:1,tc:!0,Ce:.8},f=null,l=[],m=[],p=[],n=[0],t=[.5,.5,1],g=null,q=0,v=[0,0,0];return{v:function(B){f=Object.assign({},c,B);l.splice(0);m.splice(0);p.splice(0);q=0;B=f.xb[0]*f.ca[0];var w=f.xb[1]*f.ca[1],r=1/(1+f.xb[2]*f.ca[2]),F=f.Md*Math.min(f.C,f.ja),A=
F/f.C;F/=f.ja;var h=.5*f.Ce;h*=h;for(var M=0;M<f.zd;++M){var R=[];m.push(R);var J=Math.pow(r,M),G=A*J,e=F*J;J=G*f.tf;p.push(J);var x=G*B,K=e*w;G/=2;e/=2;for(var L=1+(1-G-G)/x,u=1+(1-e-e)/K,S=0;S<u;++S)for(var N=e+S*K,d=N-.5,k=0;k<L;++k){var C=G+k*x,O=C-.5;O*O+d*d>h||(C=[C,N,J],l.push(C),R.push(C))}f.tc&&R.sort(a);g=l}f.tc&&l.sort(a)},get:function(B){var w=g.length;if(0===w)return t;for(;B>=n.length;)n.push(0);n[B]>=w&&(n[B]=0);var r=g[Math.floor(n[B])%w];n[B]=(n[B]+1/f.Yf)%w;if(0===q)return r;v[0]=
r[0];v[1]=r[1];v[2]=q;return v},Zg:function(B){B>=n.length||(n[B]=Math.floor(Math.random()*g.length))},bh:function(B){q=B;if(0===q)g=l;else{for(var w=p.length,r=w-1,F=0;F<w;++F)if(p[F]<=B){r=F;break}g=m[r]}},reset:function(){for(var B=l.length/n.length,w=0;w<n.length;++w)n[w]=Math.floor(w*B);q=0;g=l}}}(),Hb={Rb:function(){return Date.now()},xg:function(){return performance.now()}},Ib=function(){var a={ef:!0,isLinear:!0,ec:[4,11]};return{tg:function(c,f,l){return f.isDetected?Math.floor(f.s*c):(c=
Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(l,Math.pow(2,c)))},instance:function(c){var f=Object.assign({},a,c),l=[],m=null,p=-1,n=null,t=!1;for(c=f.ec[0];c<=f.ec[1];++c)l[c]=null;return{I:function(g,q){q!==p&&(m&&m.remove(),m=T.instance({isLinear:f.isLinear,isPot:!0,width:q}));if(t=f.ef&&q<.5*g){g=Math.floor(Math.log2(g));var v=f.ec;g=Math.min(Math.max(g,v[0]),v[1]);v=g;if(!l[v]){var B=T.instance({isPot:!0,isMipmap:!0,od:!0,width:Math.pow(2,v)});l[v]={ba:B,wd:-1}}g=l[g];n=g.ba;
g.wd!==q&&(v=Math.log2(q),n.g(0),n.Sd(v),T.P(0),g.wd=q)}else n=m;p=q;n.I()},g:function(g){n.g(g);t&&n.ib()},wa:function(g){n.wa(g)},remove:function(){m&&m.remove();l.forEach(function(g){g&&g.ba.remove()})}}}}}(),Jb=function(){var a=0,c=null,f=null,l=null,m=null;return{v:function(p,n){a=p.length;c=n;f=p;l=new Float32Array(a);m=new Float32Array(a)},We:function(){return m},Xf:function(p,n,t){p.forEach(function(g,q){var v=Math.min(1,f[q]*t*(n+.33*(1-n)));g=v*g+(1-v)*l[q];l[q]=g;g=c[q](g);g=Math.min(Math.max(g,
0),1);m[q]=g})}}}(),W={VERSION:"1.4.0",ua:[],Jb:!1,Kb:!1,Ib:!1,Va:!0,Ua:!1,ready:!1,initialized:!1},Kb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",Hc:"../../",va:0,width:512,height:512,Zf:40,Nd:[.6,5.8],ca:[.07,.07,.15],Kf:.7,If:2,Jf:[2,2,2],gb:!0,He:[.03,.005],threshold:.8,Xd:.7,Yd:.03,Be:.06,Ge:.02,
fe:[1,.05],fg:10,bf:!1,Hb:[2,7],O:{dd:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},ic:11,xd:1,qf:1,ge:[.1,.01],Gf:[.4,-.7,-.4],Hf:[.3,0,0],Ae:!1,he:.001,Kc:[Math.PI/10,Math.PI/6],Ed:[.1,.4],Fd:[.009,.02],Gd:[.1,.2],hc:5,ed:.1,ee:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],rf:[Ja.bind(null,.1,.7),Ja.bind(null,.1,.7),Ja.bind(null,.05,.4),Ja.bind(null,.05,.4),Ja.bind(null,.05,.6),Ja.bind(null,.05,.6),Ja.bind(null,.1,.5),Ja.bind(null,.3,.7),Ja.bind(null,.7,.8),Ja.bind(null,.7,.8),Ja.bind(null,.15,.6)]};
W.get_nMorphs=function(){return b.ic};var Lb=null,Mb=null,Nb=null,Ob=[],Pb=b.threshold;
function Qb(){function a(){1===++ea&&(Jb.v(b.ee,b.rf),c(),W.ready=!0,W.ua.forEach(function(z){z()}),W.ua.splice(0,W.ua.length),f(),ea=0)}function c(){J=new Float32Array(b.ic);G=new Float32Array(b.ic);e=new Uint8Array(h*h*4);W.get_morphTargetInfluences=function(){return J};W.get_morphTargetInfluencesStabilized=function(){return Jb.We()};W.set_morphUpdateCallback=function(z){x=z};W.get_rotation=function(){return u};W.get_positionScale=function(){var z=M.Vd.Te();z.Pb(!1);z=z.rc();d[0]=1-z[1][0];d[1]=
z[2][0];d[2]=z[3][0]*C.G[0];return d};W.get_rotationStabilized=function(){return N};W.switch_sleep=function(z){ma!==ha.wc||z?ma=z?ha.wc:ha.play:f()};W.on_detect=function(z){z(y.$);y.lc.push(z)};W.is_detected=function(){return y.$};W.set_animateDelay=function(z){F=z;Eb.update({va:F})}}function f(){ma!==ha.play&&(ma=ha.play,Eb.stop(),l())}function l(){var z,P;return Aa(new ua(new oa(function(aa){switch(aa.la){case 1:a:{if("VIDEO"===H.element.nodeName){var Q=H.element.currentTime-ya;0>Q&&(ya=H.element.currentTime);
if(1E3*Q<b.fg)break a;ya+=Q}H.ba.refresh();Q=xa.ad();Q[0]===H.G[0]&&Q[1]===H.G[1]||q()}z=Db.Ve();P=0;case 2:if(!(P<z)){aa.la=4;break}Q=M;var na=A;I.set("s63");Xa.Z();Q.gd.I(.5*Math.min(H.G[0],H.G[1]),r);H.ba.g(0);Q.Bb.g(1);b.gb&&I.L("u40",k);U.l(!1,!1);na.S(Q.gd);b.bf?Q=T.Ef(K,e).then(m):(T.Df(K,e),m(),Q=Promise.resolve());aa.la=3;return{value:Q};case 3:++P;aa.la=2;break;case 4:Kb.disableRendering||(Q=M,Xa.Z(),R.I(),I.set("s66"),b.gb&&I.L("u40",k),Q.Bb.g(0),U.l(!1,!1)),Q=Db.Ke(),O=3*(1-Q)+1*Q,Db.Zd(),
W.Va&&(Xa.ag(),I.set("s62"),H.ba.g(0),U.l(!1,!1),D.enable(D.BLEND),D.blendFunc(D.SRC_ALPHA,D.ONE),R.g(0),U.l(!1,!1),D.disable(D.BLEND)),D.flush(),ma!==ha.wc&&Eb.Kd(l),aa.la=0}})))}function m(){t();if(!b.Ae&&y.$){for(var z=0,P=0;3>P;++P)z=n(P+b.O.rotation[0],b.O.rotation[1]),z=(2*z-1)*b.Gf[P],z+=b.Hf[P],L[P]=z;b.gb&&(P=Da(b.He,ba.U),k=k*(1-P)+(-z+k)*P)}p();z=Hb.Rb();P=Math.max(1,z-ba.td);var aa=n(b.O.quality[0],b.O.quality[1]);ba.Dd=Ja(b.Ed[0],b.Ed[1],aa);aa=n(b.O.position[0],b.O.position[1]);var Q=
n(b.O.position[0]+1,b.O.position[1]),na=n(b.O.position[0]+2,b.O.position[1]);ba.Ld=1-Ja(b.Gd[0],b.Gd[1],Math.sqrt(aa*aa+Q*Q+na*na)/P);aa=ba.Ba[0]-L[0];Q=ba.Ba[1]-L[1];na=ba.Ba[2]-L[2];P=Math.sqrt(aa*aa+Q*Q+na*na)/P;ba.Ba[0]=L[0];ba.Ba[1]=L[1];ba.Ba[2]=L[2];ba.Hd=1-Ja(b.Fd[0],b.Fd[1],P);ba.U=ba.Dd*ba.Ld*ba.Hd;ba.td=z;ba.sd[ba.ac]=ba.U;ba.ac=(ba.ac+1)%b.hc;for(z=0;z<b.hc;++z)ba.U=Math.min(ba.sd[z],ba.U);Jb.Xf(J,ba.U,O,G);x&&x(ba.U,O);if(y.$){z=O*Da(b.ge,ba.U);for(P=0;3>P;++P)u[P]=z*L[P]+(1-z)*u[P],
N[P]=u[P];N[2]-=k}else z=Hb.Rb()*b.he,S[0]=b.Kc[0]*Math.sin(z),S[1]=b.Kc[1]*Math.cos(z),N[0]=S[0],N[1]=S[1],N[2]=S[2]}function p(){var z=n(b.O.dd[0],b.O.dd[1]);y.rb=b.ed*z+(1-b.ed)*y.rb;y.rb>b.Xd+b.Yd&&!y.$?(y.lc.forEach(function(P){P(!0)}),y.$=!0):y.rb<b.Xd-b.Yd&&y.$&&(y.lc.forEach(function(P){P(!1)}),y.$=!1,k=0)}function n(z,P){z+=h*P;return(e[4*z]+e[4*z+1]+e[4*z+2]+e[4*z+3])/1020}function t(){J.forEach(function(z,P){if(y.$){var aa=(b.xd+P)%h,Q=b.qf+Math.floor((b.xd+P)/h);Q=h-1-Q;aa+=h*Q;Q=e.slice(4*
aa,4*aa+4);aa=(Q[0]+Q[1]+Q[2]+Q[3])/1020;Q=b.Ge*Math.sqrt((Q[0]*Q[0]+Q[1]*Q[1]+Q[2]*Q[2]+Q[3]*Q[3])/1020-aa*aa);J[P]=z>aa-Q&&z<aa+Q?z:aa}else J[P]=0})}function g(z){A=new ob({Pa:z.layers,wb:"gpuRaw",vb:function(P){var aa=M;aa.Bb.Qd(1);D.viewport(0,0,1,1);I.set("s64");b.gb&&I.L("u40",k);I.L("u41",ba.U);I.Sf("u42",Fb.get(0));U.l(!1,!1);aa.Vd.Qd(1);I.set("s65");I.L("u41",ba.U);aa.Bb.g(0);U.l(!1,!1);K=P}});z=A.Se();z!==r&&(r=z,v(),B());h=A.Ye();a()}function q(){var z=xa.ad();H.G[0]=z[0];H.G[1]=z[1];Ya.jb().width=
z[0];Ya.jb().height=z[1];b.width=z[0];b.height=z[1];z=H.eg;var P=H.G[1]/H.G[0],aa=Ya.V()/Ya.H();P>aa?1>=P?z[0]*=P:z[1]/=P:(z[0]*=P,P=1/aa,z[0]*=P,z[1]*=P);z[1]*=aa;I.M("s66",[{name:"u43",type:"1f",value:aa}]);H.D[0]=0;H.D[1]=0;H.D[2]=0;H.D[3]=0;switch(Kb.rotate){case 0:H.D[0]=z[0];H.D[3]=z[1];break;case 180:H.D[0]=-z[0];H.D[3]=-z[1];break;case 90:H.D[1]=z[0];H.D[2]=-z[1];break;case -90:H.D[1]=-z[0],H.D[2]=z[1]}z=[{type:"mat2",name:"u44",value:H.D}];I.M("s63",z);I.M("s62",z);I.M("s66",[{type:"mat2",
name:"u44",value:90===Math.abs(Kb.rotate)?[0,-H.D[1],-H.D[2],0]:H.D}])}function v(){C.C=b.width;C.ja=b.height;Fb.v({xb:b.Jf,zd:b.If,C:C.C,ja:C.ja,Md:b.Kf,ca:b.ca,tc:!0});C.G=[1,C.C/C.ja]}function B(){I.M("s62",[{type:"1i",name:"u1",value:0}]);I.M("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u40",value:0},{type:"2f",name:"u46",value:C.G}]);I.M("s66",[{type:"1i",name:"u45",value:0},{type:"2f",name:"u46",value:C.G},{type:"1f",name:"u40",value:0},{type:"3f",name:"u47",
value:[0,.5,1]}]);I.M("s64",[{type:"1i",name:"u48",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u49",value:b.Nd[0]},{type:"1f",name:"u50",value:b.Nd[1]},{type:"1f",name:"u51",value:b.Zf},{type:"1f",name:"u52",value:Pb},{type:"1f",name:"u53",value:b.Be},{type:"1f",name:"u40",value:0},{type:"3f",name:"u54",value:[b.ca[0]*C.G[0],b.ca[1]*C.G[1],b.ca[2]]}]);I.M("s65",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u12",value:1},{type:"2f",name:"u55",value:b.fe}])}function w(z){var P=new Float32Array([0,
.5,.5,0]);z.gd=Ib.instance({});P={width:1,height:1,isFloat:!0,isPot:!1,array:P};z.Bb=Za.instance(P);z.Vd=Za.instance(P)}var r=64,F=b.va,A=null,h=0,M={},R=null,J=null,G=null,e=null,x=null,K=null,L=[0,0,0],u=[0,0,0],S=[0,0,0],N=[0,0,0],d=[0,0,0],k=0,C={G:null,C:-1,ja:-1},O=1,H={eg:[.5,.5],D:[.5,0,0,.5],element:null,ba:null,G:[-1,-1]},ea=0,ha={we:-4,sf:-3,Yg:-2,wc:-1,play:0},ma=ha.sf,y={rb:0,$:!1,lc:[]},ba={U:1,Ld:1,Dd:1,Hd:1,Ba:[0,0,0],td:Hb.Rb(),sd:new Float32Array(b.hc),ac:0},ya=0,xa={v:function(){H.ba=
T.instance({J:H.element,isPot:!1,isFloat:!1,isFlipY:!0});R=T.instance({isPot:!1,isFloat:!1,width:C.C,height:C.ja});w(M);Eb.v({nd:!1,va:F});Db.v({fc:0,n:b.Hb[1]-b.Hb[0]+1,vd:b.Hb[0]});Nb?g(Nb):Ea(function(z){z=JSON.parse(z);g(z)})},m:function(){Eb.stop();A&&(A.m(),A=null);ma=ha.we},se:function(z){W.Jb&&W.Jb();var P={video:{facingMode:{ideal:Kb.facingMode},width:{min:Kb.minWidth,max:Kb.maxWidth,ideal:Kb.idealWidth},height:{min:Kb.minHeight,max:Kb.maxHeight,ideal:Kb.idealHeight}},audio:Kb.isAudio};ub(P,
Kb.deviceId);Ab(function(aa,Q){Lb=Q;W.Kb&&W.Kb();z(aa)},function(){window.Gb&&window.Gb("WEBCAM_UNAVAILABLE")},P)},ud:function(z,P){I.Wa([{id:"s62",name:"_",Da:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",Ya:["a0"],Ha:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u44"],precision:"lowp"},{id:"s63",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
Da:"attribute vec2 a0;uniform sampler2D u45;uniform mat2 u44;uniform vec2 u46;uniform float u40;const vec2 e=vec2(.25,.5),f=vec2(.5);varying vec2 vv0;void main(){vec4 a=texture2D(u45,e);vec2 d=a.gb,h=a.a*u46;float b=cos(u40),c=sin(u40);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u44*k,gl_Position=vec4(a0,0.,1.);}",Ya:["a0"],Ha:[2],i:["u1","u45","u46","u44","u40"],precision:"lowp"},{id:"s64",name:"_",Da:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u48,u45;uniform vec3 u42,u54;uniform float u49,u50,u51,u52,u41,u53,u40;varying vec2 vv0;const vec4 e=vec4(.25);void main(){vec4 h=texture2D(u48,vec2(.4375,.9375)),i=texture2D(u48,vec2(.5625,.9375));float j=dot(h-i,e);bool k=j>u52;vec4 a=texture2D(u45,vec2(.5,.5));k?a.r=2.:a.r>u51?a.r=0.:a.r>1.9&&(a.a>u50||a.a<u49)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u42,a.r=1.;else{float l=dot(e,texture2D(u48,vec2(.0625,.9375))),m=dot(e,texture2D(u48,vec2(.1875,.9375))),d=dot(e,texture2D(u48,vec2(.3125,.9375))),f=cos(u40),g=sin(u40);vec2 c=mat2(f,g,-g,f)*vec2(l,m);float b;a.r>1.9?(b=1.-u41,b*=1.-step(abs(c.x),u53)*step(abs(c.y),u53)*step(abs(d),u53)):(b=1.,a.r=0.),a.gba+=vec3(c,d)*u54*a.a*b;}gl_FragColor=a;}",
i:"u48 u45 u42 u49 u50 u51 u52 u54 u41 u53 u40".split(" ")},{id:"s66",name:"_",Da:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",h:"uniform sampler2D u45;uniform vec3 u47;uniform vec2 u46;uniform float u40,u43;varying vec2 vv0;const vec2 l=vec2(1),e=vec2(.5),m=vec2(.25,.5);void main(){float f=cos(u40),g=-sin(u40);mat2 h=mat2(f,g/u43,-g*u43,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u45,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u46,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u47*max(a.x,a.y),1.);}",
i:"u45 u46 u47 u44 u40 u43".split(" "),precision:"lowp"},{id:"s65",name:"_",h:"uniform sampler2D u1,u12;uniform vec2 u55;uniform float u41;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);float c=mix(u55.x,u55.y,u41);gl_FragColor=mix(b,a,c*f);}",i:["u1","u12","u55","u41"]}]);H.element=z;Mb=H.element;q();v();B();xa.v();P&&P()},ad:function(){var z=[-1,-1],P=H.element;"VIDEO"===P.nodeName?(z[0]=P.videoWidth,z[1]=P.videoHeight):(z[0]=P.width,z[1]=P.height);
90===Math.abs(Kb.rotate)&&z.reverse();return z}};Ob.push(xa);return xa}W.onLoad=function(a){W.ready?a():W.ua.push(a)};W.switch_displayVideo=function(a){W.Va=a;W.Ua&&(W.Ua.style.display=W.Va?"block":"none")};W.onWebcamAsk=function(a){W.Jb=a};W.onContextLost=function(a){W.Ib=a};W.onWebcamGet=function(a){W.Kb=a};
W.destroy=function(){Eb.m();Mb&&Mb.srcObject&&Mb.srcObject.getTracks().forEach(function(a){a.stop()});Ob.forEach(function(a){a.m()});Ob.splice(0);Ya.m();W.switch_displayVideo(!1);W.initialized=!1;W.ua.splice(0)};W.set_size=function(a,c){b.width=a;b.height=c};W.get_size=function(){return{width:b.width,height:b.height}};W.get_videoStream=function(){return Lb};W.get_video=function(){return Mb};W.get_cv=function(){return Ya.jb()};W.set_color=function(a){I.M("s66",[{type:"3f",name:"u47",value:a}])};
W.init=function(a){var c=Qb(),f=a.callbackReady||function(p){console.log("ERR:",p)},l=a.callbackReady?a.callbackReady.bind(null,!1):null;if(a.canvasId||a.canvas){var m=a.canvas?a.canvas:document.getElementById(a.canvasId);if(m)if(W.initialized)f("ALREADY_INITIALIZED");else{W.initialized=!0;window.Gb=f?function(p){f(p);window.Gb=!1}:!1;a.NNCPath&&(b.Hc=a.NNCPath);"undefined"!==typeof a.NNC&&(Nb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&W.ua.push(l);Pb=a.threshold||Pb;if(!Ya.v({$a:m,width:b.width,
height:b.height,debug:!1,kd:!1,kc:function(){W.Ib&&W.Ib()},premultipliedAlpha:!1}))return f("GL_INCOMPATIBLE"),!1;W.Ua=Ya.jb();W.Va||(W.Ua.style.display="none");a.videoSettings&&a.videoSettings.videoElement?c.ud(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Kb,a.videoSettings),c.se(function(p){c.ud(p,!1)}));return!0}else f("INVALID_CANVAS")}else f("NO_CANVASID")};const JEELIZFACEEXPRESSIONS=W;
if(typeof(module)!=='undefined'){module.exports=JEELIZFACEEXPRESSIONS;}
