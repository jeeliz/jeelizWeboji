 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function ca(){this.Ma=!1;this.la=null;this.Xd=void 0;this.ja=1;this.Wc=this.oe=0;this.Ea=null}function fa(a){if(a.Ma)throw new TypeError("Generator is already running");a.Ma=!0}ca.prototype.Oa=function(a){this.Xd=a};ca.prototype.Ra=function(a){this.Ea={ze:a,$e:!0};this.ja=this.oe||this.Wc};ca.prototype.return=function(a){this.Ea={return:a};this.ja=this.Wc};function oa(a){this.o=new ca;this.qf=a}
oa.prototype.Oa=function(a){fa(this.o);if(this.o.la)return pa(this,this.o.la.next,a,this.o.Oa);this.o.Oa(a);return ra(this)};function ta(a,d){fa(a.o);var f=a.o.la;if(f)return pa(a,"return"in f?f["return"]:function(l){return{value:l,done:!0}},d,a.o.return);a.o.return(d);return ra(a)}oa.prototype.Ra=function(a){fa(this.o);if(this.o.la)return pa(this,this.o.la["throw"],a,this.o.Oa);this.o.Ra(a);return ra(this)};
function pa(a,d,f,l){try{var m=d.call(a.o.la,f);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return a.o.Ma=!1,m;var n=m.value}catch(p){return a.o.la=null,a.o.Ra(p),ra(a)}a.o.la=null;l.call(a.o,n);return ra(a)}
function ra(a){for(;a.o.ja;)try{var d=a.qf(a.o);if(d)return a.o.Ma=!1,{value:d.value,done:!1}}catch(f){a.o.Xd=void 0,a.o.Ra(f)}a.o.Ma=!1;if(a.o.Ea){d=a.o.Ea;a.o.Ea=null;if(d.$e)throw d.ze;return{value:d.return,done:!0}}return{value:void 0,done:!0}}function va(a){this.next=function(d){return a.Oa(d)};this.throw=function(d){return a.Ra(d)};this.return=function(d){return ta(a,d)};this[Symbol.iterator]=function(){return this}}
function Ba(a){function d(l){return a.next(l)}function f(l){return a.throw(l)}return new Promise(function(l,m){function n(p){p.done?l(p.value):Promise.resolve(p.value).then(d,f).then(n,m)}n(a.next())})}function Da(a,d){return a[0]*(1-d)+a[1]*d}function Ea(a){var d=new XMLHttpRequest;d.open("GET",b.Gc+b.neuralNetworkPath,!0);d.withCredentials=!1;d.onreadystatechange=function(){4!==d.readyState||200!==d.status&&0!==d.status||a(d.responseText)};d.send()}
function Ia(a,d){if(0===d||"object"!==typeof a)return a;a=Object.assign({},a);d=void 0===d||-1===d?-1:d-1;for(var f in a)a[f]=Ia(a[f],d);return a}function Ja(a,d,f){return Math.min(Math.max((f-a)/(d-a),0),1)}
function Ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}function Oa(a,d){var f=d%8;return a[(d-f)/8]>>7-f&1}
function Pa(a,d,f){var l=1,m=0;for(f=d+f-1;f>=d;--f)m+=l*Oa(a,f),l*=2;return m}function Qa(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var d=a.length,f=new Uint8Array(d),l=0;l<d;++l)f[l]=a.charCodeAt(l);return f}function Ra(a){return"string"===typeof a?JSON.parse(a):a}
function Sa(a){if("undefined"===typeof Ra(a).nb){var d=Ra(a);a=d.ne;var f=d.nf,l=d.n;d=Qa(d);for(var m=new Float32Array(l),n=new Float32Array(f),p=a+f+1,r=0;r<l;++r){var k=p*r,q=0===Oa(d,k)?1:-1,w=Pa(d,k+1,a);k=k+1+a;for(var C=n.length,v=0,A=k;A<k+C;++A)n[v]=Oa(d,A),++v;for(C=k=0;C<f;++C)k+=n[C]*Math.pow(2,-C-1);m[r]=0===k&&0===w?0:q*(1+k)*Math.pow(2,1+w-Math.pow(2,a-1))}a=m}else if(l=Ra(a),a=l.nb,0===a)a=new Uint8Array(l.nb);else{f=l.n;l=Qa(l);d=new Uint32Array(f);for(m=0;m<f;++m)d[m]=Pa(l,m*a,a);
a=d}return a}
var K=function(){function a(c,h,E){h=c.createShader(h);c.shaderSource(h,E);c.compileShader(h);return c.getShaderParameter(h,c.COMPILE_STATUS)?h:null}function d(c,h,E){h=a(c,c.VERTEX_SHADER,h);E=a(c,c.FRAGMENT_SHADER,E);c===F&&r.push(h,E);var P=c.createProgram();c.attachShader(P,h);c.attachShader(P,E);c.linkProgram(P);return P}function f(c){return["float","sampler2D","int"].map(function(h){return"precision "+c+" "+h+";\n"}).join("")}function l(c,h){h.s=h.s?!0:!1;if(!h.s){h.Ba=h.Ba||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";h.Wa=
h.Wa||["a0"];h.Fa=h.Fa||[2];h.precision=h.precision||v;h.id=w++;void 0!==h.Kd&&(h.Kd.forEach(function(M,ea){h.g=h.g.replace(M,h.yb[ea])}),h.Kd.splice(0));h.Cc=0;h.Fa.forEach(function(M){h.Cc+=4*M});var E=f(h.precision);h.ra=d(c,E+h.Ba,E+h.g);h.A={};h.i.forEach(function(M){h.A[M]=c.getUniformLocation(h.ra,M)});h.attributes={};h.Ga=[];h.Wa.forEach(function(M){var ea=c.getAttribLocation(h.ra,M);h.attributes[M]=ea;h.Ga.push(ea)});if(h.j){c.useProgram(h.ra);q=h;k=h.id;for(var P in h.j)c.uniform1i(h.A[P],
h.j[P])}h.pa=!0}}function m(c){Ta.Kf(O);k!==c.id&&(O.O(),k=c.id,q=c,F.useProgram(c.ra),c.Ga.forEach(function(h){0!==h&&F.enableVertexAttribArray(h)}))}function n(c,h,E){l(c,h,E);c.useProgram(h.ra);c.enableVertexAttribArray(h.attributes.a0);k=-1;return q=h}function p(){return{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var r=[],k=-1,q=null,w=0,C=!1,v="highp",A=["u1"],u=["u0"],B={u1:0},e={u0:0},H={u1:0,u2:1},I={u1:0,u3:1},g=["u1","u3","u4"],
J={u5:0},t=["u6","u7","u8","u9"],D={u6:0,u7:1},L={s0:p(),s1:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:A,j:B,precision:"lowp"},s2:{g:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:H},s3:{g:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:B,s:!0},s4:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:A,j:B},s5:{g:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:H},s6:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:A,j:B},s7:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:A,j:B},s8:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:e},s9:{g:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:e},s10:{g:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:A,j:B},s11:{g:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:B},s13:{g:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:A,j:B,s:!0},s14:{g:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:A,j:B,s:!0},s15:{g:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:B},s16:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:u,j:e,s:!0},s17:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:u,j:e,s:!0},s18:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:u,j:e,s:!0},s19:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:u,j:e,s:!0},s20:{g:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:u,j:e},s21:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:u,j:e},s22:{g:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:u,j:e,s:!0},s23:{g:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},s:!0},s24:{g:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:B},s25:{g:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},D),s:!0},s26:{g:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:t,j:D},s27:{g:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(t),j:D,s:!0},s28:{g:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(t),j:Object.assign({u25:3,u22:4,u23:5,u24:6},D),s:!0},s29:{g:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h;b=floor(u28*b+.5*(u9-1.)*(f-u28));vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u7,j),o=texture2D(u6,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u27*u27+q)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(t),j:Object.assign({u3:2},D)},s30:{g:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:D,s:!0},s31:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:g,j:I},s32:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(g),j:I,s:!0},s33:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:g,j:I,s:!0},s34:{g:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(g),j:I,s:!0},s35:{g:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:g,j:I,s:!0},s36:{g:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:A,j:B,precision:"lowp"},s37:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:B,precision:"lowp"},s38:{g:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:B,precision:"lowp"},s39:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:H,s:!0},s40:{g:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:H,s:!0},s41:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:J},s42:{g:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:J,s:!0},s43:{g:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:B,precision:"lowp",s:!0},s44:{g:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:B,precision:"lowp",s:!0},s45:{g:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},s:!0}},N={s46:{g:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],yb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{g:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),yb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},x=null,S=null,O={rb:function(){return C},u:function(){if(!C){x=Ia(L,2);S=Ia(N,2);v="highp";F.getShaderPrecisionFormat&&(F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.MEDIUM_FLOAT),F.getShaderPrecisionFormat(F.FRAGMENT_SHADER,F.LOW_FLOAT));for(var c in x)l(F,x[c],c);K.set("s0");F.enableVertexAttribArray(0);C=!0}},Ua:function(c){c.forEach(function(h){O.Ic(h)})},Ic:function(c){x[c.id]=c;l(F,c,c.id)},We:function(c,h,
E){h||(h=c);x[h]=Object.create(S[c]);x[h].bf=!0;S[c].yb&&S[c].yb.forEach(function(P,M){x[h].g=x[h].g.replace(new RegExp(P,"g"),E[M])});l(F,x[h],h)},set:function(c){var h=x[c];h.s&&(h.s=!1,l(F,h,c));m(h)},Pa:function(c){return n(c,p(),"s48")},tc:function(c){return n(c,{g:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:v},"s49")},Ae:function(c){return"undefined"===typeof x[c]?!1:x[c].pa},O:function(){-1!==k&&(k=-1,q.Ga.forEach(function(c){0!==c&&F.disableVertexAttribArray(c)}))},uc:function(){var c=
0;q.Ga.forEach(function(h,E){E=q.Fa[E];F.vertexAttribPointer(h,E,F.FLOAT,!1,q.Cc,c);c+=4*E})},ye:function(){F.enableVertexAttribArray(0)},Qa:function(){O.zb(F)},zb:function(c){c.vertexAttribPointer(q.Ga[0],2,c.FLOAT,!1,8,0)},Yg:function(c,h){F.uniform1i(q.A[c],h)},I:function(c,h){F.uniform1f(q.A[c],h)},R:function(c,h,E){F.uniform2f(q.A[c],h,E)},Lf:function(c,h){F.uniform2fv(q.A[c],h)},Mf:function(c,h){F.uniform3fv(q.A[c],h)},Zg:function(c,h,E,P){F.uniform3f(q.A[c],h,E,P)},Nf:function(c,h,E,P,M){F.uniform4f(q.A[c],
h,E,P,M)},Od:function(c,h){F.uniform4fv(q.A[c],h)},$g:function(c,h){F.uniformMatrix2fv(q.A[c],!1,h)},ah:function(c,h){F.uniformMatrix3fv(q.A[c],!1,h)},bh:function(c,h){F.uniformMatrix4fv(q.A[c],!1,h)},J:function(c,h){O.set(c);h.forEach(function(E){switch(E.type){case "4f":F.uniform4fv(q.A[E.name],E.value);break;case "3f":F.uniform3fv(q.A[E.name],E.value);break;case "2f":F.uniform2fv(q.A[E.name],E.value);break;case "1f":F.uniform1f(q.A[E.name],E.value);break;case "1i":F.uniform1i(q.A[E.name],E.value);
break;case "mat2":F.uniformMatrix2fv(q.A[E.name],!1,E.value);break;case "mat3":F.uniformMatrix3fv(q.A[E.name],!1,E.value);break;case "mat4":F.uniformMatrix4fv(q.A[E.name],!1,E.value)}})},yg:function(){return"lowp"},m:function(){O.O();F.disableVertexAttribArray(0);for(var c in x){var h=x[c];h.pa&&(h.pa=!1,F.deleteProgram(h.ra));h.bf&&delete x[c]}r.forEach(function(E){F.deleteShader(E)});r.splice(0);w=0;C=!1;q=null;k=-1}};return O}(),F=null,Ya=function(){function a(u){console.log("ERROR in ContextFF: ",
u);return!1}function d(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function f(u,B,e){u.setAttribute("width",B);u.setAttribute("height",e)}function l(u){function B(){Va.m();Wa.reset();H.getExtension("WEBGL_lose_context").loseContext()}if(d())return!1;var e=document.createElement("canvas");f(e,5,5);var H=null;try{H=e.getContext("webgl2",u)}catch(I){return!1}if(!H)return!1;m(H);Wa.Oc(H);u=Wa.Nb(H);if(!u.ea&&!u.ga)return B(),!1;u=Va.Kc(H,u);B();return u?!0:!1}function m(u){u.clearColor(0,
0,0,0);u.disable(u.DEPTH_TEST);u.disable(u.BLEND);u.disable(u.DITHER);u.disable(u.STENCIL_TEST);u.disable(u.CULL_FACE);u.GENERATE_MIPMAP_HINT&&u.FASTEST&&u.hint(u.GENERATE_MIPMAP_HINT,u.FASTEST);u.disable(u.SAMPLE_ALPHA_TO_COVERAGE);u.disable(u.SAMPLE_COVERAGE);u.depthFunc(u.LEQUAL);u.clearDepth(1)}var n=null,p=null,r=null,k=null,q=!0,w=null,C=null,v=[],A={F:function(){return n.width},U:function(){return n.height},hb:function(){return n},pg:function(){return F},ia:function(){return q},flush:function(){F.flush()},
Gg:function(){Xa.Y();A.zf()},zf:function(){T.reset();U.reset();K.O();K.ye();F.disable(F.DEPTH_TEST);F.disable(F.BLEND);U.Ya();K.Qa()},Ge:function(){w||(w=new Uint8Array(n.width*n.height*4));F.readPixels(0,0,n.width,n.height,F.RGBA,F.UNSIGNED_BYTE,w);return w},sg:function(){return n.toDataURL("image/jpeg")},tg:function(){Xa.S();p||(p=document.createElement("canvas"),r=p.getContext("2d"));f(p,n.width,n.height);for(var u=A.Ge(),B=r.createImageData(p.width,p.height),e=p.width,H=p.height,I=B.data,g=0;g<
H;++g)for(var J=H-g-1,t=0;t<e;++t){var D=4*(g*e+t),L=4*(J*e+t);I[D]=u[L];I[D+1]=u[L+1];I[D+2]=u[L+2];I[D+3]=u[L+3]}r.putImageData(B,0,0);return p.toDataURL("image/png")},rg:function(u){!p&&u&&(p=document.createElement("canvas"),r=p.getContext("2d"));var B=u?p:document.createElement("canvas");f(B,n.width,n.height);(u?r:B.getContext("2d")).drawImage(n,0,0);return B},u:function(u){u=Object.assign({fa:null,jc:null,Za:null,Mc:null,width:512,height:512,premultipliedAlpha:!1,hd:!0,antialias:!1,debug:!1,
kg:!1},u);u.fa?(F=u.fa,n=u.fa.canvas):u.Mc&&!u.Za?n=document.getElementById(u.Mc):u.Za&&(n=u.Za);n||(n=document.createElement("canvas"));n.width=u.width;n.height=u.height;if(F)q=F instanceof WebGL2RenderingContext;else{q=!0;var B={antialias:u.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:u.premultipliedAlpha,stencil:!1,depth:u.hd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(B.antialias=!1);var e=l(B);e||!B.antialias||d()||(B.antialias=!1,e=l(B));e&&(F=n.getContext("webgl2",B));F?q=!0:((F=n.getContext("webgl",B))||(F=n.getContext("experimental-webgl",B)),q=!1)}if(!F)return a("WebGL1 and 2 are not enabled");u.jc&&n.addEventListener&&(k=F.getExtension("WEBGL_lose_context"))&&(C=u.jc,n.addEventListener("webglcontextlost",C,!1));if(!Wa.u())return a("Not enough GL capabilities");m(F);K.u();U.u();Va.Kc(F,Wa.Ee());v.forEach(function(H){H(F)});v.splice(0);return!0},eg:function(){return new Promise(function(u){F?
u(F):v.push(u)})},m:function(){F&&(Wa.m(),K.m(),Va.m());k&&C&&(n.removeEventListener("webglcontextlost",C,!1),k=C=null);F=w=r=p=n=null;v.splice(0)}};return A}(),Ta=function(){function a(){null===d&&("undefined"!==typeof K?d=K:"undefined"!==typeof JEShaders&&(d=JEShaders))}var d=null;return{reset:function(){d=null},Kf:function(f){d!==f&&(d&&d.O(),d=f)},rb:function(){return d.rb()},Qa:function(){return d.Qa()},zb:function(f){return d.zb(f)},uc:function(){return d.uc()},O:function(){return d.O()},set:function(f){a();
return d.set(f)},Pa:function(f){a();return d.Pa(f)},tc:function(f){a();return d.tc(f)}}}(),T=function(){function a(c){F.bindTexture(F.TEXTURE_2D,c)}function d(c){N[0]=c;c=x[0];var h=c>>16&32768,E=c>>12&2047,P=c>>23&255;return 103>P?h:142<P?h|31744|((255==P?0:1)&&c&8388607):113>P?(E|=2048,h|(E>>114-P)+(E>>113-P&1)):h=(h|P-112<<10|E>>1)+(E&1)}function f(c){var h=new Uint16Array(c.length);c.forEach(function(E,P){h[P]=d(E)});return h}function l(){if(null!==S.Vb)return S.Vb;var c=n(f([.5,.5,.5,.5]),!0);
return null===c?!0:S.Vb=c}function m(){if(null!==S.Wb)return S.Wb;var c=n(new Uint8Array([127,127,127,127]),!1);return null===c?!0:S.Wb=c}function n(c,h){if(!Ta.rb()||!B)return null;var E=null,P=Math.sqrt(c.length/4);try{var M=F.getError();if("FUCKING_BIG_ERROR"===M)return!1;E=O.instance({isFloat:!1,M:h,array:c,width:P});M=F.getError();if(M!==F.NO_ERROR)return!1}catch(ea){return!1}Xa.S();F.viewport(0,0,P,P);F.clearColor(0,0,0,0);F.clear(F.COLOR_BUFFER_BIT);Ta.set("s0");E.Xa(0);U.l(!0,!0);c=4*P*P;
h=new Uint8Array(c);F.readPixels(0,0,P,P,F.RGBA,F.UNSIGNED_BYTE,h);P=!0;for(M=0;M<c;++M)P=P&&3>Math.abs(h[M]-127);E.remove();Xa.Y();return P}var p=0,r=null,k=0,q=null,w=null,C=null,v=null,A=null,u=null,B=!1,e=[],H={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,G:null,ad:null,af:!1,M:!1,D:null,tb:4,cc:0},I=!1,g=null,J=null,t=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],
D=!1,L=!1,N=new Float32Array(1),x=new Int32Array(N.buffer),S={Vb:null,Wb:null},O={u:function(){B||(A=[F.RGBA,null,F.RGBA,F.RGBA],u=[F.RGBA,null,F.RGBA,F.RGBA],r=[F.TEXTURE0,F.TEXTURE1,F.TEXTURE2,F.TEXTURE3,F.TEXTURE4,F.TEXTURE5,F.TEXTURE6,F.TEXTURE7],D="undefined"!==typeof JEContext,L="undefined"!==typeof Wa,D&&JEContext.Pg()&&r.push(F.TEXTURE8,F.TEXTURE9),q=[-1,-1,-1,-1,-1,-1,-1,-1],v=[F.UNSIGNED_BYTE,F.FLOAT,F.FLOAT],B=!0)},Ve:function(){if(!w){for(var c=new Float32Array(16384),h=0;16384>h;++h)c[h]=
2*Math.random()-1;w={random:O.instance({isFloat:!0,isPot:!0,array:c,width:64}),Wd:O.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}O.Yf()},Nd:function(c){F.framebufferTexture2D(Xa.Tb(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,c,0)},Eg:function(){return w.Wd},Yf:function(){v[1]=Wa.Sb(F)},If:function(){u=A=[F.RGBA,F.RGBA,F.RGBA,F.RGBA]},Fd:function(c){K.set("s1");Xa.S();var h=c.F(),E=c.U();F.viewport(0,0,h,E);c.h(0);U.l(!1,!1)},xf:function(c,h){O.Fd(c);F.readPixels(0,0,c.F(),c.U(),
F.RGBA,F.UNSIGNED_BYTE,h)},yf:function(c,h){O.Fd(c);return Wa.rc(0,0,c.F(),c.U(),h)},Vc:function(c,h,E,P,M,ea,ha){c.activeTexture(c.TEXTURE0);var ma=c.createTexture();c.bindTexture(c.TEXTURE_2D,ma);M=M instanceof Float32Array?M:new Float32Array(M);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_S,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_WRAP_T,c.CLAMP_TO_EDGE);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MAG_FILTER,c.NEAREST);c.texParameteri(c.TEXTURE_2D,c.TEXTURE_MIN_FILTER,c.NEAREST);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,
ea);c.texImage2D(c.TEXTURE_2D,0,c.RGBA,E,P,0,c.RGBA,c.FLOAT,M);c.bindTexture(c.TEXTURE_2D,null);c.pixelStorei(c.UNPACK_FLIP_Y_WEBGL,!1);ha&&(Xa.Y(),K.Pa(c));c.viewport(0,0,E,P);c.framebufferTexture2D(c.FRAMEBUFFER,c.COLOR_ATTACHMENT0,c.TEXTURE_2D,h,0);c.bindTexture(c.TEXTURE_2D,ma);ha?U.l(!0,!0):U.eb(c);c.deleteTexture(ma);B&&(q[0]=-1,C=null,p=0)},Kb:function(c){c!==p&&(F.activeTexture(r[c]),p=c)},instance:function(c){var h;function E(){W=void 0!==y.G.videoWidth?y.G.videoWidth:y.G.width;X=void 0!==
y.G.videoHeight?y.G.videoHeight:y.G.height}function P(G){var V=F.getError();if("FUCKING_BIG_ERROR"===V)return!1;F.texImage2D(F.TEXTURE_2D,0,ka,ia,ja,G);V=F.getError();V!==F.NO_ERROR&&ia!==F.RGBA&&(ia=F.RGBA,F.texImage2D(F.TEXTURE_2D,0,ka,ia,ja,G));return!0}function M(){if(!cb){a(R);ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,ua);y.isPot?(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,y.isMirrorX?F.MIRRORED_REPEAT:F.REPEAT),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,y.isMirrorY?F.MIRRORED_REPEAT:F.REPEAT)):
(F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_S,F.CLAMP_TO_EDGE),F.texParameteri(F.TEXTURE_2D,F.TEXTURE_WRAP_T,F.CLAMP_TO_EDGE));y.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&F.texParameterf(F.TEXTURE_2D,JEContext.vg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.ag);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,y.isLinear?F.LINEAR:F.NEAREST);y.isLinear?F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,y.isMipmap&&!ya?F.NEAREST_MIPMAP_LINEAR:F.LINEAR):F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,
y.isMipmap&&!ya?F.NEAREST_MIPMAP_NEAREST:F.NEAREST);ia=A[y.tb-1];ka=u[y.tb-1];ja=v[za];if(Wa.ia()){var G=Wa.He();ia===F.RGBA&&ja===F.FLOAT?y.isMipmap||y.isLinear?ka=Va.Je(F):Wa.Lc()?G&&(ka=G):ka=F.RGBA16F||F.RGBA:ia===F.RGB&&ja===F.FLOAT&&G&&(ka=G,ia=F.RGBA)}if(y.M&&!y.isFloat||y.isFloat&&y.isMipmap&&Va.ef())ka=Wa.Ie(),ja=Wa.Sb(F);y.cc&&(La=y.cc);y.isSrgb&&4===y.tb&&(ia=JEContext.Cg());if(y.G)P(y.G);else if(y.url)P(na);else if(qa){G=qa;try{"FUCKING_BIG_ERROR"!==F.getError()&&(F.texImage2D(F.TEXTURE_2D,
0,ka,W,X,0,ia,ja,G),F.getError()!==F.NO_ERROR&&(F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,null),F.getError()!==F.NO_ERROR&&F.texImage2D(F.TEXTURE_2D,0,F.RGBA,W,X,0,F.RGBA,F.UNSIGNED_BYTE,null)))}catch(Pb){F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,null)}y.isKeepArray||(qa=null)}else G=F.getError(),"FUCKING_BIG_ERROR"!==G&&(F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,null),G=F.getError(),G!==F.NO_ERROR&&(ia=F.RGBA,y.M&&ja!==F.FLOAT&&(ja=F.FLOAT,F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,null))));if(y.isMipmap)if(!ya&&
da)da.Qb(),Ma=!0;else if(ya){G=Math.log2(Math.min(W,X));Ca=Array(1+G);Ca[0]=R;for(var V=1;V<=G;++V){var la=Math.pow(2,V),Z=W/la;la=X/la;var Aa=F.createTexture();a(Aa);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MIN_FILTER,F.NEAREST);F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAG_FILTER,F.NEAREST);F.texImage2D(F.TEXTURE_2D,0,ka,Z,la,0,ia,ja,null);a(null);Ca[V]=Aa}Ma=!0}a(null);q[p]=-1;ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;y.D&&da&&(y.D(da),y.D=null)}}function ea(){for(var G=W*X,V=2*G,la=3*G,Z=0;Z<
G;++Z)sa[0][Z]=Ga[Z],sa[1][Z]=Ga[Z+G],sa[2][Z]=Ga[Z+V],sa[3][Z]=Ga[Z+la]}function ha(){var G=W*X*4;wa=[new Uint8Array(G),new Uint8Array(G),new Uint8Array(G),new Uint8Array(G)];sa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*G);Ga=new Float32Array(Na.buffer);Ha=!0}function ma(){h=new Uint8Array(W*X*4);db=new Float32Array(h.buffer);Ua=!0}var y=Object.assign({},H,c),ba=k++;null===y.isFlipY&&(y.isFlipY=
y.url?!0:!1);y.data&&(y.array="string"===typeof y.data?Sa(y.data):y.isFloat?new Float32Array(y.data):new Uint8Array(y.data),y.isFlipY=!1);var za=0,xa=y.G?!0:!1,z=null,Q=null,aa=!1;y.M=y.M||y.isFloat;y.M&&(za=1);!y.af&&y.isFloat&&L&&!Wa.Lc()&&(y.isFloat=!1);y.isFloat&&(za=2);y.isAnisotropicFiltering&&D&&!JEContext.Jg()&&(y.isAnisotropicFiltering=!1);var R=y.ad||F.createTexture(),na=null,qa=!1,W=0,X=0,Fa=!1,cb=!1,Ha=!1,sa=null,wa=null,Na=null,Ga=null,ka=null,ia=null,ja=null,ua=y.isFlipY,vb=(c=y.M&&
y.isMipmap)&&Va.je(),ya=c&&!vb?!0:!1,Ca=null,La=-1,eb=-1,Ma=!1;var Ua=!1;var db=h=null;y.width&&(W=y.width,X=y.height?y.height:W);var da={get:function(){return R},F:function(){return W},U:function(){return X},Fg:function(){return y.url},Kg:function(){return y.isFloat},Mg:function(){return y.M},Wg:function(G){R=G},Ng:function(){return y.isLinear},Qb:function(){F.generateMipmap(F.TEXTURE_2D)},ge:function(G,V){ya?(G||(G=da.Zc()),O.Kb(V),a(Ca[G]),q[V]=-1):da.h(V)},Zc:function(){-1===La&&(La=Math.log(W)/
Math.log(2));return La},De:function(G){G||(G=da.Zc());if(ya){K.set("s12");O.Kb(0);for(var V=W,la=X,Z=1;Z<=G;++Z)V/=2,la/=2,K.R("u14",.25/V,.25/la),F.viewport(0,0,V,la),a(Ca[Z-1]),F.framebufferTexture2D(Xa.Tb(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,Ca[Z],0),U.l(!1,1===Z);q[0]=-1}else G!==eb&&(eb=G,F.TEXTURE_MAX_LEVEL&&F.texParameteri(F.TEXTURE_2D,F.TEXTURE_MAX_LEVEL,G)),da.Qb()},Xg:function(G){(xa=!(Array.isArray(G)||G.constructor===Float32Array||G.constructor===Uint8Array))?(qa=null,y.G=G,E()):qa=G},h:function(G){if(!Fa)return!1;
O.Kb(G);if(q[G]===ba)return!1;a(R);q[G]=ba;return!0},Xa:function(G){F.activeTexture(r[G]);p=G;a(R);q[G]=ba},v:function(){C=da;O.Nd(R)},L:function(){F.viewport(0,0,W,X);C=da;O.Nd(R)},Ac:O.Ac,Gf:function(G,V){W=G;X=V},resize:function(G,V){da.Gf(G,V);M()},clone:function(G){G=O.instance({width:W,height:X,M:y.M,isFloat:y.isFloat,isLinear:y.isLinear,isMirrorY:y.isMirrorY,isFlipY:G?!ua:ua,isPot:y.isPot});Ta.set("s0");Xa.Y();G.L();da.h(0);U.l(!0,!0);return G},Of:function(){F.viewport(0,0,W,X)},remove:function(){F.deleteTexture(R);
cb=!0;e.splice(e.indexOf(da),1);da=null},refresh:function(){da.Xa(0);ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);xa?F.texImage2D(F.TEXTURE_2D,0,ka,ia,ja,y.G):F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,qa);ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},qc:function(){Ha||ha();F.readPixels(0,0,W,4*X,F.RGBA,F.UNSIGNED_BYTE,Na);ea();return sa},tf:function(){Ha||ha();return Wa.rc(0,0,W,4*X,Na).then(function(){ea();return sa})},vf:function(){Ua||ma();F.readPixels(0,0,W,X,F.RGBA,F.UNSIGNED_BYTE,h);return db},
uf:function(){Ua||ma();return Wa.rc(0,0,W,X,h)},Ob:function(G){Xa.S();K.set("s15");da.h(0);if(G)F.viewport(0,0,W,X),K.Nf("u15",.25,.25,.25,.25),U.l(!1,!0);else for(G=0;4>G;++G)F.viewport(0,X*G,W,X),K.Od("u15",t[G]),U.l(!1,0===G)},Bc:function(G){var V=ja===v[0]&&!m();a(R);ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);V?(aa||(z=document.createElement("canvas"),z.width=W,z.height=X,Q=z.getContext("2d"),Q.createImageData(W,X),aa=!0),null.data.set(G),Q.putImageData(null,0,0),F.texImage2D(F.TEXTURE_2D,0,
ka,ia,ja,z)):F.texImage2D(F.TEXTURE_2D,0,ka,W,X,0,ia,ja,G);q[p]=ba;ua&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},gh:function(G,V){a(R);V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!0);F.texImage2D(F.TEXTURE_2D,0,ka,ia,ja,G);q[p]=ba;V&&F.pixelStorei(F.UNPACK_FLIP_Y_WEBGL,!1)},Ug:function(G,V){var la=W*X,Z=4*la;G=y.M?G?"RGBE":"JSON":"RGBA";V&&(G=V);V=Wa.ia()&&!1;var Aa=null;switch(G){case "RGBE":Aa="s13";break;case "JSON":Aa=V?"s0":"s15";break;case "RGBA":case "RGBAARRAY":Aa="s7"}Ha||("RGBA"===G||"RGBE"===
G||"RGBAARRAY"===G?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==G||V||ha());Xa.S();K.set(Aa);da.h(0);Z=null;if("RGBA"===G||"RGBE"===G||"RGBAARRAY"===G){F.viewport(0,0,W,X);U.l(!0,!0);F.readPixels(0,0,W,X,F.RGBA,F.UNSIGNED_BYTE,wa);if("RGBAARRAY"===G)return{data:wa};I||(g=document.createElement("canvas"),J=g.getContext("2d"),I=!0);g.width=W;g.height=X;la=J.createImageData(W,X);la.data.set(wa);J.putImageData(la,0,0);Z=g.toDataURL("image/png")}else if("JSON"===G)if(V)Z=new Float32Array(la),F.viewport(0,0,W,
X),U.l(!0,!0),F.readPixels(0,0,W,X,F.RGBA,F.FLOAT,Z);else{for(Z=0;4>Z;++Z)F.viewport(0,X*Z,W,X),K.Od("u15",t[Z]),U.l(!Z,!Z);da.qc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=sa[0][V],Z[4*V+1]=sa[1][V],Z[4*V+2]=sa[2][V],Z[4*V+3]=sa[3][V]}return{format:G,data:Z,width:W,height:X,isMirrorY:y.isMirrorY,isFlipY:"RGBA"===G?y.isFlipY:!y.isFlipY}}};y.isMipmap&&!ya&&Fa&&!Ma&&(da.Qb(),Ma=!0);if(y.url)a(R),F.texImage2D(F.TEXTURE_2D,0,F.RGBA,1,1,0,F.RGBA,F.UNSIGNED_BYTE,null),na=new Image,na.jg="Anonymous",na.crossOrigin=
"Anonymous",na.src=y.url,na.onload=function(){W=na.width;X=na.height;M()};else if(y.G){var fb=function(){E();W?M():setTimeout(fb,1)};fb()}else y.array?(y.M&&!y.isFloat?y.array instanceof Uint16Array?(qa=y.array,M()):l()?(qa=f(y.array),M()):(M(),O.Vc(F,R,da.F(),da.U(),y.array,ua,!0)):(qa=y.isFloat?y.array instanceof Float32Array?y.array:new Float32Array(y.array):y.array instanceof Uint8Array?y.array:new Uint8Array(y.array),M()),y.isKeepArray||(qa&&qa!==y.array&&(qa=null),delete y.array)):y.ad?Fa=!0:
M();da.Bg=da.F;y.D&&Fa&&(y.D(da),y.D=null);e.push(da);return da},S:function(c){c!==p&&(F.activeTexture(r[c]),p=c);q[c]=-1;a(null)},dg:function(c){w.random.h(c)},Ac:function(){C=null;F.framebufferTexture2D(Xa.Tb(),F.COLOR_ATTACHMENT0,F.TEXTURE_2D,null,0)},reset:function(){0!==p&&F.activeTexture(r[0]);for(var c=0;c<r.length;++c)q[c]=-1;p=-1},Tg:function(){p=-1},Uf:function(){for(var c=0;c<r.length;++c)O.S(c)},Xc:function(){w&&(w.random.remove(),w.Wd.remove())},fh:function(c,h){if("RGBA"===c.format||
"RGBE"===c.format){var E=new Image;E.src=c.data;E.onload=function(){O.instance({isMirrorY:c.isMirrorY,isFlipY:c.isFlipY,isFloat:!1,G:E,D:function(P){if("RGBA"===c.format)h(P);else{var M=c.width,ea=c.height,ha=O.instance({isMirrorY:c.isMirrorY,isFloat:!0,width:M,height:ea,isFlipY:c.isFlipY});Xa.Y();F.viewport(0,0,M,ea);K.set("s14");ha.v();P.h(0);U.l(!0,!0);O.S(0);h(ha);Wa.flush();P.remove()}}})}}else"JSON"===c.format?h(O.instance({isFloat:!0,isFlipY:c.isFlipY,width:c.width,height:c.height,array:new Float32Array(c.data)})):
h(!1)},pe:f,m:function(){C&&(Xa.Y(),O.Ac(),Xa.S());O.Uf();e.slice(0).forEach(function(c){c.remove()});e.splice(0);B=!1;k=0;"undefined"!==typeof Va&&Va.m();w=null}};return O}(),Za={instance:function(a){var d=[T.instance(a),T.instance(a)],f=[d[1],d[0]],l=f,m={Md:function(n){l[1].v();l[0].h(n);m.Rd()},Ff:function(n){l[1].L();l[0].h(n);m.Rd()},Rd:function(){l=l===d?f:d},refresh:function(){l[0].refresh();l[1].refresh()},h:function(n){l[0].h(n)},Xa:function(n){l[0].Xa(n)},cg:function(n){l[1].h(n)},Oe:function(){return l[0]},
zg:function(){return l[1]},Bc:function(n){l[0].Bc(n);l[1].Bc(n)},remove:function(){l[0].remove();l[1].remove();l=null},sync:function(){m.Ff(0);K.set("s0");U.l(!1,!1)}};return m}},U=function(){function a(k){var q={ba:null,indices:null};q.ba=k.createBuffer();k.bindBuffer(k.ARRAY_BUFFER,q.ba);k.bufferData(k.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),k.STATIC_DRAW);q.indices=k.createBuffer();k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,q.indices);k.bufferData(k.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,
2]),k.STATIC_DRAW);return q}var d=null,f=0,l=!1,m=[],n=-2,p=-2,r={reset:function(){p=n=-2},u:function(){l||(d=a(F),r.Ya(),l=!0)},instance:function(k){var q=f++,w=k.indices?k.indices.length:0,C="undefined"===typeof k.mode?F.STATIC_DRAW:k.mode,v=F.createBuffer();F.bindBuffer(F.ARRAY_BUFFER,v);F.bufferData(F.ARRAY_BUFFER,k.ba instanceof Float32Array?k.ba:new Float32Array(k.ba),C);n=q;var A=null,u=null,B=null;if(k.indices){A=F.createBuffer();F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,A);var e=null;65536>k.indices.length?
(e=Uint16Array,u=F.UNSIGNED_SHORT,B=2):(e=Uint32Array,u=F.UNSIGNED_INT,B=4);e=k.indices instanceof e?k.indices:new e(k.indices);F.bufferData(F.ELEMENT_ARRAY_BUFFER,e,C);p=q}var H={he:function(I){n!==q&&(F.bindBuffer(F.ARRAY_BUFFER,v),n=q);I&&Ta.uc()},ee:function(){p!==q&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,A),p=q)},bind:function(I){H.he(I);H.ee()},lg:function(){F.drawElements(F.TRIANGLES,w,u,0)},mg:function(I,g){F.drawElements(F.TRIANGLES,I,u,g*B)},remove:function(){F.deleteBuffer(v);k.indices&&
F.deleteBuffer(A);H=null}};m.push(H);return H},Ya:function(){-1!==n&&(F.bindBuffer(F.ARRAY_BUFFER,d.ba),n=-1);-1!==p&&(F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,d.indices),p=-1)},l:function(k,q){k&&U.Ya();q&&Ta.Qa();F.drawElements(F.TRIANGLES,3,F.UNSIGNED_SHORT,0)},eb:function(k){k=k||F;var q=a(k);k.bindBuffer(k.ARRAY_BUFFER,q.ba);k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,q.indices);Ta.zb(k);k.clear(k.COLOR_BUFFER_BIT);k.drawElements(k.TRIANGLES,3,k.UNSIGNED_SHORT,0);k.flush();k.bindBuffer(k.ARRAY_BUFFER,null);
k.bindBuffer(k.ELEMENT_ARRAY_BUFFER,null);k.deleteBuffer(q.ba);k.deleteBuffer(q.indices);r.reset();l&&(r.Ya(),Ta.Qa())},Xc:function(){var k=F,q=d;k.deleteBuffer(q.ba);k.deleteBuffer(q.indices)},m:function(){r.Xc();m.forEach(function(k){k.remove()});F.bindBuffer(F.ARRAY_BUFFER,null);F.bindBuffer(F.ELEMENT_ARRAY_BUFFER,null);r.reset();l=!1;m.splice(0);f=0}};return r}(),Xa=function(){var a=null,d=null,f=null,l=!1,m=[],n={H:-2,Uc:1},p={rb:function(){return l},u:function(){if(!l){a=F.createFramebuffer();
var r=Wa.ia();d=r&&F.DRAW_FRAMEBUFFER?F.DRAW_FRAMEBUFFER:F.FRAMEBUFFER;f=r&&F.READ_FRAMEBUFFER?F.READ_FRAMEBUFFER:F.FRAMEBUFFER;l=!0}},wg:function(){return d},Ke:function(){return f},Tb:function(){return F.FRAMEBUFFER},Ag:function(){return n},og:function(){return a},instance:function(r){void 0===r.gd&&(r.gd=!1);var k=r.Aa?r.Aa:null,q=r.width,w=void 0!==r.height?r.height:r.width,C=a,v=null,A=!1,u=!1,B=0;k&&(q=q?q:k.F(),w=w?w:k.U());var e={Ld:function(){A||(C=F.createFramebuffer(),A=!0,B=n.Uc++)},Zd:function(){e.Ld();
e.v();v=F.createRenderbuffer();F.bindRenderbuffer(F.RENDERBUFFER,v);F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,q,w);F.framebufferRenderbuffer(d,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,v);F.clearDepth(1)},bind:function(H,I){B!==n.H&&(F.bindFramebuffer(d,C),n.H=B);k&&k.v();I&&F.viewport(0,0,q,w);H&&F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},bg:function(){B!==n.H&&(F.bindFramebuffer(d,C),n.H=B)},clear:function(){F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT)},hg:function(){F.clear(F.COLOR_BUFFER_BIT)},
ig:function(){F.clear(F.DEPTH_BUFFER_BIT)},Of:function(){F.viewport(0,0,q,w)},v:function(){B!==n.H&&(F.bindFramebuffer(d,C),n.H=B)},rtt:function(H){k=H;n.H!==B&&(F.bindFramebuffer(F.FRAMEBUFFER,C),n.H=B);H.v()},S:function(){F.bindFramebuffer(d,null);n.H=-1},resize:function(H,I){q=H;w=I;v&&(F.bindRenderbuffer(F.RENDERBUFFER,v),F.renderbufferStorage(F.RENDERBUFFER,F.DEPTH_COMPONENT16,q,w))},remove:function(){C===a||u||(F.bindFramebuffer(d,C),F.framebufferTexture2D(d,F.COLOR_ATTACHMENT0,F.TEXTURE_2D,
null,0),v&&F.framebufferRenderbuffer(d,F.DEPTH_ATTACHMENT,F.RENDERBUFFER,null),F.bindFramebuffer(d,null),F.deleteFramebuffer(C),v&&F.deleteRenderbuffer(v));u=!0}};r.gd&&e.Zd();m.push(e);return e},S:function(){F.bindFramebuffer(d,null);n.H=-1},Vf:function(){F.bindFramebuffer(d,null);F.clear(F.COLOR_BUFFER_BIT|F.DEPTH_BUFFER_BIT);Wa.Pd();n.H=-1},reset:function(){n.H=-2},Y:function(){0!==n.H&&(F.bindFramebuffer(d,a),n.H=0)},clear:function(){Wa.Pd();F.clear(F.COLOR_BUFFER_BIT)},m:function(){p.S();m.forEach(function(r){r.remove()});
null!==a&&(F.deleteFramebuffer(a),a=null);p.reset();l=!1;m.splice(0);n.Uc=1}};return p}(),Wa=function(){function a(){r="undefined"===typeof Ya?JEContext:Ya;k=!0}function d(g,J){for(var t=0;t<g.length;++t){var D=J.getExtension(g[t]);if(D)return D}return null}function f(){null!==e.Cb&&(clearTimeout(e.Cb),e.Cb=null);e.va=!1}function l(g){if(0===e.oa.length){e.V=F.PIXEL_PACK_BUFFER;e.oa.splice(0);e.jb.splice(0);for(var J=0;J<e.Ha;++J)e.oa.push(F.createBuffer()),e.jb.push(-1);e.da=0;e.ic=0}F.bindBuffer(e.V,
e.oa[e.da]);g.byteLength!==e.jb[e.da]&&(F.bufferData(e.V,g.byteLength,F.STREAM_READ),e.jb[e.da]=g.byteLength);e.Hg=!0}function m(){F.bindBuffer(e.V,null)}function n(){e.ua.forEach(function(g){F.deleteSync(g)});e.ua.splice(0)}function p(){e.da=(e.da+1)%e.Ha;++e.ic}var r=null,k=!1,q={jd:!1,wc:null,xc:null,md:!1,df:!1,yc:null,nd:!1,zc:null,kd:!1,Lb:null,Ye:!1,Mb:null,Ze:!1},w=null,C={ea:!0,ga:!0,Pb:!0,Ed:!1},v=null,A=!0,u=null,B=null,e={qe:1,Ha:-1,da:0,ic:0,va:!1,oa:[],ua:[],jb:[],V:null,Cb:null},H=
"undefined"===typeof window?{}:window,I={u:function(){if(k)return!0;I.reset();k||a();var g=F;if(!w.jd){w.wc=I.Rc(g);H.GL_EXT_FLOAT=w.wc;w.md=w.wc?!0:!1;if(w.md||I.ia())w.xc=I.Sc(g),w.df=w.xc?!0:!1,H.GL_EXT_FLOATLINEAR=w.xc;w.jd=!0}if(!w.kd){w.yc=I.bb(g);w.yc&&(w.nd=!0,H.GL_EXT_HALFFLOAT=w.yc);if(w.nd||I.ia())w.zc=I.Tc(g),H.GL_EXT_HALFFLOATLINEAR=w.zc;w.Ig=w.zc?!0:!1;w.kd=!0}w.Lb=I.Pc(g);w.Ye=w.Lb?!0:!1;H.GL_EXT_COLORBUFFERFLOAT=w.Lb;w.Mb=I.Qc(g);w.Ze=w.Mb?!0:!1;H.GL_EXT_COLORBUFFERHALFFLOAT=w.Mb;
Xa.u();T.u();if(!I.se())return!1;U.u();T.Ve();return!0},reset:function(){w=Object.assign({},q);v=Object.assign({},C)},F:function(){k||a();return r.F()},U:function(){k||a();return r.U()},ia:function(){k||a();return r.ia()},Oc:function(g){I.Pc(g);I.Qc(g);I.Rc(g);I.Sc(g);I.bb(g);I.Tc(g)},Pc:d.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),Qc:d.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Rc:d.bind(null,
["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Sc:d.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),bb:d.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Tc:d.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),Sb:function(g){var J=I.bb(g);return J&&J.HALF_FLOAT_OES?J.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},
He:function(){return B||F.RGBA32F||F.RGBA},Ie:function(){return u||F.RGBA16F||F.RGBA},Ee:function(){return v},Lc:function(){return v.ea},gg:function(){return v.ga},fg:function(){return v.Pb},ke:function(){return v.Ed&&A},Vd:function(g){A=g;!g&&e.va&&(n(),F.bindBuffer(e.V,null),e.va=!1)},Og:function(){return e.va},Bb:function(g,J,t){function D(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(L,null);g.deleteTexture(S);g.deleteFramebuffer(x)}var L=g.FRAMEBUFFER,N=g.NEAREST,x=g.createFramebuffer();
g.bindFramebuffer(L,x);var S=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,S);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,N);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,N);g.texImage2D(g.TEXTURE_2D,0,J,3,3,0,g.RGBA,t,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,S,0);
if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return D(),!1;Ta.tc(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);U.eb(g);g.bindFramebuffer(L,null);Ta.Pa(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,S);U.eb(g);J=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,J);D();for(t=0;36>t;++t)if(3!==t%4&&3<Math.abs(J[t]-127))return!1;return!0},Nb:function(g){var J={ea:!1,ga:!1};g.disable(g.BLEND);
g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&I.Bb(g,g.RGBA32F,g.FLOAT)&&(J.ea=!0,B=g.RGBA32F);!J.ea&&I.Bb(g,g.RGBA,g.FLOAT)&&(J.ea=!0,B=g.RGBA);var t=I.Sb(g);u=null;g.RGBA16F&&I.Bb(g,g.RGBA16F,t)&&(J.ga=!0,u=g.RGBA16F);!J.ga&&I.Bb(g,g.RGBA,t)&&(J.ga=!0,u=g.RGBA);return J},te:function(){var g=Xa.instance({width:2});g.Ld();var J=T.instance({width:2,isFloat:!0,tb:3});g.v();J.v();I.flush();F.checkFramebufferStatus(Xa.Ke())!==F.FRAMEBUFFER_COMPLETE?(T.If(),v.Pb=!1):v.Pb=!0;g.remove();J.remove()},
ue:function(){var g=!1;I.ia()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(J){return"undefined"!==typeof F[J]}));v.Ed=g},se:function(){var g=I.Nb(F);Object.assign(v,g);if(!v.ea&&!v.ga)return!1;I.te();I.ue();return!0},wf:function(g,J,t,D,L){F.readPixels(g,J,t,D,F.RGBA,F.UNSIGNED_BYTE,L);return Promise.resolve(L,!1)},rc:function(g,J,t,D,L,N,x){if(!I.ke())return I.wf(g,J,t,D,L);e.Ha=x||e.qe;l(L);F.readPixels(g,
J,t,D,F.RGBA,F.UNSIGNED_BYTE,0);e.ua[e.da]=F.fenceSync(F.SYNC_GPU_COMMANDS_COMPLETE,0);I.flush();var S=!1;return new Promise(function(O,c){function h(){if(!e.va)return f(),m(),p(),c(),!1;var E=(e.da+1)%e.Ha;switch(F.clientWaitSync(e.ua[E],0,0)){case F.TIMEOUT_EXPIRED:case F.WAIT_FAILED:break;default:return f(),F.deleteSync(e.ua[E]),e.ua[E]=null,F.bindBuffer(e.V,e.oa[E]),F.getBufferSubData(e.V,0,L),m(),p(),O(L,S),!0}e.Cb=setTimeout(h,0);return!1}f();e.ic+1<e.Ha?(m(),p(),O(L,!1)):(e.va=!0,h()||!N||
S||(S=!0,N()))})},Pd:function(){F.viewport(0,0,I.F(),I.U())},flush:function(){F.flush()},m:function(){f();n();T.m();Xa.m();U.m();e.oa.forEach(function(g){F.deleteBuffer(g)});e.oa.splice(0);Ta.reset();k=!1}};return I}(),Va=function(){function a(t,D,L,N){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,N?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var x=null;if(null!==L)try{x=e.getError();if("FUCKING_BIG_ERROR"===x)return!1;e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,e.RGBA,D,L);x=e.getError();if(x!==e.NO_ERROR)return!1}catch(S){return!1}N&&
e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);U.eb(e);x=e.getError();if("FUCKING_BIG_ERROR"===x)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,w);x=e.getError();x===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,w),x=e.getError());if(x!==e.NO_ERROR)return!1;L=!0;for(N=0;16>N;++N)L=L&&4>Math.abs(w[N]-127);L&&(k.xd=D,k.fd=t);return L}function d(t,D){return H.ea&&a(t,e.FLOAT,new Float32Array(C),
D)?(r=p.Hc,!0):!1}function f(t,D,L){if(!H.ga)return!1;var N=T.pe(C),x=Wa.bb(e);if(x&&x.HALF_FLOAT_OES&&a(t,x.HALF_FLOAT_OES,N,D)||e.HALF_FLOAT&&a(t,e.HALF_FLOAT,N,D))return r=p.Da,!0;N=new Float32Array(C);if(a(t,e.FLOAT,N,D))return r=p.Da,!0;e.bindTexture(e.TEXTURE_2D,L);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(k.$a,J);T.Vc(e,L,2,2,N,!1,!1);e.bindFramebuffer(k.$a,null);e.bindTexture(e.TEXTURE_2D,L);return a(t,null,null,D)?(r=p.Da,!0):!1}function l(t,
D,L){q=!0;if(f(t,!0,L)||d(D,!0))return!0;q=!1;return f(t,!1,L)||d(D,!1)?!0:!1}function m(t){if(r===p.O){e=t||F;r=p.RGBA8;q=!0;Wa.Oc(e);H||(H=Wa.Nb(e));Xa.reset();J=e.createFramebuffer();k.$a=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(k.$a,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);K.O();I=K.Pa(e);t=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);
e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);g=t;var D=t=e.RGBA,L=e.RGBA16F,N=e.RGBA32F;N&&(t=N);L&&(D=L);if((L||N)&&l(D,t,g))return n(),!0;t=D=e.RGBA;if(l(D,t,g))return n(),!0;r=p.RGBA8;n();return!1}}function n(){e.deleteProgram(I.ra);e.deleteTexture(g);g=I=null}for(var p={O:-1,Hc:3,Da:2,RGBA8:0},r=p.O,k={xd:null,fd:null,$a:null},q=!0,w=new Uint8Array(16),C=Array(64),v=0;4>v;++v)for(var A=0;4>A;++A){var u=0===(A+v)%2?1:0,B=4*v+A;C[4*B]=u;C[4*B+1]=u;C[4*B+2]=u;C[4*B+3]=u}var e=null,
H=null,I=null,g=null,J=null;return{je:function(t){m(t);return q},Kc:function(t,D){r===p.O&&(typeof("undefined"!==D)&&(H=D),m(t));return r!==p.RGBA8},Lg:function(t){m(t);return r===p.Hc},ef:function(t){m(t);return r===p.Da},xg:function(t){m(t);return k.xd},Je:function(t){m(t);return k.fd},m:function(){e=null;q=!0;r=p.O;H=null}}}(),hb={instance:function(a){function d(){v&&v.remove();v=T.instance({isFloat:!1,isPot:!1,width:a.size*a.W[0],height:a.size*a.W[1]})}var f=null,l=!1,m=!1,n=null,p=!1,r=!1,k=
null,q="undefined"===typeof a.preprocessing?!1:a.preprocessing,w="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(l=!0,b&&void 0!==b.de&&(a.mask=b.de+a.mask),f=T.instance({isFloat:!1,url:a.mask}));var C=!1;a.customInputShader&&(C="s50",K.Ic({name:"_",id:C,g:a.customInputShader,eh:["uSource"],precision:"lowp"}),K.J(C,[{type:"1i",name:"_",value:0}]));switch(q){case "sobel":k="s39";p=!0;break;case "meanNormalization":k="s40";p=!0;break;case "grayScale":k="s36";p=!1;break;
case "grayScaleTilt":k="s37";r=!0;p=!1;break;case "rgbGrayTilt":k="s38";r=!0;p=!1;break;case "copy":k=C?C:"s0";break;case "inputLightRegulation":k=C?C:"s36";n=$a.instance({ed:w,wd:a.size,ud:a.nBlurPass,X:!1});m=!0;break;case "inputMix0":k="none";n=ab.instance({B:w,ka:a.varianceMin,ca:a.blurKernelSizePx,gain:a.gain||1,X:!1});m=!0;break;case "inputMix1":k="none";n=bb.instance({B:w,ka:a.varianceMin,ca:a.blurKernelSizePx,gain:a.gain||1,X:!1});m=!0;break;case "inputCut4":k="none";n=gb.instance({B:w,ka:a.varianceMin,
ca:a.blurKernelSizePx,gain:a.gain||1,Ka:a.isNormalized||!1,pc:a.overlap||0,X:!1});w*=n.Le();m=!0;break;case "direct":case "none":case "abort":k="abort";break;default:k="s4"}w=Math.ceil(w);r&&K.J(k,[{name:"u29",type:"1f",value:a.tilt}]);l&&(k+="Mask");var v=null;d();var A={F:function(){return a.size},Me:function(){return w},Ub:function(){return A.F()},Se:function(){return m?n.Ia():v},Db:function(u){a.W=u;d()},P:function(u){Xa.Y();if("abort"===k)return u.h(0),u;"none"!==k&&(K.set(k),p&&K.I("u30",1/
a.size),v.L(),l&&f.h(1),U.l(!1,!1),v.h(0),u=v);m&&n.process(u)},m:function(){v.remove();l&&f.remove()}};return A}},nb={instance:function(a){function d(){if(J.za){m.input&&(m.input.remove(),m.mb.remove());var D=a.size*a.sparsity;g=Math.log(D/a.size)/Math.log(2);m.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:D*a.W[0],height:D*a.W[1],cc:g});m.mb=T.instance({isFloat:!0,isPot:!0,width:a.size*a.W[0],height:a.size*a.W[1]})}}function f(){m.qa&&m.qa.remove();m.qa=T.instance({isFloat:!0,isPot:!p,
isLinear:!p&&r.isLinear,width:a.size*a.W[0],height:a.size*a.W[1]})}function l(D){r.buffer.forEach(function(L,N){r.results[N][0]=D[0][L];r.results[N][1]=D[1][L];r.results[N][2]=D[2][L];r.results[N][3]=D[3][L]});return r.results}a.normalize=a.normalize||!1;var m={input:null,bias:null,mb:null,qa:null,oc:null,mc:null,nc:null},n=null,p=!0,r={type:"undef",D:null,isLinear:!1,buffer:[],results:[],pb:!1},k=-1,q=a.isReorganize?a.isReorganize:!1,w=a.kernelsCount?!0:!1,C=[a.Ja?"s32":"s31",a.Ja?"s34":"s33","s35"][a.shiftRGBAMode||
0],v={isEnabled:!1},A=1/a.size;a.cf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.xb.Ub(),p=!1):"full"===a.connectivityUp&&(a.sparsity=a.xb.Ub());var u={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],B=a.sparsity*a.sparsity,e=!1,H=a.size,I="";if(a.maxPooling){switch(a.maxPooling.size){case 2:I="s41";break;case 4:I="s42"}e=!0;H/=a.maxPooling.size;m.mc=T.instance({isFloat:!0,isPot:!1,width:H})}var g=-1,J=null;p&&f();m.bias=T.instance(a.bias);
var t={F:function(){return a.size},Ub:function(){return H},Yc:function(){return a.classesCount},fe:function(D){n.h(D)},pf:function(){a.remap&&a.remap.isEnabled&&(v={isEnabled:!0,ff:T.instance(a.remap.maskTexture),Na:a.remap.layers.map(function(D){return a.parent.Pe(D)}),depth:a.remap.depth})},Jf:function(){switch(a.connectivityUp){case "direct":J=ib.instance(a.connectivity);break;case "square":J=jb.instance(a.connectivity);break;case "squareFast":J=kb.instance(a.connectivity,a.activation);break;case "full":J=
lb.instance(Object.assign({Ja:a.Ja},a.connectivity));break;case "conv":k=a.kernelsCount,J=mb.instance(a.connectivity),q&&(m.oc=T.instance({width:H,isFloat:!0,isFlipY:!1,isPot:!1}))}d()},P:function(D,L){n=D;J.za?(m.input.L(),w&&m.bias.h(2),J.P(v),m.input.h(0),m.input.De(g),m.mb.L(),w?K.set("s0"):(K.set(C),K.I("u4",B),m.bias.h(1)),m.input.ge(g,0),U.l(!1,!1),K.set(u),m.qa.v(),m.mb.h(0),U.l(!1,!1)):(m.qa.L(),m.bias.h(1),J.P());if(p)return L=m.qa,e&&(m.mc.L(),L.h(0),K.set(I),K.R("u14",A,A),U.l(!1,!1),
L=m.mc),q&&(m.oc.v(),K.set("s24"),K.R("u18",k,H/k),L.h(0),U.l(!1,!1),L=m.oc),L.h(0),L;var N=m.qa;if(a.normalize||r.pb)D=a.normalize,K.set(r.pb?"s9":"s8"),K.I("u10",D?A:1),m.nc.L(),N.h(0),U.l(!1,!1),N=m.nc;D=null;switch(r.type){case "cpuRGBA2Float":N.Ob(!1);L?D=t.rf(N).then(r.D):(N=t.sf(N),r.D(N));break;case "cpuMeanFloat":N.Ob(!0);if(L)D=N.uf().then(r.D);else{N=N.vf();for(var x=0;x<N.length;++x);r.D(N)}break;case "gpuRawAvg":case "gpuRaw":N.h(0);case "none":null!==r.D&&r.D(N)}L&&null===D&&(D=Promise.resolve());
return D},Db:function(D){a.W=D;d();f()},Qf:function(D){D&&(r.type=D.vb||"none",r.D=D.ub||null,r.isLinear=D.lc?!0:!1);f();D="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var L=0,N=0,x=0;L<D;++L)r.buffer.push(N+(a.size-1-x)*a.size),r.results.push([-1,-1,-1,-1]),++N,N===a.size&&(N=0,++x);r.pb="gpuRawAvg"===r.type||"cpuMeanFloat"===r.type;if(a.normalize||r.pb)m.nc=T.instance({isFloat:!0,isPot:!0,width:a.size})},rf:function(D){return D.tf().then(l)},sf:function(D){D=
D.qc();l(D);return r.results},m:function(){for(var D in m){var L=m[D];L&&L.remove()}J&&(J.m(),J=null)}};a.xb&&t.Jf(a.xb);return t}};
function ob(a){var d=null,f=null,l=null,m=0,n=this,p=null,r={Na:[],vb:"none",lc:!1,ub:null,grid:null};this.u=function(){this.ie(p.Na);l.Qf({vb:p.vb,lc:p.lc,ub:p.ub})};this.Pe=function(k){return d[k]};this.Db=function(k){["s32","s34","s27"].forEach(function(q){K.J(q,[{type:"2f",name:"u20",value:k}])});d&&d.forEach(function(q){q.Db(k)})};this.ie=function(k){var q=null;m=k.length;var w=null!==p.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),C=w?p.grid:[1,1];w&&this.Db(C);d=k.map(function(v,A){v=
Object.assign({},v,{index:A,parent:n,xb:q,cf:A===m-1,Ja:w,W:C});return q=A=0===A?hb.instance(v):nb.instance(v)});f=d[0];l=d[m-1];d.forEach(function(v,A){0!==A&&v.pf()})};this.P=function(k){k.h(0);var q=k;d.forEach(function(w){q=w.P(q,!1)});return q};this.Ne=function(){return f.Me()};this.Te=function(){return l.F()};this.Ia=function(){return l.Se()};this.Yc=function(){return l.Yc()};this.m=function(){d&&(d.forEach(function(k){k.m()}),l=f=d=null,m=0)};"undefined"!==typeof a&&(p=Object.assign({},r,a),
this.u())}
var ib={instance:function(a){var d=T.instance(a.weights);return{za:!0,ib:function(){return 1},m:function(){d.remove()},Ue:function(){return d},P:function(){K.set("s30");d.h(1);U.l(!1,!1)}}}},lb={instance:function(a){var d=a.fromLayerSize,f=T.instance(a.weights),l=a.Ja?"s27":"s26";return{za:!0,ib:function(){return d},m:function(){f.remove()},P:function(m){if(m.isEnabled){K.set("s28");m.ff.h(3);for(var n=Math.min(m.Na.length,m.depth),p=0;p<n;++p)m.Na[p].fe(4+p)}else K.set(l);K.I("u8",a.toLayerSize);K.I("u9",
a.fromLayerSize);f.h(1);U.l(!1,!1)}}}},jb={instance:function(a){for(var d=a.fromLayerSize,f=a.toLayerSize,l=a.toSparsity,m=l*f,n=m/d,p=d/f,r=0,k=0,q=0,w=Array(l*f*l*f*4),C=Array(l*f*l*f*4),v=Array(d*d),A=0;A<v.length;++A)v[A]=0;A=Math.floor(l/2);for(var u=.5/f,B=.5/d,e=.5/m,H=0;H<f;++H)for(var I=Math.round(H*p),g=0;g<f;++g){var J=Math.round(g*p),t=H/f,D=g/f;t+=u;D+=u;for(var L=0;L<l;++L){var N=I+L-A;0>N&&(N+=d);N>=d&&(N-=d);for(var x=0;x<l;++x){var S=r/m,O=k/m,c=J+x-A;0>c&&(c+=d);c>=d&&(c-=d);var h=
N/d,E=c/d;O=1-O-1/m;h+=B;E+=B;S+=e;O+=e;var P=H*l+L,M=g*l+x;M=f*l-M-1;P=M*f*l+P;w[4*P]=S;w[4*P+1]=O;w[4*P+2]=h;w[4*P+3]=E;E=v[c*d+N]++;P=E%n;h=N*n+P;c=c*n+(E-P)/n;c=d*n-1-c;c=c*d*n+h;C[4*c]=S;C[4*c+1]=O;C[4*c+2]=t;C[4*c+3]=D;++r>=m&&(r=0,++k);++q}}}v=null;var ea=T.instance(a.weights);delete a.weights.data;var ha=T.instance({width:m,isFloat:!0,array:new Float32Array(C),isPot:!0});C=null;var ma=T.instance({width:m,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{za:!0,ib:function(){return n},
m:function(){ha.remove();ma.remove();ea.remove()},P:function(){K.set("s25");ea.h(1);ma.h(2);U.l(!1,!1)}}}},mb={instance:function(a){var d=a.kernelsCount,f=a.toSparsity,l=f*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],n=T.instance(a.weights);return{za:!0,ib:function(){return l},Dg:function(){return f},Ue:function(){return n},m:function(){n.remove()},P:function(){K.set("s29");K.Lf("u28",m);K.I("u26",d);K.I("u27",f);K.I("u8",a.toLayerSize);K.I("u9",a.fromLayerSize);n.h(1);U.l(!1,!1)}}}},kb={instance:function(a,
d){var f=a.fromLayerSize,l=a.toLayerSize,m=a.toSparsity,n=a.stride?a.stride:1,p=m*l/f,r=l<f,k=f/l,q=T.instance(a.weights),w="s51"+[f.toString(),l.toString(),m.toString(),n.toString(),d].join("_");K.Ae(w)||(a=Ka(d),l=[{type:"1f",name:"u8",value:l},{type:"1f",name:"u32",value:n}],r&&l.push({type:"1f",name:"u9",value:f}),f=[(r?p:m).toFixed(1),a],r&&f.push(k.toFixed(1)),K.We(r?"s47":"s46",w,f),K.J(w,l.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{za:!1,ib:function(){return p},m:function(){q.remove()},P:function(){K.set(w);q.h(3);U.l(!1,!1)}}}},$a={instance:function(a){var d=a.ud?a.ud:3,f=a.ed?a.ed:64,l=a.wd?a.wd:64,m=a.X?!0:!1;a={isFloat:!1,width:f,isPot:!1,isFlipY:!1};var n=T.instance(a),p=T.instance(a),r=T.instance(a),k=T.instance(a),q=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),w=1/f;return{process:function(C){K.set("s43");k.v();U.l(m,!1);K.set("s44");for(var v=0;v<d;++v)n.v(),K.R("u14",w,0),U.l(m,!1),r.v(),k.h(0),U.l(m,
!1),p.v(),n.h(0),K.R("u14",0,w),U.l(m,!1),k.v(),r.h(0),U.l(m,!1),v!==d-1&&p.h(0);K.set("s45");q.v();C.h(0);p.h(1);k.h(2);U.l(m,!1);q.h(0)},Ia:function(){return q}}}},ab={instance:function(a){function d(w){return T.instance({isFloat:w,width:f.B,isPot:!1,isFlipY:!1})}var f=Object.assign({ka:.1,ca:9,B:128,gain:1,X:!1},a),l=d(!1),m=[d(!1),d(!1),d(!1)],n=[d(!1),d(!1),d(!1)],p=d(!0),r=[l,n[0],n[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((f.ca-1)/2).toFixed(2)).replace("2.2222",(1/f.B).toFixed(6));var k="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",f.ka.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),q={u1:0};K.Ua([{id:"s53",
name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:q,i:["u1"],precision:"lowp"},{id:"s54",name:"_",g:a,j:q,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",g:k,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){K.set("s53");l.L();U.l(f.X,!1);K.set("s54");for(var w=0;3>w;++w)K.R("u33",1,0),m[w].v(),r[w].h(0),
U.l(!1,!1),K.R("u33",0,1),n[w].v(),m[w].h(0),U.l(!1,!1);K.set("s55");p.v();l.h(0);n[0].h(1);n[1].h(2);n[2].h(3);U.l(!1,!1);p.h(0)},Ia:function(){return p}}}},bb={instance:function(a){function d(q){return T.instance({isFloat:q,width:f.B,isPot:!1,isFlipY:!1})}var f=Object.assign({ka:.1,ca:9,B:128,gain:1,X:!1},a),l=d(!1),m=d(!1),n=d(!1),p=d(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((f.ca-1)/2).toFixed(2)).replace("2.2222",(1/f.B).toFixed(6));var r="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",f.ka.toFixed(4)).replace("2.2222",f.gain.toFixed(4)),k={u1:0};K.Ua([{id:"s56",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:k,i:["u1"],precision:"lowp"},{id:"s57",name:"_",g:a,j:k,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",g:r,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){K.set("s56");l.L();U.l(f.X,!1);K.set("s57");K.R("u33",1,0);m.v();l.h(0);U.l(!1,!1);K.R("u33",0,1);n.v();m.h(0);U.l(!1,!1);K.set("s58");p.v();l.h(0);n.h(1);U.l(!1,!1);p.h(0)},Ia:function(){return p}}}},gb={instance:function(a){function d(w){return T.instance({isFloat:w,width:f.B,isPot:!1,isFlipY:!1})}var f=Object.assign({ka:.1,
ca:9,B:128,gain:1,pc:0,Ka:!1,X:!1},a),l=d(!1),m=null,n=null,p=null;f.Ka&&(m=d(!1),n=d(!1),p=d(!0));a={u1:0};var r=[{id:"s59",name:"_",g:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",f.pc.toFixed(4)),j:a,i:["u1"],
precision:"lowp"}];if(f.Ka){var k="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((f.ca-1)/2).toFixed(2)).replace("2.2222",(1/f.B).toFixed(6)),q="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
f.ka.toFixed(4)).replace("2.2222",f.gain.toFixed(4));r.push({id:"s60",name:"_",g:k,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",g:q,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}K.Ua(r);return{process:function(){K.set("s59");l.L();U.l(f.X,!1);f.Ka?(K.set("s60"),K.R("u33",1,0),m.v(),l.h(0),U.l(!1,!1),K.R("u33",0,1),n.v(),m.h(0),U.l(!1,!1),K.set("s61"),p.v(),l.h(0),n.h(1),U.l(!1,!1),p.h(0)):l.h(0)},Le:function(){return 2-f.pc},Ia:function(){return f.Ka?p:l}}}};
function pb(a,d){a[d]=!0;a.setAttribute(d,"true")}function qb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function rb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function sb(a){if(!a)return a;var d=null;if(a.video){var f=function(l){return l&&"object"===typeof l?Object.assign({},l):l};d={};"undefined"!==typeof a.video.width&&(d.width=f(a.video.width));"undefined"!==typeof a.video.height&&(d.height=f(a.video.height));"undefined"!==typeof a.video.facingMode&&(d.facingMode=f(a.video.facingMode))}d={audio:a.audio,video:d};"undefined"!==typeof a.deviceId&&tb(d,a.deviceId);return d}
function tb(a,d){d&&(a.video=a.video||{},a.video.deviceId={exact:d},a.video.facingMode&&delete a.video.facingMode)}function ub(a){var d=a.video.width;a.video.width=a.video.height;a.video.height=d;return a}
function wb(a){function d(v){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(A,u){return Math.abs(A-v)-Math.abs(u-v)})}function f(v){var A=sb(a);v=v(A);m.push(v);l(v)}function l(v){if(v.video&&v.video.facingMode&&v.video.facingMode.exact){var A=v.video.facingMode.exact;v=sb(v);delete v.video.facingMode.exact;v.video.facingMode.ideal=A;m.push(v)}}var m=[];if(!a||!a.video)return m;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var n=
d(a.video.width.ideal).slice(0,3),p=d(a.video.height.ideal).slice(0,3),r={},k=0;for(r.na=void 0;k<n.length;r={na:r.na},++k){r.na=n[k];var q={},w=0;for(q.ma=void 0;w<p.length;q={ma:q.ma},++w)if(q.ma=p[w],r.na!==a.video.width.ideal||q.ma!==a.video.height.ideal){var C=Math.max(r.na,q.ma)/Math.min(r.na,q.ma);C<4/3-.1||C>16/9+.1||f(function(v,A){return function(u){u.video.width.ideal=v.na;u.video.height.ideal=A.ma;return u}}(r,q))}}}f(function(v){return ub(v)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&f(function(v){delete v.video.width.ideal;delete v.video.height.ideal;return v}),f(function(v){delete v.video.width;delete v.video.height;return v}));a.video.facingMode&&(f(function(v){delete v.video.facingMode;return v}),a.video.width&&a.video.height&&f(function(v){ub(v);delete v.video.facingMode;return v}));m.push({audio:a.audio,video:!0});return m}
function xb(a){a.volume=0;pb(a,"muted");if(qb()){if(1===a.volume){var d=function(){a.volume=0;window.removeEventListener("mousemove",d,!1);window.removeEventListener("touchstart",d,!1)};window.addEventListener("mousemove",d,!1);window.addEventListener("touchstart",d,!1)}setTimeout(function(){a.volume=0;pb(a,"muted")},5)}}
function yb(a,d,f,l){function m(p){n||(n=!0,f(p))}var n=!1;navigator.mediaDevices.getUserMedia(l).then(function(p){function r(){setTimeout(function(){if(a.currentTime){var q=a.videoHeight;if(0===a.videoWidth||0===q)m("VIDEO_NULLSIZE");else{q={le:null,Pf:null,gf:null};try{var w=p.getVideoTracks()[0];w&&(q.gf=w,q.le=w.getCapabilities(),q.Pf=w.getSettings())}catch(C){}n||d(a,p,q)}}else m("VIDEO_NOTSTARTED")},700)}function k(){a.removeEventListener("loadeddata",k,!1);var q=a.play();xb(a);"undefined"===
typeof q?r():q.then(function(){r()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=p:(a.src=window.URL.createObjectURL(p),a.videoStream=p);xb(a);a.addEventListener("loadeddata",k,!1)}).catch(function(p){m(p)})}
function zb(a,d,f){var l=rb()?document.createElement("video"):!1;l?rb()?(pb(l,"autoplay"),pb(l,"playsinline"),f&&f.audio?l.volume=0:pb(l,"muted"),Ab(f).then(function(){yb(l,a,function(){function m(p){if(0===p.length)d("INVALID_FALLBACKCONSTRAINTS");else{var r=p.shift();yb(l,a,function(){m(p)},r)}}var n=wb(f);m(n)},f)})):d&&d("MEDIASTREAMAPI_NOTFOUND"):d&&d("VIDEO_NOTPROVIDED")}
function Ab(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var d=a.video.facingMode;d=d.exact||d.ideal;if(!d)return Promise.resolve("NO_FACINGMODE");var f={user:[],environment:["camera2 0"]}[d];return f&&0!==f.length?new Promise(function(l){Bb(function(m){m?(m=m.find(function(n){var p=n.label;return p?f.some(function(r){return p.includes(r)}):!1}))?(a.video.deviceId={exact:m.deviceId},l("SUCCESS")):
l("NO_PREFERRED_DEVICE_FOUND"):l("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Bb(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(d){(d=d.filter(function(f){return f.kind&&-1!==f.kind.toLowerCase().indexOf("video")&&f.label&&f.deviceId}))&&d.length&&0<d.length?a(d,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}
var Cb=function(){function a(B,e,H,I,g,J,t){if(!A)if(t===J.length)g();else{switch(J[t]){case "A":H();break;case "D":B();break;case "S":e().then(function(D,L){u.Ud();a(B,e,H,L?null:I,g,J,++t)}).catch(function(D){console.log("An error occurred in the WebAR loop: ",D);g()});return;case "R":I&&I()}a(B,e,H,I,g,J,++t)}}var d={n:5,ec:1,sd:0,gb:[35,49],ab:[2,200],k:.7,Xf:200,mf:.05},f=-1,l=null,m=-1,n=-1,p=0,r=-1,k=-1,q=0,w=0,C=d.ab[1],v=Math.log(2),A=!0,u={Qe:function(){switch(f){case -1:return-1;case 0:return k+
l.sd;case 1:return q}},Fe:function(B){return Math.pow(Math.min(Math.max(r,0),l.n-1)/(l.n-1),B||1)},u:function(B){l=Object.assign({},d,B);r=k=l.ec;f=0;u.reset()},Ud:function(B){B=("undefined"===typeof B?Date.now():B)||0;var e=Math.min(Math.max(B-w,l.ab[0]),l.ab[1]);C=e;w=B;var H=-1===m?0:l.k;m=Math.min(Math.max(1E3/e,5),120)*(1-H)+m*H;B-n>l.Xf&&5<++p&&(e=l.k,r=r*(1-e)+(m<l.gb[0]?k-1:m>l.gb[1]?k+1:k)*e,Math.abs(r-k)>1-l.mf&&(e=Math.min(Math.max(Math.round(r),0),l.n-1),e!==k&&(r=k=e,m=(l.gb[1]-l.gb[0])/
2)),n=B)},Gd:function(B,e,H,I,g,J){A=!1;a(B,e,H,I,g,J,0)},stop:function(){A=!0},Hf:function(B){q=B;f=1},Wf:function(){f=0;u.reset()},reset:function(){C=d.ab[1];n=m=-1;p=0},dh:function(B,e,H){H=Math.exp(-v*C/H);return(1-H)*B+H*e},ug:function(){return C}};return u}(),Db=function(){function a(){f(B+A.dc);e.port.postMessage("DONE")}function d(){J.Va=0===A.ta?I(f):I(l)}function f(x){g.wa&&null!==u&&(x-=B,x=Math.min(Math.max(x,A.Nc[0]),A.Nc[1]),B+=x,n(),t.isEnabled&&t.La&&g.$&&B-t.$b>A.Fc&&(q(),t.$b=B),
u(B))}function l(x){g.wa&&(J.timeout=setTimeout(f.bind(null,x),A.ta))}function m(){u=null;g.wa=!1;n()}function n(){J.Va&&(window.cancelAnimationFrame(J.Va),J.Va=null);J.timeout&&(window.clearTimeout(J.timeout),J.timeout=null)}function p(x){x&&!g.$?(g.$=!0,H&&Cb.Wf(),e.port.postMessage("STOP"),Wa.Vd(!0),d()):!x&&g.$&&(g.$=!1,H&&Cb.Hf(1),Wa.Vd(!1),e.port.postMessage("START"))}function r(x){x.target.hidden?L():D()}function k(x,S,O){S=x.createShader(S);x.shaderSource(S,O);x.compileShader(S);return S}
function q(){t.La=!1;var x=t.fa,S=t.kb,O=t.lb,c=t.V;x.uniform1f(t.bd,Math.random());t.xa?S.beginQueryEXT(c,O):x.beginQuery(c,O);x.drawElements(x.POINTS,1,x.UNSIGNED_SHORT,0);t.xa?S.endQueryEXT(c):x.endQuery(c);Wa.flush();C().then(function(h){0===h||isNaN(h)?(t.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",h)):(h=A.Yd*A.Ec*1E3/h,t.Eb=(t.Eb+1)%A.Ca,t.bc[t.Eb]=h,++t.od>A.Ca&&(t.sb.set(t.bc),t.sb.sort(function(E,P){return E-P}),
h=t.sb[Math.floor(A.Ca/2)],t.cb=Math.max(t.cb,h),A.Dc(h/t.cb)),t.La=!0)}).catch(function(){t.La=!0})}function w(x){var S=t.fa,O=t.kb,c=t.lb;c=t.xa?O.ng(c,O.QUERY_RESULT_AVAILABLE_EXT):S.getQueryParameter(c,S.QUERY_RESULT_AVAILABLE);S=S.getParameter(O.GPU_DISJOINT_EXT);c?x(!S):setTimeout(w.bind(null,x),.1)}function C(){return new Promise(function(x,S){w(function(O){if(O){O=t.fa;var c=t.kb,h=t.lb;O=t.xa?c.getQueryObjectEXT(h,c.QUERY_RESULT_EXT):O.getQueryParameter(h,O.QUERY_RESULT);x(O)}else S()})})}
var v={ld:!0,Nc:[1,200],dc:20,ta:0,Ec:50,Yd:240,Fc:3E3,Ca:3,Dc:null},A=null,u=null,B=0,e=null,H=!1,I=null,g={pa:!1,$:!0,Zb:!1,Yb:!1,Xb:!1,wa:!1},J={Va:null,timeout:null},t={isEnabled:!1,La:!1,fa:null,kb:null,lb:null,V:null,bd:null,xa:!0,$b:0,od:0,bc:null,sb:null,Eb:0,cb:0},D=p.bind(null,!0),L=p.bind(null,!1),N={u:function(x){A=Object.assign(v,x);Object.assign(g,{$:!0,pa:!0,wa:!1});I=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==A.Dc){x=document.createElement("canvas");x.setAttribute("width",
"1");x.setAttribute("height","1");var S={antialias:!1};x=x.getContext("webgl2",S)||x.getContext("webgl",S);if(S=x.getExtension("EXT_disjoint_timer_query")||x.getExtension("EXT_disjoint_timer_query_webgl2")){t.fa=x;t.kb=S;t.isEnabled=!0;t.xa=S.beginQueryEXT?!0:!1;var O=k(x,x.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),c=k(x,x.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
A.Ec.toString())),h=x.createProgram();x.attachShader(h,O);x.attachShader(h,c);x.linkProgram(h);O=x.getAttribLocation(h,"a0");t.bd=x.getUniformLocation(h,"u39");x.useProgram(h);x.enableVertexAttribArray(O);h=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,h);x.bufferData(x.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),x.STATIC_DRAW);x.vertexAttribPointer(O,4,x.FLOAT,!1,16,0);h=x.createBuffer();x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,h);x.bufferData(x.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),x.STATIC_DRAW);
x.disable(x.DEPTH_TEST);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.viewport(0,0,1,1);h=t.xa?S.createQueryEXT():x.createQuery();t.lb=h;t.V=S.TIME_ELAPSED_EXT||x.TIME_ELAPSED;t.$b=-A.Fc;t.bc=new Float32Array(A.Ca);t.sb=new Float32Array(A.Ca);t.cb=0;t.Eb=0;t.od=0;t.La=!0}}if(A.ld){x=!1;try{if("undefined"===typeof SharedWorker){var E=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
A.dc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),P=new Worker(E);P.addEventListener("message",a);e={yd:P,port:P};g.Zb=!0}else{var M=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
A.dc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ea=new SharedWorker(M);ea.port.start();ea.port.addEventListener("message",a);e={yd:ea,port:ea.port};g.Yb=!0}x=!0}catch(ha){}x&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",r):(window.addEventListener("blur",L),window.addEventListener("focus",D)),window.addEventListener("pagehide",
L),window.addEventListener("pageshow",D),g.Xb=!0)}H="undefined"!==typeof Cb},m:function(){m();g.Xb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",r):(window.removeEventListener("blur",L),window.removeEventListener("focus",D)),window.removeEventListener("pagehide",L),window.removeEventListener("pageshow",D),g.Xb=!1);g.Yb?(e.port.close(),g.Yb=!1):g.Zb&&(e.yd.terminate(),g.Zb=!1);Object.assign(g,{$:!0,pa:!1,wa:!1});u=null},Qg:function(){return g.$},update:function(x){Object.assign(A,
x)},Gd:function(x){g.pa||N.u({});n();g.wa=!0;u=x;g.$&&d()},stop:m};return N}(),Eb=function(){function a(C,v){var A=C[0]-.5;C=C[1]-.5;var u=v[0]-.5;v=v[1]-.5;return A*A+C*C-(u*u+v*v)}var d={vd:4,wb:[1.5,1.5,2],aa:[.1,.1,.1],Id:1,B:-1,ha:-1,Sf:2,lf:1,sc:!0,xe:.8},f=null,l=[],m=[],n=[],p=[0],r=[.5,.5,1],k=null,q=0,w=[0,0,0];return{u:function(C){f=Object.assign({},d,C);l.splice(0);m.splice(0);n.splice(0);q=0;C=f.wb[0]*f.aa[0];var v=f.wb[1]*f.aa[1],A=1/(1+f.wb[2]*f.aa[2]),u=f.Id*Math.min(f.B,f.ha),B=u/
f.B;u/=f.ha;var e=.5*f.xe;e*=e;for(var H=0;H<f.vd;++H){var I=[];m.push(I);var g=Math.pow(A,H),J=B*g,t=u*g;g=J*f.lf;n.push(g);var D=J*C,L=t*v;J/=2;t/=2;for(var N=1+(1-J-J)/D,x=1+(1-t-t)/L,S=0;S<x;++S)for(var O=t+S*L,c=O-.5,h=0;h<N;++h){var E=J+h*D,P=E-.5;P*P+c*c>e||(E=[E,O,g],l.push(E),I.push(E))}f.sc&&I.sort(a);k=l}f.sc&&l.sort(a)},get:function(C){var v=k.length;if(0===v)return r;for(;C>=p.length;)p.push(0);p[C]>=v&&(p[C]=0);var A=k[Math.floor(p[C])%v];p[C]=(p[C]+1/f.Sf)%v;if(0===q)return A;w[0]=
A[0];w[1]=A[1];w[2]=q;return w},Sg:function(C){C>=p.length||(p[C]=Math.floor(Math.random()*k.length))},Vg:function(C){q=C;if(0===q)k=l;else{for(var v=n.length,A=v-1,u=0;u<v;++u)if(n[u]<=C){A=u;break}k=m[A]}},reset:function(){for(var C=l.length/p.length,v=0;v<p.length;++v)p[v]=Math.floor(v*C);q=0;k=l}}}(),Gb={Rb:function(){return Date.now()},qg:function(){return performance.now()}},Hb=function(){var a=0,d=null,f=null,l=null,m=null;return{u:function(n,p){a=n.length;d=p;f=n;l=new Float32Array(a);m=new Float32Array(a)},
Re:function(){return m},Rf:function(n,p,r){n.forEach(function(k,q){var w=Math.min(1,f[q]*r*(p+.33*(1-p)));k=w*k+(1-w)*l[q];l[q]=k;k=d[q](k);k=Math.min(Math.max(k,0),1);m[q]=k})}}}(),Y={VERSION:"1.3.7",sa:[],Ib:!1,Jb:!1,Hb:!1,Ta:!0,Sa:!1,ready:!1,initialized:!1},Ib={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",
Gc:"../../",ta:0,width:512,height:512,Tf:40,Jd:[.6,5.8],aa:[.07,.07,.15],Ef:.7,Cf:2,Df:[2,2,2],fb:!0,Ce:[.03,.005],threshold:.8,Sd:.7,Td:.03,we:.06,Be:.02,ae:[1,.05],$f:10,Xe:!1,Gb:[2,7],N:{cd:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},hc:11,td:1,hf:1,be:[.1,.01],Af:[.4,-.7,-.4],Bf:[.3,0,0],ve:!1,ce:.001,Jc:[Math.PI/10,Math.PI/6],Ad:[.1,.4],Bd:[.009,.02],Cd:[.1,.2],fc:5,dd:.1,$d:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],jf:[Ja.bind(null,.1,.7),Ja.bind(null,.1,.7),Ja.bind(null,.05,.4),Ja.bind(null,
.05,.4),Ja.bind(null,.05,.6),Ja.bind(null,.05,.6),Ja.bind(null,.1,.5),Ja.bind(null,.3,.7),Ja.bind(null,.7,.8),Ja.bind(null,.7,.8),Ja.bind(null,.15,.6)]};Y.get_nMorphs=function(){return b.hc};var Jb=null,Kb=null,Lb=null,Mb=[],Nb=b.threshold;
function Ob(){function a(){1===++ea&&(Hb.u(b.$d,b.jf),d(),Y.ready=!0,Y.sa.forEach(function(z){z()}),Y.sa.splice(0,Y.sa.length),f(),ea=0)}function d(){g=new Float32Array(b.hc);J=new Float32Array(b.hc);t=new Uint8Array(e*e*4);Y.get_morphTargetInfluences=function(){return g};Y.get_morphTargetInfluencesStabilized=function(){return Hb.Re()};Y.set_morphUpdateCallback=function(z){D=z};Y.get_rotation=function(){return x};Y.get_positionScale=function(){var z=H.Qd.Oe();z.Ob(!1);z=z.qc();c[0]=1-z[1][0];c[1]=
z[2][0];c[2]=z[3][0]*E.K[0];return c};Y.get_rotationStabilized=function(){return O};Y.switch_sleep=function(z){ma!==ha.vc||z?ma=z?ha.vc:ha.play:f()};Y.on_detect=function(z){z(y.Z);y.kc.push(z)};Y.is_detected=function(){return y.Z};Y.set_animateDelay=function(z){u=z;Db.update({ta:u})}}function f(){ma!==ha.play&&(ma=ha.play,Db.stop(),l())}function l(){var z,Q;return Ba(new va(new oa(function(aa){switch(aa.ja){case 1:a:{if("VIDEO"===M.element.nodeName){var R=M.element.currentTime-za;0>R&&(za=M.element.currentTime);
if(1E3*R<b.$f)break a;za+=R}M.Aa.refresh();R=xa.$c();R[0]===M.K[0]&&R[1]===M.K[1]||q()}z=Cb.Qe();Q=0;case 2:if(!(Q<z)){aa.ja=4;break}R=H;var na=B;K.set("s63");Xa.Y();R.ob.L();M.Aa.h(0);R.Ab.h(1);b.fb&&K.I("u40",h);U.l(!1,!1);R.ob.h(0);na.P(R.ob);b.Xe?R=T.yf(L,t).then(m):(T.xf(L,t),m(),R=Promise.resolve());aa.ja=3;return{value:R};case 3:++Q;aa.ja=2;break;case 4:Ib.disableRendering||(R=H,Xa.Y(),I.L(),K.set("s66"),b.fb&&K.I("u40",h),R.Ab.h(0),U.l(!1,!1)),R=Cb.Fe(),P=3*(1-R)+1*R,Cb.Ud(),Y.Ta&&(Xa.Vf(),
K.set("s62"),M.Aa.h(0),U.l(!1,!1),F.enable(F.BLEND),F.blendFunc(F.SRC_ALPHA,F.ONE),I.h(0),U.l(!1,!1),F.disable(F.BLEND)),F.flush(),ma!==ha.vc&&Db.Gd(l),aa.ja=0}})))}function m(){r();if(!b.ve&&y.Z){for(var z=0,Q=0;3>Q;++Q)z=p(Q+b.N.rotation[0],b.N.rotation[1]),z=(2*z-1)*b.Af[Q],z+=b.Bf[Q],N[Q]=z;b.fb&&(Q=Da(b.Ce,ba.T),h=h*(1-Q)+(-z+h)*Q)}n();z=Gb.Rb();Q=Math.max(1,z-ba.qd);var aa=p(b.N.quality[0],b.N.quality[1]);ba.zd=Ja(b.Ad[0],b.Ad[1],aa);aa=p(b.N.position[0],b.N.position[1]);var R=p(b.N.position[0]+
1,b.N.position[1]),na=p(b.N.position[0]+2,b.N.position[1]);ba.Hd=1-Ja(b.Cd[0],b.Cd[1],Math.sqrt(aa*aa+R*R+na*na)/Q);aa=ba.ya[0]-N[0];R=ba.ya[1]-N[1];na=ba.ya[2]-N[2];Q=Math.sqrt(aa*aa+R*R+na*na)/Q;ba.ya[0]=N[0];ba.ya[1]=N[1];ba.ya[2]=N[2];ba.Dd=1-Ja(b.Bd[0],b.Bd[1],Q);ba.T=ba.zd*ba.Hd*ba.Dd;ba.qd=z;ba.pd[ba.ac]=ba.T;ba.ac=(ba.ac+1)%b.fc;for(z=0;z<b.fc;++z)ba.T=Math.min(ba.pd[z],ba.T);Hb.Rf(g,ba.T,P,J);D&&D(ba.T,P);if(y.Z){z=P*Da(b.be,ba.T);for(Q=0;3>Q;++Q)x[Q]=z*N[Q]+(1-z)*x[Q],O[Q]=x[Q];O[2]-=h}else z=
Gb.Rb()*b.ce,S[0]=b.Jc[0]*Math.sin(z),S[1]=b.Jc[1]*Math.cos(z),O[0]=S[0],O[1]=S[1],O[2]=S[2]}function n(){var z=p(b.N.cd[0],b.N.cd[1]);y.qb=b.dd*z+(1-b.dd)*y.qb;y.qb>b.Sd+b.Td&&!y.Z?(y.kc.forEach(function(Q){Q(!0)}),y.Z=!0):y.qb<b.Sd-b.Td&&y.Z&&(y.kc.forEach(function(Q){Q(!1)}),y.Z=!1,h=0)}function p(z,Q){z+=e*Q;return(t[4*z]+t[4*z+1]+t[4*z+2]+t[4*z+3])/1020}function r(){g.forEach(function(z,Q){if(y.Z){var aa=(b.td+Q)%e,R=b.hf+Math.floor((b.td+Q)/e);R=e-1-R;aa+=e*R;R=t.slice(4*aa,4*aa+4);aa=(R[0]+
R[1]+R[2]+R[3])/1020;R=b.Be*Math.sqrt((R[0]*R[0]+R[1]*R[1]+R[2]*R[2]+R[3]*R[3])/1020-aa*aa);g[Q]=z>aa-R&&z<aa+R?z:aa}else g[Q]=0})}function k(z){B=new ob({Na:z.layers,vb:"gpuRaw",ub:function(Q){var aa=H;aa.Ab.Md(1);F.viewport(0,0,1,1);K.set("s64");b.fb&&K.I("u40",h);K.I("u41",ba.T);K.Mf("u42",Eb.get(0));U.l(!1,!1);aa.Qd.Md(1);K.set("s65");K.I("u41",ba.T);aa.Ab.h(0);U.l(!1,!1);L=Q}});z=B.Ne();z!==A&&(A=z,w(),H.ob.resize(A,A),C());e=B.Te();a()}function q(){var z=xa.$c();M.K[0]=z[0];M.K[1]=z[1];Ya.hb().width=
z[0];Ya.hb().height=z[1];b.width=z[0];b.height=z[1];z=M.Zf;var Q=M.K[1]/M.K[0],aa=Ya.U()/Ya.F();Q>aa?1>=Q?z[0]*=Q:z[1]/=Q:(z[0]*=Q,Q=1/aa,z[0]*=Q,z[1]*=Q);z[1]*=aa;K.J("s66",[{name:"u43",type:"1f",value:aa}]);M.C[0]=0;M.C[1]=0;M.C[2]=0;M.C[3]=0;switch(Ib.rotate){case 0:M.C[0]=z[0];M.C[3]=z[1];break;case 180:M.C[0]=-z[0];M.C[3]=-z[1];break;case 90:M.C[1]=z[0];M.C[2]=-z[1];break;case -90:M.C[1]=-z[0],M.C[2]=z[1]}z=[{type:"mat2",name:"u44",value:M.C}];K.J("s63",z);K.J("s62",z);K.J("s66",[{type:"mat2",
name:"u44",value:90===Math.abs(Ib.rotate)?[0,-M.C[1],-M.C[2],0]:M.C}])}function w(){E.B=b.width;E.ha=b.height;Eb.u({wb:b.Df,vd:b.Cf,B:E.B,ha:E.ha,Id:b.Ef,aa:b.aa,sc:!0});E.K=[1,E.B/E.ha]}function C(){K.J("s62",[{type:"1i",name:"u1",value:0}]);K.J("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u40",value:0},{type:"2f",name:"u46",value:E.K}]);K.J("s66",[{type:"1i",name:"u45",value:0},{type:"2f",name:"u46",value:E.K},{type:"1f",name:"u40",value:0},{type:"3f",name:"u47",
value:[0,.5,1]}]);K.J("s64",[{type:"1i",name:"u48",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u49",value:b.Jd[0]},{type:"1f",name:"u50",value:b.Jd[1]},{type:"1f",name:"u51",value:b.Tf},{type:"1f",name:"u52",value:Nb},{type:"1f",name:"u53",value:b.we},{type:"1f",name:"u40",value:0},{type:"3f",name:"u54",value:[b.aa[0]*E.K[0],b.aa[1]*E.K[1],b.aa[2]]}]);K.J("s65",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u12",value:1},{type:"2f",name:"u55",value:b.ae}])}function v(z){var Q=new Float32Array([0,
.5,.5,0]);z.ob=T.instance({isPot:!0,isFloat:!1,width:A});Q={width:1,height:1,isFloat:!0,isPot:!1,array:Q};z.Ab=Za.instance(Q);z.Qd=Za.instance(Q)}var A=64,u=b.ta,B=null,e=0,H={},I=null,g=null,J=null,t=null,D=null,L=null,N=[0,0,0],x=[0,0,0],S=[0,0,0],O=[0,0,0],c=[0,0,0],h=0,E={K:null,B:-1,ha:-1},P=1,M={Zf:[.5,.5],C:[.5,0,0,.5],element:null,Aa:null,K:[-1,-1]},ea=0,ha={re:-4,kf:-3,Rg:-2,vc:-1,play:0},ma=ha.kf,y={qb:0,Z:!1,kc:[]},ba={T:1,Hd:1,zd:1,Dd:1,ya:[0,0,0],qd:Gb.Rb(),pd:new Float32Array(b.fc),
ac:0},za=0,xa={u:function(){M.Aa=T.instance({G:M.element,isPot:!1,isFloat:!1,isFlipY:!0});I=T.instance({isPot:!1,isFloat:!1,width:E.B,height:E.ha});v(H);Db.u({ld:!1,ta:u});Cb.u({ec:0,n:b.Gb[1]-b.Gb[0]+1,sd:b.Gb[0]});Lb?k(Lb):Ea(function(z){z=JSON.parse(z);k(z)})},m:function(){Db.stop();B&&(B.m(),B=null);ma=ha.re},me:function(z){Y.Ib&&Y.Ib();var Q={video:{facingMode:{ideal:Ib.facingMode},width:{min:Ib.minWidth,max:Ib.maxWidth,ideal:Ib.idealWidth},height:{min:Ib.minHeight,max:Ib.maxHeight,ideal:Ib.idealHeight}},
audio:Ib.isAudio};tb(Q,Ib.deviceId);zb(function(aa,R){Jb=R;Y.Jb&&Y.Jb();z(aa)},function(){window.Fb&&window.Fb("WEBCAM_UNAVAILABLE")},Q)},rd:function(z,Q){K.Ua([{id:"s62",name:"_",Ba:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",Wa:["a0"],Fa:[2],g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u44"],precision:"lowp"},{id:"s63",name:"_",g:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
Ba:"attribute vec2 a0;uniform sampler2D u45;uniform mat2 u44;uniform vec2 u46;uniform float u40;const vec2 e=vec2(.25,.5),f=vec2(.5);varying vec2 vv0;void main(){vec4 a=texture2D(u45,e);vec2 d=a.gb,h=a.a*u46;float b=cos(u40),c=sin(u40);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u44*k,gl_Position=vec4(a0,0.,1.);}",Wa:["a0"],Fa:[2],i:["u1","u45","u46","u44","u40"],precision:"lowp"},{id:"s64",name:"_",Ba:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",g:"uniform sampler2D u48,u45;uniform vec3 u42,u54;uniform float u49,u50,u51,u52,u41,u53,u40;varying vec2 vv0;const vec4 e=vec4(.25);void main(){vec4 h=texture2D(u48,vec2(.4375,.9375)),i=texture2D(u48,vec2(.5625,.9375));float j=dot(h-i,e);bool k=j>u52;vec4 a=texture2D(u45,vec2(.5,.5));k?a.r=2.:a.r>u51?a.r=0.:a.r>1.9&&(a.a>u50||a.a<u49)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u42,a.r=1.;else{float l=dot(e,texture2D(u48,vec2(.0625,.9375))),m=dot(e,texture2D(u48,vec2(.1875,.9375))),d=dot(e,texture2D(u48,vec2(.3125,.9375))),f=cos(u40),g=sin(u40);vec2 c=mat2(f,g,-g,f)*vec2(l,m);float b;a.r>1.9?(b=1.-u41,b*=1.-step(abs(c.x),u53)*step(abs(c.y),u53)*step(abs(d),u53)):(b=1.,a.r=0.),a.gba+=vec3(c,d)*u54*a.a*b;}gl_FragColor=a;}",
i:"u48 u45 u42 u49 u50 u51 u52 u54 u41 u53 u40".split(" ")},{id:"s66",name:"_",Ba:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",g:"uniform sampler2D u45;uniform vec3 u47;uniform vec2 u46;uniform float u40,u43;varying vec2 vv0;const vec2 l=vec2(1),e=vec2(.5),m=vec2(.25,.5);void main(){float f=cos(u40),g=-sin(u40);mat2 h=mat2(f,g/u43,-g*u43,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u45,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u46,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u47*max(a.x,a.y),1.);}",
i:"u45 u46 u47 u44 u40 u43".split(" "),precision:"lowp"},{id:"s65",name:"_",g:"uniform sampler2D u1,u12;uniform vec2 u55;uniform float u41;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);float c=mix(u55.x,u55.y,u41);gl_FragColor=mix(b,a,c*f);}",i:["u1","u12","u55","u41"]}]);M.element=z;Kb=M.element;q();w();C();xa.u();Q&&Q()},$c:function(){var z=[-1,-1],Q=M.element;"VIDEO"===Q.nodeName?(z[0]=Q.videoWidth,z[1]=Q.videoHeight):(z[0]=Q.width,z[1]=Q.height);
90===Math.abs(Ib.rotate)&&z.reverse();return z}};Mb.push(xa);return xa}Y.onLoad=function(a){Y.ready?a():Y.sa.push(a)};Y.switch_displayVideo=function(a){Y.Ta=a;Y.Sa&&(Y.Sa.style.display=Y.Ta?"block":"none")};Y.onWebcamAsk=function(a){Y.Ib=a};Y.onContextLost=function(a){Y.Hb=a};Y.onWebcamGet=function(a){Y.Jb=a};
Y.destroy=function(){Db.m();Kb&&Kb.srcObject&&Kb.srcObject.getTracks().forEach(function(a){a.stop()});Mb.forEach(function(a){a.m()});Mb.splice(0);Ya.m();Y.switch_displayVideo(!1);Y.initialized=!1;Y.sa.splice(0)};Y.set_size=function(a,d){b.width=a;b.height=d};Y.get_size=function(){return{width:b.width,height:b.height}};Y.get_videoStream=function(){return Jb};Y.get_video=function(){return Kb};Y.get_cv=function(){return Ya.hb()};Y.set_color=function(a){K.J("s66",[{type:"3f",name:"u47",value:a}])};
Y.init=function(a){var d=Ob(),f=a.callbackReady||function(n){console.log("ERR:",n)},l=a.callbackReady?a.callbackReady.bind(null,!1):null;if(a.canvasId||a.canvas){var m=a.canvas?a.canvas:document.getElementById(a.canvasId);if(m)if(Y.initialized)f("ALREADY_INITIALIZED");else{Y.initialized=!0;window.Fb=f?function(n){f(n);window.Fb=!1}:!1;a.NNCPath&&(b.Gc=a.NNCPath);"undefined"!==typeof a.NNC&&(Lb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&Y.sa.push(l);Nb=a.threshold||Nb;if(!Ya.u({Za:m,width:b.width,
height:b.height,debug:!1,hd:!1,jc:function(){Y.Hb&&Y.Hb()},premultipliedAlpha:!1}))return f("GL_INCOMPATIBLE"),!1;Y.Sa=Ya.hb();Y.Ta||(Y.Sa.style.display="none");a.videoSettings&&a.videoSettings.videoElement?d.rd(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Ib,a.videoSettings),d.me(function(n){d.rd(n,!1)}));return!0}else f("INVALID_CANVAS")}else f("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=Y;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();