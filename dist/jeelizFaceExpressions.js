 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function ca(){this.Na=!1;this.na=null;this.$d=void 0;this.la=1;this.Wc=this.re=0;this.Fa=null}function fa(a){if(a.Na)throw new TypeError("Generator is already running");a.Na=!0}ca.prototype.Pa=function(a){this.$d=a};ca.prototype.Sa=function(a){this.Fa={Ee:a,gf:!0};this.la=this.re||this.Wc};ca.prototype.return=function(a){this.Fa={return:a};this.la=this.Wc};function oa(a){this.o=new ca;this.xf=a}
oa.prototype.Pa=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na.next,a,this.o.Pa);this.o.Pa(a);return ra(this)};function ta(a,c){fa(a.o);var e=a.o.na;if(e)return pa(a,"return"in e?e["return"]:function(l){return{value:l,done:!0}},c,a.o.return);a.o.return(c);return ra(a)}oa.prototype.Sa=function(a){fa(this.o);if(this.o.na)return pa(this,this.o.na["throw"],a,this.o.Pa);this.o.Sa(a);return ra(this)};
function pa(a,c,e,l){try{var m=c.call(a.o.na,e);if(!(m instanceof Object))throw new TypeError("Iterator result "+m+" is not an object");if(!m.done)return a.o.Na=!1,m;var q=m.value}catch(n){return a.o.na=null,a.o.Sa(n),ra(a)}a.o.na=null;l.call(a.o,q);return ra(a)}
function ra(a){for(;a.o.la;)try{var c=a.xf(a.o);if(c)return a.o.Na=!1,{value:c.value,done:!1}}catch(e){a.o.$d=void 0,a.o.Sa(e)}a.o.Na=!1;if(a.o.Fa){c=a.o.Fa;a.o.Fa=null;if(c.gf)throw c.Ee;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function ua(a){this.next=function(c){return a.Pa(c)};this.throw=function(c){return a.Sa(c)};this.return=function(c){return ta(a,c)};this[Symbol.iterator]=function(){return this}}
function Aa(a){function c(l){return a.next(l)}function e(l){return a.throw(l)}return new Promise(function(l,m){function q(n){n.done?l(n.value):Promise.resolve(n.value).then(c,e).then(q,m)}q(a.next())})}function Da(a,c){return a[0]*(1-c)+a[1]*c}function Ea(a){var c=new XMLHttpRequest;c.open("GET",b.Gc+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}
function Ia(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var e in a)a[e]=Ia(a[e],c);return a}function Ja(a,c,e){return Math.min(Math.max((e-a)/(c-a),0),1)}
function Ka(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";case "gelu":return"gl_FragColor=gl_FragColor;\n          vec4 zou=gl_FragColor;\n          vec4 polyZou=0.7978845608028654*(zou+0.044715*zou*zou*zou);\n          vec4 exZou=exp(-abs(polyZou));\n          vec4 exZou2=exZou*exZou;\n          vec4 tanhZou=sign(polyZou)*(vec4(1.)-exZou2)/(vec4(1.)+exZou2);\n          gl_FragColor=0.5*zou*(vec4(1.)+tanhZou);";
default:return!1}}function Oa(a,c){var e=c%8;return a[(c-e)/8]>>7-e&1}function Pa(a,c,e){var l=1,m=0;for(e=c+e-1;e>=c;--e)m+=l*Oa(a,e),l*=2;return m}function Qa(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,e=new Uint8Array(c),l=0;l<c;++l)e[l]=a.charCodeAt(l);return e}function Ra(a){return"string"===typeof a?JSON.parse(a):a}
function Sa(a){if("undefined"===typeof Ra(a).nb){var c=Ra(a);a=c.ne;var e=c.nf,l=c.n;c=Qa(c);for(var m=new Float32Array(l),q=new Float32Array(e),n=a+e+1,t=0;t<l;++t){var h=n*t,p=0===Oa(c,h)?1:-1,u=Pa(c,h+1,a);h=h+1+a;for(var B=q.length,w=0,r=h;r<h+B;++r)q[w]=Oa(c,r),++w;for(B=h=0;B<e;++B)h+=q[B]*Math.pow(2,-B-1);m[t]=0===h&&0===u?0:p*(1+h)*Math.pow(2,1+u-Math.pow(2,a-1))}a=m}else if(l=Ra(a),a=l.nb,0===a)a=new Uint8Array(l.nb);else{e=l.n;l=Qa(l);c=new Uint32Array(e);for(m=0;m<e;++m)c[m]=Pa(l,m*a,a);
a=c}return a}
var L=function(){function a(d,k,A){k=d.createShader(k);d.shaderSource(k,A);d.compileShader(k);return d.getShaderParameter(k,d.COMPILE_STATUS)?k:null}function c(d,k,A){k=a(d,d.VERTEX_SHADER,k);A=a(d,d.FRAGMENT_SHADER,A);d===C&&t.push(k,A);var N=d.createProgram();d.attachShader(N,k);d.attachShader(N,A);d.linkProgram(N);return N}function e(d){return["float","sampler2D","int"].map(function(k){return"precision "+d+" "+k+";\n"}).join("")}function l(d,k){k.u=k.u?!0:!1;if(!k.u){k.Ca=k.Ca||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";k.Xa=
k.Xa||["a0"];k.Ga=k.Ga||[2];k.precision=k.precision||w;k.id=u++;void 0!==k.Md&&(k.Md.forEach(function(G,da){k.h=k.h.replace(G,k.xb[da])}),k.Md.splice(0));k.Cc=0;k.Ga.forEach(function(G){k.Cc+=4*G});var A=e(k.precision);k.ra=c(d,A+k.Ca,A+k.h);k.B={};k.i.forEach(function(G){k.B[G]=d.getUniformLocation(k.ra,G)});k.attributes={};k.Ha=[];k.Xa.forEach(function(G){var da=d.getAttribLocation(k.ra,G);k.attributes[G]=da;k.Ha.push(da)});if(k.j){d.useProgram(k.ra);p=k;h=k.id;for(var N in k.j)d.uniform1i(k.B[N],
k.j[N])}k.qa=!0}}function m(d){Ta.Rf(O);h!==d.id&&(O.R(),h=d.id,p=d,C.useProgram(d.ra),d.Ha.forEach(function(k){0!==k&&C.enableVertexAttribArray(k)}))}function q(d,k,A){l(d,k,A);d.useProgram(k.ra);d.enableVertexAttribArray(k.attributes.a0);h=-1;return p=k}function n(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var t=[],h=-1,p=null,u=0,B=!1,w="highp",r=["u1"],H=["u0"],E={u1:0},g={u0:0},K={u1:0,u2:1},Q={u1:0,u3:1},I=["u1","u3","u4"],
F={u5:0},f=["u6","u7","u8","u9"],x={u6:0,u7:1},J={s0:n(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:r,j:E,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:K},s3:{h:"uniform sampler2D u1;uniform vec2 u10,u11;varying vec2 vv0;void main(){vec2 a=vv0*u10+u11;gl_FragColor=texture2D(u1,a);}",i:["u1","u10","u11"],j:E,u:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:r,j:E},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:K},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:r,j:E},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:r,j:E},s8:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u10;}",
i:["u0","u10"],j:g},s9:{h:"uniform sampler2D u0;uniform float u10;varying vec2 vv0;const vec4 f=vec4(.25),g=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u10,f);gl_FragColor=b*g;}",i:["u0","u10"],j:g},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:r,j:E},s11:{h:"uniform sampler2D u1,u12;uniform float u13;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);gl_FragColor=mix(b,a,u13*f);}",
i:["u1","u12","u13"],j:{u1:0,u12:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u14)+texture2D(u1,vv0+u14*vec2(1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,-1.))+texture2D(u1,vv0+u14*vec2(-1.,1.)));}",i:["u1","u14"],j:E},s13:{h:"uniform sampler2D u1;varying vec2 vv0;vec4 f(vec3 d){vec3 b=d/65536.,a=clamp(ceil(log2(b)),-128.,127.);float c=max(max(a.r,a.g),a.b),g=exp2(c);vec3 h=clamp(b/g,0.,1.);return vec4(h,(c+128.)/256.);}void main(){vec3 a=texture2D(u1,vv0).rgb;gl_FragColor=f(a);}",
i:r,j:E,u:!0},s14:{h:"uniform sampler2D u1;varying vec2 vv0;vec3 f(vec4 a){float b=a.a*256.-128.;vec3 c=a.rgb;return exp2(b)*c*65536.;}void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=vec4(f(a),1.);}",i:r,j:E,u:!0},s15:{h:"uniform sampler2D u1;uniform vec4 u15;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u15);gl_FragColor=j(a);}",
i:["u1","u15"],j:E},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:H,j:g,u:!0},s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:H,j:g,u:!0},s18:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.);const float g=.797885,h=.044715;vec4 i(vec4 a){vec4 b=exp(-abs(a)),c=b*b,d=sign(a)*(e-c)/(e+c);return d;}void main(){vec4 a=texture2D(u0,vv0),b=a+h*a*a*a,c=i(g*b);gl_FragColor=.5*a*(e+c);}",
i:H,j:g,u:!0},s19:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:H,j:g,u:!0},s20:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(a)-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:H,j:g},s21:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:H,j:g},s22:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",
i:H,j:g,u:!0},s23:{h:"uniform sampler2D u0,u16;uniform float u17;const vec2 e=vec2(.5);const float f=1e-5;const vec4 g=vec4(1.),i=vec4(0.);varying vec2 vv0;void main(){vec4 a=texture2D(u16,e);float b=u17*u17;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",i:["u0","u16","u17"],j:{u0:0,u16:1},u:!0},s24:{h:"uniform sampler2D u1;uniform vec2 u18;varying vec2 vv0;void main(){float a=u18.x*u18.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u18.y),f=floor(u18.x*fract(b*u18.y)),g=(f*u18.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",
i:["u1","u18"],j:E},s25:{h:"uniform sampler2D u7,u6,u19;varying vec2 vv0;void main(){vec4 a=texture2D(u19,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u7,b),f=texture2D(u6,c);gl_FragColor=d*f;}",i:["u7","u6","u19"],j:Object.assign({u19:2},x),u:!0},s26:{h:"uniform float u8,u9;uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec2 b=fract(vv0*u8);float a=u8*u9;vec2 c=(vec2(.5)+floor(a*vv0))/a;vec4 d=texture2D(u7,c),f=texture2D(u6,b);gl_FragColor=d*f;}",i:f,j:x},s27:{h:"uniform float u8,u9;uniform vec2 u20;uniform sampler2D u7,u6;varying vec2 vv0;void main(){float a=u8*u9;vec2 b=mod(vv0*u20,vec2(1.)),c=floor(vv0*u20)/u20,d=c+fract(b*u8)/u20,f=(vec2(.5)+floor(a*b))/a;vec4 g=texture2D(u7,f),h=texture2D(u6,d);gl_FragColor=g*h;}",
i:["u20"].concat(f),j:x,u:!0},s28:{h:"uniform float u8,u9;uniform sampler2D u7,u6,u22,u23,u24,u25;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u8),d=vv0;float h=u8*u9;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u7,d),m=texture2D(u6,c),a=texture2D(u25,d);a=floor(.5+a*255.);vec4 n=texture2D(u22,c),o=texture2D(u23,c),p=texture2D(u24,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:["u25","u22","u23","u24"].concat(f),j:Object.assign({u25:3,u22:4,u23:5,u24:6},x),u:!0},s29:{h:"uniform sampler2D u7,u6,u3;uniform float u8,u26,u27,u9;uniform vec2 u28;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u26*vv0),d=u26*vv0-c;float g=u8/u26;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u26;float m=u26*u9/u8;vec2 b=m*h,n=floor(.5*(u9-1.)*(f-u28));b=floor(u28*b+n);vec2 a=(b+i*u27)/u9;a+=.25/u9;vec2 k=step(a,f)*step(l,a);vec4 o=texture2D(u7,j),p=texture2D(u6,a),q=o*p,r=texture2D(u3,j);gl_FragColor=(q*u27*u27+r)*k.x*k.y;}",
i:["u26","u27","u3","u28"].concat(f),j:Object.assign({u3:2},x)},s30:{h:"uniform sampler2D u7,u6;varying vec2 vv0;void main(){vec4 a=texture2D(u7,vv0),b=texture2D(u6,vv0);gl_FragColor=a*b;}",i:["u7","u6"],j:x,u:!0},s31:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:I,j:Q},s32:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);}",
i:["u20"].concat(I),j:Q,u:!0},s33:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",i:I,j:Q,u:!0},s34:{h:"uniform sampler2D u1,u3;uniform vec2 u20;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0*u20)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:["u20"].concat(I),j:Q,u:!0},s35:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:I,j:Q,u:!0},s36:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:r,j:E,precision:"lowp"},s37:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u29"],j:E,precision:"lowp"},s38:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u29;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u29)).rgb,c=texture2D(u1,vv0+vec2(u29,u29)).rgb,d=texture2D(u1,vv0+vec2(u29,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u29"],j:E,precision:"lowp"},s39:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u30,vv0.y-u30))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u30))*2.,b-=texture2D(u1,vec2(vv0.x+u30,vv0.y-u30))*1.,b+=texture2D(u1,vec2(vv0.x-u30,vv0.y+u30))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u30))*2.,b+=texture2D(u1,vec2(vv0.x+u30,vv0.y+u30))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u30"],j:K,u:!0},s40:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u30;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u30,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u30"],j:K,u:!0},s41:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u14*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*h),d=texture2D(u5,a+u14*i),j=texture2D(u5,a+u14),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u14"],j:F},s42:{h:"uniform sampler2D u5;uniform vec2 u14;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u14*k),d=texture2D(u5,a+u14*l),g=texture2D(u5,a+u14),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u14*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u14*m),d=f(a+u14*2.),g=f(a+u14*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u14"],
j:F,u:!0},s43:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:E,precision:"lowp",u:!0},s44:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u14)+2002./e*texture2D(u1,vv0-2.*u14)+3003./e*texture2D(u1,vv0-u14)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u14)+2002./e*texture2D(u1,vv0+2.*u14)+1001./e*texture2D(u1,vv0+3.*u14);gl_FragColor=a;}",i:["u14","u1"],
j:E,precision:"lowp",u:!0},s45:{h:"uniform sampler2D u1,u16,u31;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u16,vv0),b=texture2D(u31,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u16","u31"],j:{u1:0,u16:1,u31:2},u:!0}},M={s46:{h:"uniform float u8,u32;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u8,xyTo=floor(vv0*u8+eps2);float weightSize=toSparsity*u8;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u32*(xyPatch-halfFromSparsity))/u8,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u8","u7","u6","u3","u32"],xb:["1.1111","gl_FragColor\\*=2.2222;"]},s47:{h:"uniform float u8,u32,u9;uniform sampler2D u7,u6,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.),ONE2=vec2(1.),HALF2=vec2(.5),EPS2=vec2(1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u9,xyTo=floor(vv0*u8+eps2);float weightSize=fromSparsity*u9;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u8;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u32*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u9,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u7,uvWeight)*texture2D(u6,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u8 u9 u7 u6 u3 u32".split(" "),xb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},v=null,S=null,O={qb:function(){return B},v:function(){if(!B){v=Ia(J,2);S=Ia(M,2);w="highp";C.getShaderPrecisionFormat&&(C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.MEDIUM_FLOAT),C.getShaderPrecisionFormat(C.FRAGMENT_SHADER,C.LOW_FLOAT));for(var d in v)l(C,v[d],d);L.set("s0");C.enableVertexAttribArray(0);B=!0}},Va:function(d){d.forEach(function(k){O.Ic(k)})},Ic:function(d){v[d.id]=d;l(C,d,d.id)},bf:function(d,k,
A){k||(k=d);v[k]=Object.create(S[d]);v[k].jf=!0;S[d].xb&&S[d].xb.forEach(function(N,G){var da="";"gl_Frag"===N.substring(0,7)?(N=new RegExp("[,;]?"+N,"g"),da=";"):N=new RegExp(N,"g");v[k].h=v[k].h.replace(N,da+A[G])});l(C,v[k],k)},set:function(d){var k=v[d];k.u&&(k.u=!1,l(C,k,d));m(k)},Qa:function(d){return q(d,n(),"s48")},tc:function(d){return q(d,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:w},"s49")},Fe:function(d){return"undefined"===typeof v[d]?!1:v[d].qa},R:function(){-1!==
h&&(h=-1,p.Ha.forEach(function(d){0!==d&&C.disableVertexAttribArray(d)}))},uc:function(){var d=0;p.Ha.forEach(function(k,A){A=p.Ga[A];C.vertexAttribPointer(k,A,C.FLOAT,!1,p.Cc,d);d+=4*A})},Ce:function(){C.enableVertexAttribArray(0)},Ra:function(){O.yb(C)},yb:function(d){d.vertexAttribPointer(p.Ha[0],2,d.FLOAT,!1,8,0)},ih:function(d,k){C.uniform1i(p.B[d],k)},L:function(d,k){C.uniform1f(p.B[d],k)},U:function(d,k,A){C.uniform2f(p.B[d],k,A)},Sf:function(d,k){C.uniform2fv(p.B[d],k)},Tf:function(d,k){C.uniform3fv(p.B[d],
k)},jh:function(d,k,A,N){C.uniform3f(p.B[d],k,A,N)},Uf:function(d,k,A,N,G){C.uniform4f(p.B[d],k,A,N,G)},Rd:function(d,k){C.uniform4fv(p.B[d],k)},kh:function(d,k){C.uniformMatrix2fv(p.B[d],!1,k)},lh:function(d,k){C.uniformMatrix3fv(p.B[d],!1,k)},mh:function(d,k){C.uniformMatrix4fv(p.B[d],!1,k)},M:function(d,k){O.set(d);k.forEach(function(A){switch(A.type){case "4f":C.uniform4fv(p.B[A.name],A.value);break;case "3f":C.uniform3fv(p.B[A.name],A.value);break;case "2f":C.uniform2fv(p.B[A.name],A.value);
break;case "1f":C.uniform1f(p.B[A.name],A.value);break;case "1i":C.uniform1i(p.B[A.name],A.value);break;case "mat2":C.uniformMatrix2fv(p.B[A.name],!1,A.value);break;case "mat3":C.uniformMatrix3fv(p.B[A.name],!1,A.value);break;case "mat4":C.uniformMatrix4fv(p.B[A.name],!1,A.value)}})},Gg:function(){return"lowp"},m:function(){O.R();C.disableVertexAttribArray(0);for(var d in v){var k=v[d];k.qa&&(k.qa=!1,C.deleteProgram(k.ra));k.jf&&delete v[d]}t.forEach(function(A){C.deleteShader(A)});t.splice(0);u=
0;B=!1;p=null;h=-1}};return O}(),C=null,Ya=function(){function a(r){console.log("ERROR in ContextFF: ",r);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function e(r,H,E){r.setAttribute("width",H);r.setAttribute("height",E)}function l(r){if(c())return!1;var H=document.createElement("canvas");e(H,5,5);var E=null;try{E=H.getContext("webgl2",r)}catch(g){return!1}if(!E)return!1;m(E);Va.Oc(E);r=Va.Mb(E);if(!r.ga&&!r.ia)return Wa.m(),Va.reset(),!1;E=Wa.Kc(E,
r);Wa.m();Va.reset();return E?!0:!1}function m(r){r.clearColor(0,0,0,0);r.disable(r.DEPTH_TEST);r.disable(r.BLEND);r.disable(r.DITHER);r.disable(r.STENCIL_TEST);r.disable(r.CULL_FACE);r.GENERATE_MIPMAP_HINT&&r.FASTEST&&r.hint(r.GENERATE_MIPMAP_HINT,r.FASTEST);r.disable(r.SAMPLE_ALPHA_TO_COVERAGE);r.disable(r.SAMPLE_COVERAGE);r.depthFunc(r.LEQUAL);r.clearDepth(1)}var q=null,n=null,t=null,h=!0,p=null,u=null,B=[],w={I:function(){return q.width},W:function(){return q.height},hb:function(){return q},xg:function(){return C},
ka:function(){return h},flush:function(){C.flush()},Og:function(){Xa.reset();Xa.Z();w.Gf()},Gf:function(){T.reset();U.reset();L.R();L.Ce();C.disable(C.DEPTH_TEST);C.disable(C.BLEND);U.Ya();L.Ra()},Me:function(){p||(p=new Uint8Array(q.width*q.height*4));C.readPixels(0,0,q.width,q.height,C.RGBA,C.UNSIGNED_BYTE,p);return p},Ag:function(){return q.toDataURL("image/jpeg")},Bg:function(){Xa.P();n||(n=document.createElement("canvas"),t=n.getContext("2d"));e(n,q.width,q.height);for(var r=w.Me(),H=t.createImageData(n.width,
n.height),E=n.width,g=n.height,K=H.data,Q=0;Q<g;++Q)for(var I=g-Q-1,F=0;F<E;++F){var f=4*(Q*E+F),x=4*(I*E+F);K[f]=r[x];K[f+1]=r[x+1];K[f+2]=r[x+2];K[f+3]=r[x+3]}t.putImageData(H,0,0);return n.toDataURL("image/png")},zg:function(r){!n&&r&&(n=document.createElement("canvas"),t=n.getContext("2d"));var H=r?n:document.createElement("canvas");e(H,q.width,q.height);(r?t:H.getContext("2d")).drawImage(q,0,0);return H},v:function(r){r=Object.assign({ha:null,jc:null,Za:null,Mc:null,width:512,height:512,premultipliedAlpha:!1,
jd:!0,antialias:!1,debug:!1,rg:!1},r);r.ha?(C=r.ha,q=r.ha.canvas):r.Mc&&!r.Za?q=document.getElementById(r.Mc):r.Za&&(q=r.Za);q||(q=document.createElement("canvas"));q.width=r.width;q.height=r.height;if(C)h=C instanceof WebGL2RenderingContext;else{h=!0;var H={antialias:r.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:r.premultipliedAlpha,stencil:!1,depth:r.jd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(H.antialias=!1);var E=l(H);E||!H.antialias||c()||(H.antialias=!1,E=l(H));E&&(C=q.getContext("webgl2",H));C?h=!0:((C=q.getContext("webgl",H))||(C=q.getContext("experimental-webgl",H)),h=!1)}if(!C)return a("WebGL1 and 2 are not enabled");r.jc&&q.addEventListener&&(u=r.jc,q.addEventListener("webglcontextlost",u,!1));if(!Va.v())return a("Not enough GL capabilities");m(C);L.v();U.v();Wa.Kc(C,Va.Ke());B.forEach(function(g){g(C)});B.splice(0);return!0},lg:function(){return new Promise(function(r){C?r(C):
B.push(r)})},m:function(){C&&(Va.m(),L.m(),Wa.m());u&&(q.removeEventListener("webglcontextlost",u,!1),u=null);C=p=t=n=q=null;B.splice(0)}};return w}(),Ta=function(){function a(){null===c&&("undefined"!==typeof L?c=L:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Rf:function(e){c!==e&&(c&&c.R(),c=e)},qb:function(){return c.qb()},Ra:function(){return c.Ra()},yb:function(e){return c.yb(e)},uc:function(){return c.uc()},R:function(){return c.R()},set:function(e){a();
return c.set(e)},Qa:function(e){a();return c.Qa(e)},tc:function(e){a();return c.tc(e)}}}(),T=function(){function a(d){C.bindTexture(C.TEXTURE_2D,d)}function c(d){M[0]=d;d=v[0];var k=d>>16&32768,A=d>>12&2047,N=d>>23&255;return 103>N?k:142<N?k|31744|((255==N?0:1)&&d&8388607):113>N?(A|=2048,k|(A>>114-N)+(A>>113-N&1)):k=(k|N-112<<10|A>>1)+(A&1)}function e(d){var k=new Uint16Array(d.length);d.forEach(function(A,N){k[N]=c(A)});return k}function l(){if(null!==S.Tb)return S.Tb;var d=q(e([.5,.5,.5,.5]),!0);
return null===d?!0:S.Tb=d}function m(){if(null!==S.Ub)return S.Ub;var d=q(new Uint8Array([127,127,127,127]),!1);return null===d?!0:S.Ub=d}function q(d,k){if(!Ta.qb()||!E)return null;var A=null,N=Math.sqrt(d.length/4);try{var G=C.getError();if("FUCKING_BIG_ERROR"===G)return!1;A=O.instance({isFloat:!1,N:k,array:d,width:N});G=C.getError();if(G!==C.NO_ERROR)return!1}catch(da){return!1}Xa.P();C.viewport(0,0,N,N);C.clearColor(0,0,0,0);C.clear(C.COLOR_BUFFER_BIT);Ta.set("s0");A.va(0);U.l(!0,!0);d=4*N*N;
k=new Uint8Array(d);C.readPixels(0,0,N,N,C.RGBA,C.UNSIGNED_BYTE,k);N=!0;for(G=0;G<d;++G)N=N&&3>Math.abs(k[G]-127);A.remove();Xa.Z();return N}var n=0,t=null,h=0,p=null,u=null,B=null,w=null,r=null,H=null,E=!1,g=[],K={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,nd:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,K:null,ad:null,hf:!1,N:!1,F:null,sb:4,bc:0},Q=!1,I=null,F=null,f=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,
0,0,1]],x=!1,J=!1,M=new Float32Array(1),v=new Int32Array(M.buffer),S={Tb:null,Ub:null},O={v:function(){E||(r=[C.RGBA,null,C.RGBA,C.RGBA],H=[C.RGBA,null,C.RGBA,C.RGBA],t=[C.TEXTURE0,C.TEXTURE1,C.TEXTURE2,C.TEXTURE3,C.TEXTURE4,C.TEXTURE5,C.TEXTURE6,C.TEXTURE7],x="undefined"!==typeof JEContext,J="undefined"!==typeof Va,x&&JEContext.Xg()&&t.push(C.TEXTURE8,C.TEXTURE9),p=[-1,-1,-1,-1,-1,-1,-1,-1],w=[C.UNSIGNED_BYTE,C.FLOAT,C.FLOAT],E=!0)},fh:function(){C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,
C.LINEAR);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.LINEAR)},gh:function(){C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,C.NEAREST);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST)},af:function(){if(!u){for(var d=new Float32Array(16384),k=0;16384>k;++k)d[k]=2*Math.random()-1;u={random:O.instance({isFloat:!0,isPot:!0,array:d,width:64}),Zd:O.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}O.eg()},Pd:function(d){C.framebufferTexture2D(Xa.Rb(),C.COLOR_ATTACHMENT0,
C.TEXTURE_2D,d,0)},Mg:function(){return u.Zd},eg:function(){w[1]=Va.Qb(C)},Pf:function(){H=r=[C.RGBA,C.RGBA,C.RGBA,C.RGBA]},Hd:function(d){L.set("s1");Xa.P();var k=d.I(),A=d.W();C.viewport(0,0,k,A);d.g(0);U.l(!1,!1)},Ef:function(d,k){O.Hd(d);C.readPixels(0,0,d.I(),d.W(),C.RGBA,C.UNSIGNED_BYTE,k)},Ff:function(d,k){O.Hd(d);return Va.rc(0,0,d.I(),d.W(),k)},Vc:function(d,k,A,N,G,da,ha){d.activeTexture(d.TEXTURE0);var ma=d.createTexture();d.bindTexture(d.TEXTURE_2D,ma);G=G instanceof Float32Array?G:new Float32Array(G);
d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,d.CLAMP_TO_EDGE);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,d.NEAREST);d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,d.NEAREST);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,da);d.texImage2D(d.TEXTURE_2D,0,d.RGBA,A,N,0,d.RGBA,d.FLOAT,G);d.bindTexture(d.TEXTURE_2D,null);d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,!1);ha&&(Xa.Z(),L.Qa(d));d.viewport(0,0,A,N);d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,
d.TEXTURE_2D,k,0);d.bindTexture(d.TEXTURE_2D,ma);ha?U.l(!0,!0):U.eb(d);d.deleteTexture(ma);E&&(p[0]=-1,B=null,n=0)},Jb:function(d){d!==n&&(C.activeTexture(t[d]),n=d)},instance:function(d){var k;function A(){X=void 0!==y.K.videoWidth?y.K.videoWidth:y.K.width;Y=void 0!==y.K.videoHeight?y.K.videoHeight:y.K.height}function N(D){var V=C.getError();if("FUCKING_BIG_ERROR"===V)return!1;C.texImage2D(C.TEXTURE_2D,0,ka,ia,ja,D);V=C.getError();V!==C.NO_ERROR&&ia!==C.RGBA&&(ia=C.RGBA,C.texImage2D(C.TEXTURE_2D,
0,ka,ia,ja,D));return!0}function G(){if(!cb){a(R);va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,va);y.isPot?(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,y.isMirrorX?C.MIRRORED_REPEAT:C.REPEAT),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,y.isMirrorY?C.MIRRORED_REPEAT:C.REPEAT)):(C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_S,C.CLAMP_TO_EDGE),C.texParameteri(C.TEXTURE_2D,C.TEXTURE_WRAP_T,C.CLAMP_TO_EDGE));y.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&C.texParameterf(C.TEXTURE_2D,JEContext.Dg().TEXTURE_MAX_ANISOTROPY_EXT,
JESETTINGS.hg);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAG_FILTER,y.isLinear?C.LINEAR:C.NEAREST);var D=y.isMipmap&&!Ba;C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,y.nd?C.LINEAR_MIPMAP_LINEAR:y.isLinear?D?C.NEAREST_MIPMAP_LINEAR:C.LINEAR:D?C.NEAREST_MIPMAP_NEAREST:C.NEAREST);ia=r[y.sb-1];ka=H[y.sb-1];ja=w[ya];Va.ka()&&(D=Va.Ne(),ia===C.RGBA&&ja===C.FLOAT?y.isMipmap||y.isLinear?ka=Wa.Pe(C):Va.Lc()?D&&(ka=D):ka=C.RGBA16F||C.RGBA:ia===C.RGB&&ja===C.FLOAT&&D&&(ka=D,ia=C.RGBA));if(y.N&&!y.isFloat||
y.isFloat&&y.isMipmap&&Wa.mf())ka=Va.Oe(),ja=Va.Qb(C);y.bc&&(La=y.bc);y.isSrgb&&4===y.sb&&(ia=JEContext.Kg());if(y.K)N(y.K);else if(y.url)N(na);else if(qa){D=qa;try{"FUCKING_BIG_ERROR"!==C.getError()&&(C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,D),C.getError()!==C.NO_ERROR&&(C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null),C.getError()!==C.NO_ERROR&&C.texImage2D(C.TEXTURE_2D,0,C.RGBA,X,Y,0,C.RGBA,C.UNSIGNED_BYTE,null)))}catch(Rb){C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null)}y.isKeepArray||(qa=
null)}else D=C.getError(),"FUCKING_BIG_ERROR"!==D&&(C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null),D=C.getError(),D!==C.NO_ERROR&&(ia=C.RGBA,y.N&&ja!==C.FLOAT&&(ja=C.FLOAT,C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,null))));if(y.isMipmap)if(!Ba&&ea)ea.gb(),Ma=!0;else if(Ba){D=Math.log2(Math.min(X,Y));Ca=Array(1+D);Ca[0]=R;for(var V=1;V<=D;++V){var la=Math.pow(2,V),Z=X/la;la=Y/la;var za=C.createTexture();a(za);C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MIN_FILTER,C.NEAREST);C.texParameteri(C.TEXTURE_2D,
C.TEXTURE_MAG_FILTER,C.NEAREST);C.texImage2D(C.TEXTURE_2D,0,ka,Z,la,0,ia,ja,null);a(null);Ca[V]=za}Ma=!0}a(null);p[n]=-1;va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;y.F&&ea&&(y.F(ea),y.F=null)}}function da(){for(var D=X*Y,V=2*D,la=3*D,Z=0;Z<D;++Z)sa[0][Z]=Ga[Z],sa[1][Z]=Ga[Z+D],sa[2][Z]=Ga[Z+V],sa[3][Z]=Ga[Z+la]}function ha(){var D=X*Y*4;wa=[new Uint8Array(D),new Uint8Array(D),new Uint8Array(D),new Uint8Array(D)];sa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),
new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*D);Ga=new Float32Array(Na.buffer);Ha=!0}function ma(){k=new Uint8Array(X*Y*4);db=new Float32Array(k.buffer);Ua=!0}var y=Object.assign({},K,d),ba=h++;null===y.isFlipY&&(y.isFlipY=y.url?!0:!1);y.data&&(y.array="string"===typeof y.data?Sa(y.data):y.isFloat?new Float32Array(y.data):new Uint8Array(y.data),y.isFlipY=!1);var ya=0,xa=y.K?!0:!1,z=null,P=null,aa=!1;y.N=y.N||y.isFloat;y.N&&(ya=1);!y.hf&&y.isFloat&&J&&!Va.Lc()&&(y.isFloat=!1);y.isFloat&&(ya=
2);y.isAnisotropicFiltering&&x&&!JEContext.Rg()&&(y.isAnisotropicFiltering=!1);var R=y.ad||C.createTexture(),na=null,qa=!1,X=0,Y=0,Fa=!1,cb=!1,Ha=!1,sa=null,wa=null,Na=null,Ga=null,ka=null,ia=null,ja=null,va=y.isFlipY,vb=(d=y.N&&y.isMipmap)&&Wa.me(),Ba=d&&!vb?!0:!1,Ca=null,La=-1,eb=-1,Ma=!1;var Ua=!1;var db=k=null;y.width&&(X=y.width,Y=y.height?y.height:X);var ea={get:function(){return R},I:function(){return X},W:function(){return Y},Ng:function(){return y.url},Sg:function(){return y.isFloat},Ug:function(){return y.N},
eh:function(D){R=D},Vg:function(){return y.isLinear},gb:function(){C.generateMipmap(C.TEXTURE_2D)},je:function(D,V){Ba?(D||(D=ea.Zc()),O.Jb(V),a(Ca[D]),p[V]=-1):ea.g(V)},Zc:function(){-1===La&&(La=Math.log2(X));return La},Qd:function(D){C.TEXTURE_MAX_LEVEL&&C.texParameteri(C.TEXTURE_2D,C.TEXTURE_MAX_LEVEL,D)},Je:function(D){D||(D=ea.Zc());if(Ba){L.set("s12");O.Jb(0);for(var V=X,la=Y,Z=1;Z<=D;++Z)V/=2,la/=2,L.U("u14",.25/V,.25/la),C.viewport(0,0,V,la),a(Ca[Z-1]),C.framebufferTexture2D(Xa.Rb(),C.COLOR_ATTACHMENT0,
C.TEXTURE_2D,Ca[Z],0),U.l(!1,1===Z);p[0]=-1}else D!==eb&&(eb=D,ea.Qd(D)),ea.gb()},hh:function(D){(xa=!(Array.isArray(D)||D.constructor===Float32Array||D.constructor===Uint8Array))?(qa=null,y.K=D,A()):qa=D},g:function(D){if(!Fa)return!1;O.Jb(D);if(p[D]===ba)return!1;a(R);p[D]=ba;return!0},va:function(D){C.activeTexture(t[D]);n=D;a(R);p[D]=ba},A:function(){B=ea;O.Pd(R)},J:function(){C.viewport(0,0,X,Y);B=ea;O.Pd(R)},Ac:O.Ac,Nf:function(D,V){X=D;Y=V},resize:function(D,V){ea.Nf(D,V);G()},clone:function(D){D=
O.instance({width:X,height:Y,N:y.N,isFloat:y.isFloat,isLinear:y.isLinear,isMirrorY:y.isMirrorY,isFlipY:D?!va:va,isPot:y.isPot});Ta.set("s0");Xa.Z();D.J();ea.g(0);U.l(!0,!0);return D},Vf:function(){C.viewport(0,0,X,Y)},remove:function(){C.deleteTexture(R);cb=!0;g.splice(g.indexOf(ea),1);ea=null},refresh:function(){ea.va(0);va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);xa?C.texImage2D(C.TEXTURE_2D,0,ka,ia,ja,y.K):C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,qa);va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},
qc:function(){Ha||ha();C.readPixels(0,0,X,4*Y,C.RGBA,C.UNSIGNED_BYTE,Na);da();return sa},Af:function(){Ha||ha();return Va.rc(0,0,X,4*Y,Na).then(function(){da();return sa})},Cf:function(){Ua||ma();C.readPixels(0,0,X,Y,C.RGBA,C.UNSIGNED_BYTE,k);return db},Bf:function(){Ua||ma();return Va.rc(0,0,X,Y,k)},Nb:function(D){Xa.P();L.set("s15");ea.g(0);if(D)C.viewport(0,0,X,Y),L.Uf("u15",.25,.25,.25,.25),U.l(!1,!0);else for(D=0;4>D;++D)C.viewport(0,Y*D,X,Y),L.Rd("u15",f[D]),U.l(!1,0===D)},Bc:function(D){var V=
ja===w[0]&&!m();a(R);va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);V?(aa||(z=document.createElement("canvas"),z.width=X,z.height=Y,P=z.getContext("2d"),P.createImageData(X,Y),aa=!0),null.data.set(D),P.putImageData(null,0,0),C.texImage2D(C.TEXTURE_2D,0,ka,ia,ja,z)):C.texImage2D(C.TEXTURE_2D,0,ka,X,Y,0,ia,ja,D);p[n]=ba;va&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!1)},qh:function(D,V){a(R);V&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,!0);C.texImage2D(C.TEXTURE_2D,0,ka,ia,ja,D);p[n]=ba;V&&C.pixelStorei(C.UNPACK_FLIP_Y_WEBGL,
!1)},bh:function(D,V){var la=X*Y,Z=4*la;D=y.N?D?"RGBE":"JSON":"RGBA";V&&(D=V);V=Va.ka()&&!1;var za=null;switch(D){case "RGBE":za="s13";break;case "JSON":za=V?"s0":"s15";break;case "RGBA":case "RGBAARRAY":za="s7"}Ha||("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==D||V||ha());Xa.P();L.set(za);ea.g(0);Z=null;if("RGBA"===D||"RGBE"===D||"RGBAARRAY"===D){C.viewport(0,0,X,Y);U.l(!0,!0);C.readPixels(0,0,X,Y,C.RGBA,C.UNSIGNED_BYTE,wa);if("RGBAARRAY"===D)return{data:wa};Q||(I=
document.createElement("canvas"),F=I.getContext("2d"),Q=!0);I.width=X;I.height=Y;la=F.createImageData(X,Y);la.data.set(wa);F.putImageData(la,0,0);Z=I.toDataURL("image/png")}else if("JSON"===D)if(V)Z=new Float32Array(la),C.viewport(0,0,X,Y),U.l(!0,!0),C.readPixels(0,0,X,Y,C.RGBA,C.FLOAT,Z);else{for(Z=0;4>Z;++Z)C.viewport(0,Y*Z,X,Y),L.Rd("u15",f[Z]),U.l(!Z,!Z);ea.qc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=sa[0][V],Z[4*V+1]=sa[1][V],Z[4*V+2]=sa[2][V],Z[4*V+3]=sa[3][V]}return{format:D,data:Z,width:X,height:Y,
isMirrorY:y.isMirrorY,isFlipY:"RGBA"===D?y.isFlipY:!y.isFlipY}}};y.isMipmap&&!Ba&&Fa&&!Ma&&(ea.gb(),Ma=!0);if(y.url)a(R),C.texImage2D(C.TEXTURE_2D,0,C.RGBA,1,1,0,C.RGBA,C.UNSIGNED_BYTE,null),na=new Image,na.qg="Anonymous",na.crossOrigin="Anonymous",na.src=y.url,na.onload=function(){X=na.width;Y=na.height;G()};else if(y.K){var fb=function(){A();X?G():setTimeout(fb,1)};fb()}else y.array?(y.N&&!y.isFloat?y.array instanceof Uint16Array?(qa=y.array,G()):l()?(qa=e(y.array),G()):(G(),O.Vc(C,R,ea.I(),ea.W(),
y.array,va,!0)):(qa=y.isFloat?y.array instanceof Float32Array?y.array:new Float32Array(y.array):y.array instanceof Uint8Array?y.array:new Uint8Array(y.array),G()),y.isKeepArray||(qa&&qa!==y.array&&(qa=null),delete y.array)):y.ad?Fa=!0:G();ea.Jg=ea.I;y.F&&Fa&&(y.F(ea),y.F=null);g.push(ea);return ea},P:function(d){d!==n&&(C.activeTexture(t[d]),n=d);p[d]=-1;a(null)},kg:function(d){u.random.g(d)},Ac:function(){B=null;C.framebufferTexture2D(Xa.Rb(),C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0)},reset:function(){0!==
n&&C.activeTexture(t[0]);for(var d=0;d<t.length;++d)p[d]=-1;n=-1},ah:function(){n=-1},ag:function(){for(var d=0;d<t.length;++d)O.P(d)},Xc:function(){u&&(u.random.remove(),u.Zd.remove())},ph:function(d,k){if("RGBA"===d.format||"RGBE"===d.format){var A=new Image;A.src=d.data;A.onload=function(){O.instance({isMirrorY:d.isMirrorY,isFlipY:d.isFlipY,isFloat:!1,K:A,F:function(N){if("RGBA"===d.format)k(N);else{var G=d.width,da=d.height,ha=O.instance({isMirrorY:d.isMirrorY,isFloat:!0,width:G,height:da,isFlipY:d.isFlipY});
Xa.Z();C.viewport(0,0,G,da);L.set("s14");ha.A();N.g(0);U.l(!0,!0);O.P(0);k(ha);Va.flush();N.remove()}}})}}else"JSON"===d.format?k(O.instance({isFloat:!0,isFlipY:d.isFlipY,width:d.width,height:d.height,array:new Float32Array(d.data)})):k(!1)},se:e,m:function(){B&&(Xa.Z(),O.Ac(),Xa.P());O.ag();g.slice(0).forEach(function(d){d.remove()});g.splice(0);E=!1;h=0;"undefined"!==typeof Wa&&Wa.m();u=null}};return O}(),Za={instance:function(a){var c=[T.instance(a),T.instance(a)],e=[c[1],c[0]],l=e,m={Od:function(q){l[1].A();
l[0].g(q);m.Ud()},Mf:function(q){l[1].J();l[0].g(q);m.Ud()},Ud:function(){l=l===c?e:c},refresh:function(){l[0].refresh();l[1].refresh()},g:function(q){l[0].g(q)},va:function(q){l[0].va(q)},jg:function(q){l[1].g(q)},Ue:function(){return l[0]},Hg:function(){return l[1]},Bc:function(q){l[0].Bc(q);l[1].Bc(q)},remove:function(){l[0].remove();l[1].remove();l=null},sync:function(){m.Mf(0);L.set("s0");U.l(!1,!1)}};return m}},U=function(){function a(h){var p={da:null,indices:null};p.da=h.createBuffer();h.bindBuffer(h.ARRAY_BUFFER,
p.da);h.bufferData(h.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),h.STATIC_DRAW);p.indices=h.createBuffer();h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,p.indices);h.bufferData(h.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),h.STATIC_DRAW);return p}var c=null,e=0,l=!1,m=[],q=-2,n=-2,t={reset:function(){n=q=-2},v:function(){l||(c=a(C),t.Ya(),l=!0)},instance:function(h){var p=e++,u=h.indices?h.indices.length:0,B="undefined"===typeof h.mode?C.STATIC_DRAW:h.mode,w=C.createBuffer();C.bindBuffer(C.ARRAY_BUFFER,
w);C.bufferData(C.ARRAY_BUFFER,h.da instanceof Float32Array?h.da:new Float32Array(h.da),B);q=p;var r=null,H=null,E=null;if(h.indices){r=C.createBuffer();C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,r);var g=null;65536>h.indices.length?(g=Uint16Array,H=C.UNSIGNED_SHORT,E=2):(g=Uint32Array,H=C.UNSIGNED_INT,E=4);g=h.indices instanceof g?h.indices:new g(h.indices);C.bufferData(C.ELEMENT_ARRAY_BUFFER,g,B);n=p}var K={ke:function(Q){q!==p&&(C.bindBuffer(C.ARRAY_BUFFER,w),q=p);Q&&Ta.uc()},he:function(){n!==p&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,
r),n=p)},bind:function(Q){K.ke(Q);K.he()},sg:function(){C.drawElements(C.TRIANGLES,u,H,0)},tg:function(Q,I){C.drawElements(C.TRIANGLES,Q,H,I*E)},remove:function(){C.deleteBuffer(w);h.indices&&C.deleteBuffer(r);K=null}};m.push(K);return K},Ya:function(){-1!==q&&(C.bindBuffer(C.ARRAY_BUFFER,c.da),q=-1);-1!==n&&(C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,c.indices),n=-1)},l:function(h,p){h&&U.Ya();p&&Ta.Ra();C.drawElements(C.TRIANGLES,3,C.UNSIGNED_SHORT,0)},eb:function(h){h=h||C;var p=a(h);h.bindBuffer(h.ARRAY_BUFFER,
p.da);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,p.indices);Ta.yb(h);h.clear(h.COLOR_BUFFER_BIT);h.drawElements(h.TRIANGLES,3,h.UNSIGNED_SHORT,0);h.flush();h.bindBuffer(h.ARRAY_BUFFER,null);h.bindBuffer(h.ELEMENT_ARRAY_BUFFER,null);h.deleteBuffer(p.da);h.deleteBuffer(p.indices);t.reset();l&&(t.Ya(),Ta.Ra())},Xc:function(){var h=C,p=c;h.deleteBuffer(p.da);h.deleteBuffer(p.indices)},m:function(){t.Xc();m.forEach(function(h){h.remove()});C.bindBuffer(C.ARRAY_BUFFER,null);C.bindBuffer(C.ELEMENT_ARRAY_BUFFER,
null);t.reset();l=!1;m.splice(0);e=0}};return t}(),Xa=function(){var a=null,c=null,e=null,l=!1,m=[],q={H:-2,Uc:1},n={qb:function(){return l},v:function(){if(!l){a=C.createFramebuffer();var t=Va.ka();c=t&&C.DRAW_FRAMEBUFFER?C.DRAW_FRAMEBUFFER:C.FRAMEBUFFER;e=t&&C.READ_FRAMEBUFFER?C.READ_FRAMEBUFFER:C.FRAMEBUFFER;l=!0}},Eg:function(){return c},Qe:function(){return e},Rb:function(){return C.FRAMEBUFFER},Ig:function(){return q},wg:function(){return a},instance:function(t){void 0===t.hd&&(t.hd=!1);var h=
t.ba?t.ba:null,p=t.width,u=void 0!==t.height?t.height:t.width,B=a,w=null,r=!1,H=!1,E=0;h&&(p=p?p:h.I(),u=u?u:h.W());var g={Nd:function(){r||(B=C.createFramebuffer(),r=!0,E=q.Uc++)},be:function(){g.Nd();g.A();w=C.createRenderbuffer();C.bindRenderbuffer(C.RENDERBUFFER,w);C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,p,u);C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,w);C.clearDepth(1)},bind:function(K,Q){E!==q.H&&(C.bindFramebuffer(c,B),q.H=E);h&&h.A();Q&&C.viewport(0,0,p,
u);K&&C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},ig:function(){E!==q.H&&(C.bindFramebuffer(c,B),q.H=E)},clear:function(){C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT)},og:function(){C.clear(C.COLOR_BUFFER_BIT)},pg:function(){C.clear(C.DEPTH_BUFFER_BIT)},Vf:function(){C.viewport(0,0,p,u)},A:function(){E!==q.H&&(C.bindFramebuffer(c,B),q.H=E)},rtt:function(K){h=K;q.H!==E&&(C.bindFramebuffer(C.FRAMEBUFFER,B),q.H=E);K.A()},P:function(){C.bindFramebuffer(c,null);q.H=-1},resize:function(K,Q){p=K;u=
Q;w&&(C.bindRenderbuffer(C.RENDERBUFFER,w),C.renderbufferStorage(C.RENDERBUFFER,C.DEPTH_COMPONENT16,p,u))},remove:function(){B===a||H||(C.bindFramebuffer(c,B),C.framebufferTexture2D(c,C.COLOR_ATTACHMENT0,C.TEXTURE_2D,null,0),w&&C.framebufferRenderbuffer(c,C.DEPTH_ATTACHMENT,C.RENDERBUFFER,null),C.bindFramebuffer(c,null),q.H=-1,C.deleteFramebuffer(B),w&&C.deleteRenderbuffer(w));H=!0}};t.hd&&g.be();m.push(g);return g},P:function(){C.bindFramebuffer(c,null);q.H=-1},bg:function(){C.bindFramebuffer(c,
null);C.clear(C.COLOR_BUFFER_BIT|C.DEPTH_BUFFER_BIT);Va.Sd();q.H=-1},reset:function(){q.H=-2},Z:function(){0!==q.H&&(C.bindFramebuffer(c,a),q.H=0)},clear:function(){Va.Sd();C.clear(C.COLOR_BUFFER_BIT)},m:function(){n.P();m.forEach(function(t){t.remove()});null!==a&&(C.deleteFramebuffer(a),a=null);n.reset();l=!1;m.splice(0);q.Uc=1}};return n}(),Va=function(){function a(){t="undefined"===typeof Ya?JEContext:Ya;h=!0}function c(f,x,J){for(var M=0;M<x.length;++M){var v=J.getExtension(x[M]+"_"+f);if(v)return v}return null}
function e(){null!==g.Bb&&(clearTimeout(g.Bb),g.Bb=null);g.xa=!1}function l(f){if(0===g.oa.length){g.X=C.PIXEL_PACK_BUFFER;g.oa.splice(0);g.jb.splice(0);for(var x=0;x<g.Ia;++x)g.oa.push(C.createBuffer()),g.jb.push(-1);g.fa=0;g.ic=0}C.bindBuffer(g.X,g.oa[g.fa]);f.byteLength!==g.jb[g.fa]&&(C.bufferData(g.X,f.byteLength,C.STREAM_READ),g.jb[g.fa]=f.byteLength);g.Pg=!0}function m(){C.bindBuffer(g.X,null)}function q(){g.wa.forEach(function(f){C.deleteSync(f)});g.wa.splice(0)}function n(){g.fa=(g.fa+1)%
g.Ia;++g.ic}var t=null,h=!1,p={kd:!1,wc:null,xc:null,od:!1,lf:!1,yc:null,pd:!1,zc:null,ld:!1,Kb:null,df:!1,Lb:null,ef:!1},u=null,B={ga:!0,ia:!0,Ob:!0,Gd:!1},w=null,r=!0,H=null,E=null,g={te:1,Ia:-1,fa:0,ic:0,xa:!1,oa:[],wa:[],jb:[],X:null,Bb:null},K="EXT WEBGL OES MOZ_OES WEBKIT_OES KHR".split(" "),Q=["OES","MOZ_OES","WEBKIT_OES"],I="undefined"===typeof window?{}:window,F={v:function(){if(h)return!0;F.reset();h||a();var f=C;if(!u.kd){u.wc=F.Rc(f);I.GL_EXT_FLOAT=u.wc;u.od=u.wc?!0:!1;if(u.od||F.ka())u.xc=
F.Sc(f),u.lf=u.xc?!0:!1,I.GL_EXT_FLOATLINEAR=u.xc;u.kd=!0}if(!u.ld){u.yc=F.bb(f);u.yc&&(u.pd=!0,I.GL_EXT_HALFFLOAT=u.yc);if(u.pd||F.ka())u.zc=F.Tc(f),I.GL_EXT_HALFFLOATLINEAR=u.zc;u.Qg=u.zc?!0:!1;u.ld=!0}u.Kb=F.Pc(f);u.df=u.Kb?!0:!1;I.GL_EXT_COLORBUFFERFLOAT=u.Kb;u.Lb=F.Qc(f);u.ef=u.Lb?!0:!1;I.GL_EXT_COLORBUFFERHALFFLOAT=u.Lb;Xa.v();T.v();if(!F.ve())return!1;U.v();T.af();return!0},reset:function(){u=Object.assign({},p);w=Object.assign({},B)},I:function(){h||a();return t.I()},W:function(){h||a();return t.W()},
ka:function(){h||a();return t.ka()},Oc:function(f){F.Pc(f);F.Qc(f);F.Rc(f);F.Sc(f);F.bb(f);F.Tc(f)},Pc:c.bind(null,"color_buffer_float",K),Qc:c.bind(null,"color_buffer_half_float",K),Rc:c.bind(null,"texture_float",Q),Sc:c.bind(null,"texture_float_linear",Q),bb:c.bind(null,"texture_half_float",Q),Tc:c.bind(null,"texture_half_float_linear",Q),Qb:function(f){var x=F.bb(f);return x&&x.HALF_FLOAT_OES?x.HALF_FLOAT_OES:f.HALF_FLOAT||f.FLOAT},Ne:function(){return E||C.RGBA32F||C.RGBA},Oe:function(){return H||
C.RGBA16F||C.RGBA},Ke:function(){return w},Lc:function(){return w.ga},ng:function(){return w.ia},mg:function(){return w.Ob},oe:function(){return w.Gd&&r},Yd:function(f){r=f;!f&&g.xa&&(q(),C.bindBuffer(g.X,null),g.xa=!1)},Wg:function(){return g.xa},Ab:function(f,x,J){function M(){f.bindTexture(f.TEXTURE_2D,null);f.bindFramebuffer(v,null);f.deleteTexture(d);f.deleteFramebuffer(O)}var v=f.FRAMEBUFFER,S=f.NEAREST,O=f.createFramebuffer();f.bindFramebuffer(v,O);var d=f.createTexture();f.activeTexture(f.TEXTURE0);
f.bindTexture(f.TEXTURE_2D,d);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,S);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,S);f.texImage2D(f.TEXTURE_2D,0,x,3,3,0,f.RGBA,J,null);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,d,0);if(f.checkFramebufferStatus(f.READ_FRAMEBUFFER||f.FRAMEBUFFER)!==f.FRAMEBUFFER_COMPLETE)return M(),
!1;Ta.tc(f);f.clearColor(0,0,0,0);f.viewport(0,0,3,3);f.disable(f.DEPTH_TEST);f.clear(f.COLOR_BUFFER_BIT);U.eb(f);f.bindFramebuffer(v,null);Ta.Qa(f);f.activeTexture(f.TEXTURE0);f.bindTexture(f.TEXTURE_2D,d);U.eb(f);x=new Uint8Array(36);f.readPixels(0,0,3,3,f.RGBA,f.UNSIGNED_BYTE,x);M();for(J=0;36>J;++J)if(3!==J%4&&3<Math.abs(x[J]-127))return!1;return!0},Mb:function(f){var x={ga:!1,ia:!1};f.disable(f.BLEND);f.clearColor(0,0,0,0);f.clear(f.COLOR_BUFFER_BIT);f.RGBA32F&&F.Ab(f,f.RGBA32F,f.FLOAT)&&(x.ga=
!0,E=f.RGBA32F);!x.ga&&F.Ab(f,f.RGBA,f.FLOAT)&&(x.ga=!0,E=f.RGBA);var J=F.Qb(f);H=null;f.RGBA16F&&F.Ab(f,f.RGBA16F,J)&&(x.ia=!0,H=f.RGBA16F);!x.ia&&F.Ab(f,f.RGBA,J)&&(x.ia=!0,H=f.RGBA);return x},we:function(){var f=Xa.instance({width:2});f.Nd();var x=T.instance({width:2,isFloat:!0,sb:3});f.A();x.A();F.flush();C.checkFramebufferStatus(Xa.Qe())!==C.FRAMEBUFFER_COMPLETE?(T.Pf(),w.Ob=!1):w.Ob=!0;f.remove();x.remove()},xe:function(){var f=!1;F.ka()&&(f="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(x){return"undefined"!==
typeof C[x]}));w.Gd=f},ve:function(){var f=F.Mb(C);Object.assign(w,f);if(!w.ga&&!w.ia)return!1;F.we();F.xe();return!0},Df:function(f,x,J,M,v){C.readPixels(f,x,J,M,C.RGBA,C.UNSIGNED_BYTE,v);return Promise.resolve(v,!1)},rc:function(f,x,J,M,v,S,O){if(!F.oe())return F.Df(f,x,J,M,v);g.Ia=O||g.te;l(v);C.readPixels(f,x,J,M,C.RGBA,C.UNSIGNED_BYTE,0);g.wa[g.fa]=C.fenceSync(C.SYNC_GPU_COMMANDS_COMPLETE,0);F.flush();var d=!1;return new Promise(function(k,A){function N(){if(!g.xa)return e(),m(),n(),A(),!1;var G=
(g.fa+1)%g.Ia;switch(C.clientWaitSync(g.wa[G],0,0)){case C.TIMEOUT_EXPIRED:case C.WAIT_FAILED:break;default:return e(),C.deleteSync(g.wa[G]),g.wa[G]=null,C.bindBuffer(g.X,g.oa[G]),C.getBufferSubData(g.X,0,v),m(),n(),k(v,d),!0}g.Bb=setTimeout(N,0);return!1}e();g.ic+1<g.Ia?(m(),n(),k(v,!1)):(g.xa=!0,N()||!S||d||(d=!0,S()))})},Sd:function(){C.viewport(0,0,F.I(),F.W())},flush:function(){C.flush()},m:function(){e();q();T.m();Xa.m();U.m();g.oa.forEach(function(f){C.deleteBuffer(f)});g.oa.splice(0);Ta.reset();
h=!1}};return F}(),Wa=function(){function a(f,x,J,M){g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,M?g.NEAREST_MIPMAP_NEAREST:g.LINEAR);var v=null;if(null!==J)try{v=g.getError();if("FUCKING_BIG_ERROR"===v)return!1;g.texImage2D(g.TEXTURE_2D,0,f,4,4,0,g.RGBA,x,J);v=g.getError();if(v!==g.NO_ERROR)return!1}catch(S){return!1}M&&g.generateMipmap(g.TEXTURE_2D);g.clear(g.COLOR_BUFFER_BIT);U.eb(g);v=g.getError();if("FUCKING_BIG_ERROR"===v)return!1;g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,u);v=g.getError();
v===g.INVALID_OPERATION&&"undefined"!==typeof g.PIXEL_PACK_BUFFER&&(g.bindBuffer(g.PIXEL_PACK_BUFFER,null),g.readPixels(0,0,2,2,g.RGBA,g.UNSIGNED_BYTE,u),v=g.getError());if(v!==g.NO_ERROR)return!1;J=!0;for(M=0;16>M;++M)J=J&&4>Math.abs(u[M]-127);J&&(h.zd=x,h.gd=f);return J}function c(f,x){return K.ga&&a(f,g.FLOAT,new Float32Array(B),x)?(t=n.Hc,!0):!1}function e(f,x,J){if(!K.ia)return!1;var M=T.se(B),v=Va.bb(g);if(v&&v.HALF_FLOAT_OES&&a(f,v.HALF_FLOAT_OES,M,x)||g.HALF_FLOAT&&a(f,g.HALF_FLOAT,M,x))return t=
n.Ea,!0;M=new Float32Array(B);if(a(f,g.FLOAT,M,x))return t=n.Ea,!0;g.bindTexture(g.TEXTURE_2D,J);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,2,2,0,g.RGBA,g.UNSIGNED_BYTE,null);g.bindFramebuffer(h.$a,F);T.Vc(g,J,2,2,M,!1,!1);g.bindFramebuffer(h.$a,null);g.bindTexture(g.TEXTURE_2D,J);return a(f,null,null,x)?(t=n.Ea,!0):!1}function l(f,x,J){p=!0;if(e(f,!0,J)||c(x,!0))return!0;p=!1;return e(f,!1,J)||c(x,!1)?!0:!1}function m(f){if(t===n.R){g=f||C;t=n.RGBA8;p=!0;Va.Oc(g);K||(K=Va.Mb(g));Xa.reset();F=g.createFramebuffer();
h.$a=g.DRAW_FRAMEBUFFER||g.FRAMEBUFFER;g.bindFramebuffer(h.$a,null);g.clearColor(0,0,0,0);g.viewport(0,0,2,2);L.R();Q=L.Qa(g);f=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,f);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.REPEAT);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.NEAREST);I=f;var x=f=g.RGBA,J=g.RGBA16F,M=g.RGBA32F;M&&(f=M);J&&(x=J);if((J||M)&&l(x,f,I))return q(),!0;f=x=g.RGBA;if(l(x,f,I))return q(),
!0;t=n.RGBA8;q();return!1}}function q(){g.deleteProgram(Q.ra);g.deleteTexture(I);I=Q=null}for(var n={R:-1,Hc:3,Ea:2,RGBA8:0},t=n.R,h={zd:null,gd:null,$a:null},p=!0,u=new Uint8Array(16),B=Array(64),w=0;4>w;++w)for(var r=0;4>r;++r){var H=0===(r+w)%2?1:0,E=4*w+r;B[4*E]=H;B[4*E+1]=H;B[4*E+2]=H;B[4*E+3]=H}var g=null,K=null,Q=null,I=null,F=null;return{me:function(f){m(f);return p},Kc:function(f,x){t===n.R&&(typeof("undefined"!==x)&&(K=x),m(f));return t!==n.RGBA8},Tg:function(f){m(f);return t===n.Hc},mf:function(f){m(f);
return t===n.Ea},Fg:function(f){m(f);return h.zd},Pe:function(f){m(f);return h.gd},m:function(){g=null;p=!0;t=n.R;K=null}}}(),hb={instance:function(a){function c(){u&&u.remove();u=T.instance({isFloat:!1,isPot:!1,width:e.size*e.S[0],height:e.size*e.S[1]})}var e=Object.assign({mask:null,size:-1,preprocessing:"none",preprocessingSize:a.size,customInputShader:null,nBlurPass:1,varianceMin:.1,blurKernelSizePx:5,gain:1,overlap:0,isNormalized:!1,tilt:-1,S:[1,1]},a),l=null,m=!1,q=!1,n=null,t=!1;a=!1;var h=
null;e.mask&&(m=!0,b&&void 0!==b.ge&&(e.mask=b.ge+e.mask),l=T.instance({isFloat:!1,url:e.mask}));var p=null;e.customInputShader&&(p="s50",L.Ic({name:"_",id:p,h:e.customInputShader,oh:["uSource"],precision:"lowp"}),L.M(p,[{type:"1i",name:"_",value:0}]));switch(e.preprocessing){case "sobel":h="s39";t=!0;break;case "meanNormalization":h="s40";t=!0;break;case "grayScale":h="s36";t=!1;break;case "grayScaleTilt":h="s37";a=!0;t=!1;break;case "rgbGrayTilt":h="s38";a=!0;t=!1;break;case "copy":h=p?p:"s0";break;
case "inputLightRegulation":h=p?p:"s36";n=$a.instance({ed:e.preprocessingSize,yd:e.size,wd:e.nBlurPass,Y:!1});q=!0;break;case "inputMix0":h="none";n=ab.instance({C:e.preprocessingSize,ma:e.varianceMin,ea:e.blurKernelSizePx,gain:e.gain||1,Y:!1});q=!0;break;case "inputMix1":h="none";n=bb.instance({C:e.preprocessingSize,ma:e.varianceMin,ea:e.blurKernelSizePx,gain:e.gain||1,Y:!1});q=!0;break;case "inputCut4":h="none";n=gb.instance({C:e.preprocessingSize,ma:e.varianceMin,ea:e.blurKernelSizePx,gain:e.gain||
1,La:e.isNormalized||!1,pc:e.overlap||0,Y:!1});e.preprocessingSize*=n.Re();q=!0;break;case "direct":case "none":case "abort":h="abort";break;default:h="s4"}e.preprocessingSize=Math.ceil(e.preprocessingSize);a&&L.M(h,[{name:"u29",type:"1f",value:e.tilt}]);m&&(h+="Mask");var u=null;c();var B={I:function(){return e.size},Se:function(){return e.preprocessingSize},Sb:function(){return B.I()},Ye:function(){return q?n.Ja():u},Cb:function(w){e.S=w;c()},T:function(w){Xa.Z();if("abort"===h)return w.g(0),w;
"none"!==h&&(L.set(h),t&&L.L("u30",1/e.size),u.J(),m&&l.g(1),U.l(!1,!1),u.g(0),w=u);q&&n.process(w)},m:function(){u.remove();m&&l.remove()}};return B}},nb={instance:function(a){function c(){if(F.Ba){m.input&&(m.input.remove(),m.mb.remove());var x=a.size*a.sparsity;I=Math.log(x/a.size)/Math.log(2);m.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:x*a.S[0],height:x*a.S[1],bc:I});m.mb=T.instance({isFloat:!0,isPot:!0,width:a.size*a.S[0],height:a.size*a.S[1]})}}function e(){m.output&&m.output.remove();
m.output=T.instance({isFloat:!0,isPot:!n,isLinear:!n&&t.isLinear,width:a.size*a.S[0],height:a.size*a.S[1]})}function l(x){t.buffer.forEach(function(J,M){t.results[M][0]=x[0][J];t.results[M][1]=x[1][J];t.results[M][2]=x[2][J];t.results[M][3]=x[3][J]});return t.results}a.normalize=a.normalize||!1;var m={input:null,bias:null,mb:null,output:null,oc:null,mc:null,nc:null},q=null,n=!0,t={type:"undef",F:null,isLinear:!1,buffer:[],results:[],ob:!1},h=-1,p=a.isReorganize?a.isReorganize:!1,u=a.kernelsCount?
!0:!1,B=[a.Ka?"s32":"s31",a.Ka?"s34":"s33","s35"][a.shiftRGBAMode||0],w={isEnabled:!1},r=1/a.size;a.kf?(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.wb.Sb(),n=!1):"full"===a.connectivityUp&&(a.sparsity=a.wb.Sb());var H={elu:"s19",elu01:"s20",relu:"s17",gelu:"s18",arctan:"s21",arctan2:"s22",sigmoid:"s16",copy:"s0"}[a.activation],E=a.sparsity*a.sparsity,g=!1,K=a.size,Q="";if(a.maxPooling){switch(a.maxPooling.size){case 2:Q="s41";break;case 4:Q="s42"}g=!0;K/=a.maxPooling.size;m.mc=T.instance({isFloat:!0,
isPot:!1,width:K})}var I=-1,F=null;n&&e();m.bias=T.instance(a.bias);var f={I:function(){return a.size},Sb:function(){return K},Yc:function(){return a.classesCount},ie:function(x){q.g(x)},wf:function(){a.remap&&a.remap.isEnabled&&(w={isEnabled:!0,pf:T.instance(a.remap.maskTexture),Oa:a.remap.layers.map(function(x){return a.parent.Ve(x)}),depth:a.remap.depth})},Qf:function(){switch(a.connectivityUp){case "direct":F=ib.instance(a.connectivity);break;case "square":F=jb.instance(a.connectivity);break;
case "squareFast":F=kb.instance(a.connectivity,a.activation);break;case "full":F=lb.instance(Object.assign({Ka:a.Ka},a.connectivity));break;case "conv":h=a.kernelsCount,F=mb.instance(a.connectivity),p&&(m.oc=T.instance({width:K,isFloat:!0,isFlipY:!1,isPot:!1}))}c()},T:function(x,J){q=x;F.Ba?(m.input.J(),u&&m.bias.g(2),F.T(w),m.input.g(0),m.input.Je(I),m.mb.J(),u?L.set("s0"):(L.set(B),L.L("u4",E),m.bias.g(1)),m.input.je(I,0),U.l(!1,!1),L.set(H),m.output.A(),m.mb.g(0),U.l(!1,!1)):(m.output.J(),m.bias.g(1),
F.T());if(n)return J=m.output,g&&(m.mc.J(),J.g(0),L.set(Q),L.U("u14",r,r),U.l(!1,!1),J=m.mc),p&&(m.oc.A(),L.set("s24"),L.U("u18",h,K/h),J.g(0),U.l(!1,!1),J=m.oc),J.g(0),J;var M=m.output;if(a.normalize||t.ob)x=a.normalize,L.set(t.ob?"s9":"s8"),L.L("u10",x?r:1),m.nc.J(),M.g(0),U.l(!1,!1),M=m.nc;x=null;switch(t.type){case "cpuRGBA2Float":M.Nb(!1);J?x=f.yf(M).then(t.F):(M=f.zf(M),t.F(M));break;case "cpuMeanFloat":M.Nb(!0);if(J)x=M.Bf().then(t.F);else{M=M.Cf();for(var v=0;v<M.length;++v);t.F(M)}break;
case "gpuRawAvg":case "gpuRaw":M.g(0);case "none":null!==t.F&&t.F(M)}J&&null===x&&(x=Promise.resolve());return x},Cb:function(x){a.S=x;c();e()},Xf:function(x){x&&(t.type=x.ub||"none",t.F=x.tb||null,t.isLinear=x.lc?!0:!1);e();x="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var J=0,M=0,v=0;J<x;++J)t.buffer.push(M+(a.size-1-v)*a.size),t.results.push([-1,-1,-1,-1]),++M,M===a.size&&(M=0,++v);t.ob="gpuRawAvg"===t.type||"cpuMeanFloat"===t.type;if(a.normalize||t.ob)m.nc=
T.instance({isFloat:!0,isPot:!0,width:a.size})},yf:function(x){return x.Af().then(l)},zf:function(x){x=x.qc();l(x);return t.results},m:function(){for(var x in m){var J=m[x];J&&J.remove()}F&&(F.m(),F=null)}};a.wb&&f.Qf(a.wb);return f}};
function ob(a){var c=null,e=null,l=null,m=0,q=this,n=null,t={Oa:[],ub:"none",lc:!1,tb:null,grid:null};this.v=function(){this.le(n.Oa);l.Xf({ub:n.ub,lc:n.lc,tb:n.tb})};this.Ve=function(h){return c[h]};this.Cb=function(h){["s32","s34","s27"].forEach(function(p){L.M(p,[{type:"2f",name:"u20",value:h}])});c&&c.forEach(function(p){p.Cb(h)})};this.le=function(h){var p=null;m=h.length;var u=null!==n.grid&&a.grid.length&&!(1===a.grid[0]&&1===a.grid[1]),B=u?n.grid:[1,1];u&&this.Cb(B);c=h.map(function(w,r){w=
Object.assign({},w,{index:r,parent:q,wb:p,kf:r===m-1,Ka:u,S:B});return p=r=0===r?hb.instance(w):nb.instance(w)});e=c[0];l=c[m-1];c.forEach(function(w,r){0!==r&&w.wf()})};this.T=function(h){h.g(0);var p=h;c.forEach(function(u){p=u.T(p,!1)});return p};this.Te=function(){return e.Se()};this.Ze=function(){return l.I()};this.Ja=function(){return l.Ye()};this.Yc=function(){return l.Yc()};this.m=function(){c&&(c.forEach(function(h){h.m()}),l=e=c=null,m=0)};"undefined"!==typeof a&&(n=Object.assign({},t,a),
this.v())}
var ib={instance:function(a){var c=T.instance(a.weights);return{Ba:!0,ib:function(){return 1},m:function(){c.remove()},$e:function(){return c},T:function(){L.set("s30");c.g(1);U.l(!1,!1)}}}},lb={instance:function(a){var c=a.fromLayerSize,e=T.instance(a.weights),l=a.Ka?"s27":"s26";return{Ba:!0,ib:function(){return c},m:function(){e.remove()},T:function(m){if(m.isEnabled){L.set("s28");m.pf.g(3);for(var q=Math.min(m.Oa.length,m.depth),n=0;n<q;++n)m.Oa[n].ie(4+n)}else L.set(l);L.L("u8",a.toLayerSize);L.L("u9",
a.fromLayerSize);e.g(1);U.l(!1,!1)}}}},jb={instance:function(a){for(var c=a.fromLayerSize,e=a.toLayerSize,l=a.toSparsity,m=l*e,q=m/c,n=c/e,t=0,h=0,p=0,u=Array(l*e*l*e*4),B=Array(l*e*l*e*4),w=Array(c*c),r=0;r<w.length;++r)w[r]=0;r=Math.floor(l/2);for(var H=.5/e,E=.5/c,g=.5/m,K=0;K<e;++K)for(var Q=Math.round(K*n),I=0;I<e;++I){var F=Math.round(I*n),f=K/e,x=I/e;f+=H;x+=H;for(var J=0;J<l;++J){var M=Q+J-r;0>M&&(M+=c);M>=c&&(M-=c);for(var v=0;v<l;++v){var S=t/m,O=h/m,d=F+v-r;0>d&&(d+=c);d>=c&&(d-=c);var k=
M/c,A=d/c;O=1-O-1/m;k+=E;A+=E;S+=g;O+=g;var N=K*l+J,G=I*l+v;G=e*l-G-1;N=G*e*l+N;u[4*N]=S;u[4*N+1]=O;u[4*N+2]=k;u[4*N+3]=A;A=w[d*c+M]++;N=A%q;k=M*q+N;d=d*q+(A-N)/q;d=c*q-1-d;d=d*c*q+k;B[4*d]=S;B[4*d+1]=O;B[4*d+2]=f;B[4*d+3]=x;++t>=m&&(t=0,++h);++p}}}w=null;var da=T.instance(a.weights);delete a.weights.data;var ha=T.instance({width:m,isFloat:!0,array:new Float32Array(B),isPot:!0});B=null;var ma=T.instance({width:m,isFloat:!0,array:new Float32Array(u),isPot:!0});u=null;return{Ba:!0,ib:function(){return q},
m:function(){ha.remove();ma.remove();da.remove()},T:function(){L.set("s25");da.g(1);ma.g(2);U.l(!1,!1)}}}},mb={instance:function(a){var c=a.kernelsCount,e=a.toSparsity,l=e*a.toLayerSize/a.fromLayerSize,m=a.inputScale||[1,1],q=T.instance(a.weights);return{Ba:!0,ib:function(){return l},Lg:function(){return e},$e:function(){return q},m:function(){q.remove()},T:function(){L.set("s29");L.Sf("u28",m);L.L("u26",c);L.L("u27",e);L.L("u8",a.toLayerSize);L.L("u9",a.fromLayerSize);q.g(1);U.l(!1,!1)}}}},kb={instance:function(a,
c){var e=a.fromLayerSize,l=a.toLayerSize,m=a.toSparsity,q=a.stride?a.stride:1,n=m*l/e,t=l<e,h=e/l,p=T.instance(a.weights),u="s51"+[e.toString(),l.toString(),m.toString(),q.toString(),c].join("_");L.Fe(u)||(a=Ka(c),l=[{type:"1f",name:"u8",value:l},{type:"1f",name:"u32",value:q}],t&&l.push({type:"1f",name:"u9",value:e}),e=[(t?n:m).toFixed(1),a],t&&e.push(h.toFixed(1)),L.bf(t?"s47":"s46",u,e),L.M(u,l.concat([{type:"1i",name:"u6",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u7",value:3}])));
return{Ba:!1,ib:function(){return n},m:function(){p.remove()},T:function(){L.set(u);p.g(3);U.l(!1,!1)}}}},$a={instance:function(a){var c=a.wd?a.wd:3,e=a.ed?a.ed:64,l=a.yd?a.yd:64,m=a.Y?!0:!1;a={isFloat:!1,width:e,isPot:!1,isFlipY:!1};var q=T.instance(a),n=T.instance(a),t=T.instance(a),h=T.instance(a),p=T.instance({isFloat:!0,width:l,isPot:!1,isFlipY:!1}),u=1/e;return{process:function(B){L.set("s43");h.A();U.l(m,!1);L.set("s44");for(var w=0;w<c;++w)q.A(),L.U("u14",u,0),U.l(m,!1),t.A(),h.g(0),U.l(m,
!1),n.A(),q.g(0),L.U("u14",0,u),U.l(m,!1),h.A(),t.g(0),U.l(m,!1),w!==c-1&&n.g(0);L.set("s45");p.A();B.g(0);n.g(1);h.g(2);U.l(m,!1);p.g(0)},Ja:function(){return p}}}},ab={instance:function(a){function c(u){return T.instance({isFloat:u,width:e.C,isPot:!1,isFlipY:!1})}var e=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=c(!1),m=[c(!1),c(!1),c(!1)],q=[c(!1),c(!1),c(!1)],n=c(!0),t=[l,q[0],q[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((e.ea-1)/2).toFixed(2)).replace("2.2222",(1/e.C).toFixed(6));var h="uniform sampler2D u34,u35,u36,u37;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u34,vv0).rgb;float c=texture2D(u35,vv0).r,d=texture2D(u36,vv0).r,i=texture2D(u37,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",e.ma.toFixed(4)).replace("2.2222",e.gain.toFixed(4)),p={u1:0};L.Va([{id:"s53",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:p,i:["u1"],precision:"lowp"},{id:"s54",name:"_",h:a,j:p,i:["u1","u33"],precision:"lowp"},{id:"s55",name:"_",h:h,j:{u34:0,u35:1,u36:2,u37:3},i:["u34","u35","u36","u37"],precision:"highp"}]);return{process:function(){L.set("s53");l.J();U.l(e.Y,!1);L.set("s54");for(var u=0;3>u;++u)L.U("u33",1,0),m[u].A(),t[u].g(0),
U.l(!1,!1),L.U("u33",0,1),q[u].A(),m[u].g(0),U.l(!1,!1);L.set("s55");n.A();l.g(0);q[0].g(1);q[1].g(2);q[2].g(3);U.l(!1,!1);n.g(0)},Ja:function(){return n}}}},bb={instance:function(a){function c(p){return T.instance({isFloat:p,width:e.C,isPot:!1,isFlipY:!1})}var e=Object.assign({ma:.1,ea:9,C:128,gain:1,Y:!1},a),l=c(!1),m=c(!1),q=c(!1),n=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((e.ea-1)/2).toFixed(2)).replace("2.2222",(1/e.C).toFixed(6));var t="uniform sampler2D u0,u38;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u38,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",e.ma.toFixed(4)).replace("2.2222",e.gain.toFixed(4)),h={u1:0};L.Va([{id:"s56",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:h,i:["u1"],precision:"lowp"},{id:"s57",name:"_",h:a,j:h,i:["u1","u33"],precision:"lowp"},{id:"s58",name:"_",h:t,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"}]);return{process:function(){L.set("s56");l.J();U.l(e.Y,!1);L.set("s57");L.U("u33",1,0);m.A();l.g(0);U.l(!1,!1);L.U("u33",0,1);q.A();m.g(0);U.l(!1,!1);L.set("s58");n.A();l.g(0);q.g(1);U.l(!1,!1);n.g(0)},Ja:function(){return n}}}},gb={instance:function(a){function c(u){return T.instance({isFloat:u,width:e.C,isPot:!1,isFlipY:!1})}var e=Object.assign({ma:.1,
ea:9,C:128,gain:1,pc:0,La:!1,Y:!1},a),l=c(!1),m=null,q=null,n=null;e.La&&(m=c(!1),q=c(!1),n=c(!0));a={u1:0};var t=[{id:"s59",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",e.pc.toFixed(4)),j:a,i:["u1"],
precision:"lowp"}];if(e.La){var h="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u33;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u33*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((e.ea-1)/2).toFixed(2)).replace("2.2222",(1/e.C).toFixed(6)),p="uniform sampler2D u0,u38;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u38,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
e.ma.toFixed(4)).replace("2.2222",e.gain.toFixed(4));t.push({id:"s60",name:"_",h:h,j:a,i:["u1","u33"],precision:"lowp"},{id:"s61",name:"_",h:p,j:{u0:0,u38:1},i:["u0","u38"],precision:"highp"})}L.Va(t);return{process:function(){L.set("s59");l.J();U.l(e.Y,!1);e.La?(L.set("s60"),L.U("u33",1,0),m.A(),l.g(0),U.l(!1,!1),L.U("u33",0,1),q.A(),m.g(0),U.l(!1,!1),L.set("s61"),n.A(),l.g(0),q.g(1),U.l(!1,!1),n.g(0)):l.g(0)},Re:function(){return 2-e.pc},Ja:function(){return e.La?n:l}}}};
function pb(a,c){a[c]=!0;a.setAttribute(c,"true")}function qb(a,c){window.addEventListener("beforeunload",function(){c&&c.getTracks&&c.getTracks().forEach(function(e){c.removeTrack(e)});a.videoStream&&a.videoStream.stop();a.videoStream=null},!1)}function rb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}function sb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function tb(a){if(!a)return a;var c=null;if(a.video){var e=function(l){return l&&"object"===typeof l?Object.assign({},l):l};c={};"undefined"!==typeof a.video.width&&(c.width=e(a.video.width));"undefined"!==typeof a.video.height&&(c.height=e(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=e(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&ub(c,a.deviceId);return c}
function ub(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function wb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function xb(a){function c(w){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(r,H){return Math.abs(r-w)-Math.abs(H-w)})}function e(w){var r=tb(a);w=w(r);m.push(w);l(w)}function l(w){if(w.video&&w.video.facingMode&&w.video.facingMode.exact){var r=w.video.facingMode.exact;w=tb(w);delete w.video.facingMode.exact;w.video.facingMode.ideal=r;m.push(w)}}var m=[];if(!a||!a.video)return m;l(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var q=
c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),t={},h=0;for(t.sa=void 0;h<q.length;t={sa:t.sa},++h){t.sa=q[h];var p={},u=0;for(p.pa=void 0;u<n.length;p={pa:p.pa},++u)if(p.pa=n[u],t.sa!==a.video.width.ideal||p.pa!==a.video.height.ideal){var B=Math.max(t.sa,p.pa)/Math.min(t.sa,p.pa);B<4/3-.1||B>16/9+.1||e(function(w,r){return function(H){H.video.width.ideal=w.sa;H.video.height.ideal=r.pa;return H}}(t,p))}}}e(function(w){return wb(w)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&e(function(w){delete w.video.width.ideal;delete w.video.height.ideal;return w}),e(function(w){delete w.video.width;delete w.video.height;return w}));a.video.facingMode&&(e(function(w){delete w.video.facingMode;return w}),a.video.width&&a.video.height&&e(function(w){wb(w);delete w.video.facingMode;return w}));m.push({audio:a.audio,video:!0});return m}
function yb(a){a.volume=0;pb(a,"muted");if(rb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;pb(a,"muted")},5)}}
function zb(a,c,e,l){function m(n){q||(q=!0,e(n))}var q=!1;navigator.mediaDevices.getUserMedia(l).then(function(n){function t(){setTimeout(function(){if(a.currentTime){var p=a.videoHeight;if(0===a.videoWidth||0===p)m("VIDEO_NULLSIZE");else{p={pe:null,Wf:null,qf:null};try{var u=n.getVideoTracks()[0];u&&(p.qf=u,p.pe=u.getCapabilities(),p.Wf=u.getSettings())}catch(B){}q||(qb(a,n),c(a,n,p))}}else m("VIDEO_NOTSTARTED")},700)}function h(){a.removeEventListener("loadeddata",h,!1);var p=a.play();yb(a);"undefined"===
typeof p?t():p.then(function(){t()}).catch(function(){m("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=n);yb(a);a.addEventListener("loadeddata",h,!1)}).catch(function(n){m(n)})}
function Ab(a,c,e){var l=sb()?document.createElement("video"):!1;l?sb()?(pb(l,"autoplay"),pb(l,"playsinline"),e&&e.audio?l.volume=0:pb(l,"muted"),Bb(e).then(function(){zb(l,a,function(){function m(n){if(0===n.length)c("NO_VALID_MEDIASTREAM_FALLBACK_CONSTRAINTS");else{var t=n.shift();zb(l,a,function(){m(n)},t)}}var q=xb(e);m(q)},e)})):c&&c("MEDIASTREAMAPI_NOT_FOUND"):c&&c("VIDEO_NOT_PROVIDED")}
function Bb(a){if(!a||!a.video||!a.video.facingMode)return Promise.resolve("NO_VIDEO_CONSTRAINTS");if(a.video.deviceId)return Promise.resolve("DEVICEID_ALREADY_SET");var c=a.video.facingMode;c=c.exact||c.ideal;if(!c)return Promise.resolve("NO_FACINGMODE");var e={user:[],environment:["camera2 0"]}[c];return e&&0!==e.length?new Promise(function(l){Cb(function(m){m?(m=m.find(function(q){var n=q.label;return n?e.some(function(t){return n.includes(t)}):!1}))?(a.video.deviceId={exact:m.deviceId},l("SUCCESS")):
l("NO_PREFERRED_DEVICE_FOUND"):l("NO_DEVICES_FOUND")})}):Promise.resolve("NO_PREFERRED_CAMERAS")}function Cb(a){navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices?navigator.mediaDevices.enumerateDevices().then(function(c){(c=c.filter(function(e){return e.kind&&-1!==e.kind.toLowerCase().indexOf("video")&&e.label&&e.deviceId}))&&c.length&&0<c.length?a(c,!1):a(!1,"NODEVICESFOUND")}).catch(function(){a(!1,"PROMISEREJECTED")}):a(!1,"NOTSUPPORTED")}
var Db=function(){function a(g,K,Q,I,F,f,x){if(!H)if(x===f.length)F();else{switch(f[x]){case "A":Q();break;case "D":g();break;case "S":K().then(function(J,M){E.Xd();a(g,K,Q,M?null:I,F,f,++x)}).catch(function(J){console.log("An error occurred in the WebAR loop: ",J);F()});return;case "R":I&&I()}a(g,K,Q,I,F,f,++x)}}var c={n:5,ec:1,ac:0,Ie:[25,39],ze:45,ab:[2,200],k:.7,dg:200,vf:.05},e=-1,l=null,m=-1,q=-1,n=0,t=-1,h=-1,p=0,u=null,B=0,w=c.ab[1],r=Math.log(2),H=!0,E={We:function(){switch(e){case -1:return-1;
case 0:return h+l.ac;case 1:return p}},Le:function(g){switch(e){case -1:return 1;case 0:return Math.pow(Math.min(Math.max(t,0),l.n-1)/(l.n-1),g||1);case 1:return(p-l.ac)/(l.n-1)}},v:function(g){l=Object.assign({},c,g);t=h=l.ec;e=0;u=l.Ie.slice(0);E.reset();E.De().then(function(K){K>=l.ze||(K/=downScaleFPSThreshold,u[0]*=K,u[1]*=K)})},Xd:function(g){g=("undefined"===typeof g?Date.now():g)||0;var K=Math.min(Math.max(g-B,l.ab[0]),l.ab[1]);w=K;B=g;var Q=-1===m?0:l.k;m=Math.min(Math.max(1E3/K,5),120)*
(1-Q)+m*Q;g-q>l.dg&&5<++n&&(K=l.k,t=t*(1-K)+(m<u[0]?h-1:m>u[1]?h+1:h)*K,Math.abs(t-h)>1-l.vf&&(K=Math.min(Math.max(Math.round(t),0),l.n-1),K!==h&&(t=h=K,m=.5*(u[1]-u[0]))),q=g)},Id:function(g,K,Q,I,F,f){H=!1;a(g,K,Q,I,F,f,0)},stop:function(){H=!0},Of:function(g){p=g;e=1},cg:function(){e=0;E.reset()},reset:function(){w=c.ab[1];q=m=-1;n=0},nh:function(g,K,Q){Q=Math.exp(-r*w/Q);return(1-Q)*g+Q*K},Cg:function(){return w},De:function(){return new Promise(function(g){function K(x){x=x||Date.now();var J=
Math.max(0,x-I);I=x;0!==F++&&0<J&&(Q=Math.min(Q,J),++f);10>=F?window.requestAnimationFrame(K):g(Math.round(1E3/Q))}var Q=Infinity,I=0,F=0,f=0;setTimeout(K,1)})}};return E}(),Fb=function(){function a(){e(E+r.cc);g.port.postMessage("DONE")}function c(){F.Wa=0===r.ua?Q(e):Q(l)}function e(v){I.ya&&null!==H&&(v-=E,v=Math.min(Math.max(v,r.Nc[0]),r.Nc[1]),E+=v,q(),f.isEnabled&&f.Ma&&I.aa&&E-f.Yb>r.Fc&&(p(),f.Yb=E),H(E))}function l(v){I.ya&&(F.timeout=setTimeout(e.bind(null,v),r.ua))}function m(){H=null;
I.ya=!1;q()}function q(){F.Wa&&(window.cancelAnimationFrame(F.Wa),F.Wa=null);F.timeout&&(window.clearTimeout(F.timeout),F.timeout=null)}function n(v){v&&!I.aa?(I.aa=!0,K&&Db.cg(),g.port.postMessage("STOP"),Va.Yd(!0),c()):!v&&I.aa&&(I.aa=!1,K&&Db.Of(1),Va.Yd(!1),g.port.postMessage("START"))}function t(v){v.target.hidden?J():x()}function h(v,S,O){S=v.createShader(S);v.shaderSource(S,O);v.compileShader(S);return S}function p(){f.Ma=!1;var v=f.ha,S=f.kb,O=f.lb,d=f.X;v.uniform1f(f.bd,Math.random());f.za?
S.beginQueryEXT(d,O):v.beginQuery(d,O);v.drawElements(v.POINTS,1,v.UNSIGNED_SHORT,0);f.za?S.endQueryEXT(d):v.endQuery(d);Va.flush();B().then(function(k){0===k||isNaN(k)?(f.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",k)):(k=r.ae*r.Ec*1E3/k,f.Db=(f.Db+1)%r.Da,f.$b[f.Db]=k,++f.qd>r.Da&&(f.rb.set(f.$b),f.rb.sort(function(A,N){return A-N}),k=f.rb[Math.floor(r.Da/2)],f.cb=Math.max(f.cb,k),r.Dc(k/f.cb)),f.Ma=!0)}).catch(function(){f.Ma=
!0})}function u(v){var S=f.ha,O=f.kb,d=f.lb;d=f.za?O.vg(d,O.QUERY_RESULT_AVAILABLE_EXT):S.getQueryParameter(d,S.QUERY_RESULT_AVAILABLE);S=S.getParameter(O.GPU_DISJOINT_EXT);d?v(!S):setTimeout(u.bind(null,v),.1)}function B(){return new Promise(function(v,S){u(function(O){if(O){O=f.ha;var d=f.kb,k=f.lb;O=f.za?d.getQueryObjectEXT(k,d.QUERY_RESULT_EXT):O.getQueryParameter(k,O.QUERY_RESULT);v(O)}else S()})})}var w={md:!0,Nc:[1,200],cc:20,ua:0,Ec:50,ae:240,Fc:3E3,Da:3,Dc:null},r=null,H=null,E=0,g=null,
K=!1,Q=null,I={qa:!1,aa:!0,Xb:!1,Wb:!1,Vb:!1,ya:!1},F={Wa:null,timeout:null},f={isEnabled:!1,Ma:!1,ha:null,kb:null,lb:null,X:null,bd:null,za:!0,Yb:0,qd:0,$b:null,rb:null,Db:0,cb:0},x=n.bind(null,!0),J=n.bind(null,!1),M={v:function(v){r=Object.assign(w,v);Object.assign(I,{aa:!0,qa:!0,ya:!1});Q=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==r.Dc){v=document.createElement("canvas");v.setAttribute("width","1");v.setAttribute("height","1");var S={antialias:!1};v=v.getContext("webgl2",
S)||v.getContext("webgl",S);if(S=v.getExtension("EXT_disjoint_timer_query")||v.getExtension("EXT_disjoint_timer_query_webgl2")){f.ha=v;f.kb=S;f.isEnabled=!0;f.za=S.beginQueryEXT?!0:!1;var O=h(v,v.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),d=h(v,v.FRAGMENT_SHADER,"precision lowp float;uniform float u39;void main(){vec4 a=u39*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",r.Ec.toString())),k=v.createProgram();v.attachShader(k,O);v.attachShader(k,
d);v.linkProgram(k);O=v.getAttribLocation(k,"a0");f.bd=v.getUniformLocation(k,"u39");v.useProgram(k);v.enableVertexAttribArray(O);k=v.createBuffer();v.bindBuffer(v.ARRAY_BUFFER,k);v.bufferData(v.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),v.STATIC_DRAW);v.vertexAttribPointer(O,4,v.FLOAT,!1,16,0);k=v.createBuffer();v.bindBuffer(v.ELEMENT_ARRAY_BUFFER,k);v.bufferData(v.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),v.STATIC_DRAW);v.disable(v.DEPTH_TEST);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.viewport(0,
0,1,1);k=f.za?S.createQueryEXT():v.createQuery();f.lb=k;f.X=S.TIME_ELAPSED_EXT||v.TIME_ELAPSED;f.Yb=-r.Fc;f.$b=new Float32Array(r.Da);f.rb=new Float32Array(r.Da);f.cb=0;f.Db=0;f.qd=0;f.Ma=!0}}if(r.md){v=!1;try{if("undefined"===typeof SharedWorker){var A=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
r.cc.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),N=new Worker(A);N.addEventListener("message",a);g={Ad:N,port:N};I.Xb=!0}else{var G=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
r.cc.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),da=new SharedWorker(G);da.port.start();da.port.addEventListener("message",a);g={Ad:da,port:da.port};I.Wb=!0}v=!0}catch(ha){}v&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",t):(window.addEventListener("blur",J),window.addEventListener("focus",x)),window.addEventListener("pagehide",
J),window.addEventListener("pageshow",x),I.Vb=!0)}K="undefined"!==typeof Db},m:function(){m();I.Vb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",t):(window.removeEventListener("blur",J),window.removeEventListener("focus",x)),window.removeEventListener("pagehide",J),window.removeEventListener("pageshow",x),I.Vb=!1);I.Wb?(g.port.close(),I.Wb=!1):I.Xb&&(g.Ad.terminate(),I.Xb=!1);Object.assign(I,{aa:!0,qa:!1,ya:!1});H=null},Yg:function(){return I.aa},update:function(v){Object.assign(r,
v)},Id:function(v){I.qa||M.v({});q();I.ya=!0;H=v;I.aa&&c()},stop:m};return M}(),Gb=function(){function a(B,w){var r=B[0]-.5;B=B[1]-.5;var H=w[0]-.5;w=w[1]-.5;return r*r+B*B-(H*H+w*w)}var c={xd:4,vb:[1.5,1.5,2],ca:[.1,.1,.1],Kd:1,C:-1,ja:-1,Zf:2,uf:1,sc:!0,Be:.8},e=null,l=[],m=[],q=[],n=[0],t=[.5,.5,1],h=null,p=0,u=[0,0,0];return{v:function(B){e=Object.assign({},c,B);l.splice(0);m.splice(0);q.splice(0);p=0;B=e.vb[0]*e.ca[0];var w=e.vb[1]*e.ca[1],r=1/(1+e.vb[2]*e.ca[2]),H=e.Kd*Math.min(e.C,e.ja),E=
H/e.C;H/=e.ja;var g=.5*e.Be;g*=g;for(var K=0;K<e.xd;++K){var Q=[];m.push(Q);var I=Math.pow(r,K),F=E*I,f=H*I;I=F*e.uf;q.push(I);var x=F*B,J=f*w;F/=2;f/=2;for(var M=1+(1-F-F)/x,v=1+(1-f-f)/J,S=0;S<v;++S)for(var O=f+S*J,d=O-.5,k=0;k<M;++k){var A=F+k*x,N=A-.5;N*N+d*d>g||(A=[A,O,I],l.push(A),Q.push(A))}e.sc&&Q.sort(a);h=l}e.sc&&l.sort(a)},get:function(B){var w=h.length;if(0===w)return t;for(;B>=n.length;)n.push(0);n[B]>=w&&(n[B]=0);var r=h[Math.floor(n[B])%w];n[B]=(n[B]+1/e.Zf)%w;if(0===p)return r;u[0]=
r[0];u[1]=r[1];u[2]=p;return u},$g:function(B){B>=n.length||(n[B]=Math.floor(Math.random()*h.length))},dh:function(B){p=B;if(0===p)h=l;else{for(var w=q.length,r=w-1,H=0;H<w;++H)if(q[H]<=B){r=H;break}h=m[r]}},reset:function(){for(var B=l.length/n.length,w=0;w<n.length;++w)n[w]=Math.floor(w*B);p=0;h=l}}}(),Hb={Pb:function(){return Date.now()},yg:function(){return performance.now()}},Ib=function(){var a={ff:!0,isLinear:!0,dc:[4,11]};return{ug:function(c,e,l){return e.isDetected?Math.floor(e.s*c):(c=
Math.floor(Math.log2(c/4)),c=Math.min(Math.max(c,4),9),Math.max(l,Math.pow(2,c)))},instance:function(c){var e=Object.assign({},a,c),l=[],m=null,q=-1,n=null,t=!1;for(c=e.dc[0];c<=e.dc[1];++c)l[c]=null;return{J:function(h,p){p!==q&&(m&&m.remove(),m=T.instance({isLinear:e.isLinear,isPot:!0,width:p}));if(t=e.ff&&p<.5*h){h=Math.floor(Math.log2(h));var u=e.dc;h=Math.min(Math.max(h,u[0]),u[1]);u=h;if(!l[u]){var B=T.instance({isPot:!0,isMipmap:!0,nd:!0,width:Math.pow(2,u)});l[u]={ba:B,ud:-1}}h=l[h];n=h.ba;
h.ud!==p&&(u=Math.log2(p),n.g(0),n.Qd(u),T.P(0),h.ud=p)}else n=m;q=p;n.J()},g:function(h){n.g(h);t&&n.gb()},va:function(h){n.va(h)},remove:function(){m&&m.remove();l.forEach(function(h){h&&h.ba.remove()})}}}}}(),Jb=function(){var a=0,c=null,e=null,l=null,m=null;return{v:function(q,n){a=q.length;c=n;e=q;l=new Float32Array(a);m=new Float32Array(a)},Xe:function(){return m},Yf:function(q,n,t){q.forEach(function(h,p){var u=Math.min(1,e[p]*t*(n+.33*(1-n)));h=u*h+(1-u)*l[p];l[p]=h;h=c[p](h);h=Math.min(Math.max(h,
0),1);m[p]=h})}}}(),W={VERSION:"1.4.1",ta:[],Hb:!1,Ib:!1,Gb:!1,Ua:!0,Ta:!1,ready:!1,initialized:!1},Kb={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",Gc:"../../",ua:0,width:512,height:512,$f:40,Ld:[.6,5.8],ca:[.07,.07,.15],Lf:.7,Jf:2,Kf:[2,2,2],fb:!0,He:[.03,.005],threshold:.8,Vd:.7,Wd:.03,Ae:.06,Ge:.02,
de:[1,.05],gg:10,cf:!1,Fb:[2,7],O:{cd:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},hc:11,vd:1,rf:1,ee:[.1,.01],Hf:[.4,-.7,-.4],If:[.3,0,0],ye:!1,fe:.001,Jc:[Math.PI/10,Math.PI/6],Cd:[.1,.4],Dd:[.009,.02],Ed:[.1,.2],fc:5,dd:.1,ce:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],sf:[Ja.bind(null,.1,.8),Ja.bind(null,.1,.8),Ja.bind(null,.1,.5),Ja.bind(null,.1,.5),Ja.bind(null,.1,.6),Ja.bind(null,.1,.6),function(a,c,e){a=Math.min(Math.max((e-a)/(c-a),0),1);return a*a*(3-2*a)}.bind(null,0,.5),Ja.bind(null,
.2,.9),Ja.bind(null,.7,.85),Ja.bind(null,.7,.85),Ja.bind(null,.15,.6)]};W.get_nMorphs=function(){return b.hc};var Lb=null,Mb=null,Nb=null,Ob=[],Pb=b.threshold;
function Qb(){function a(){1===++da&&(Jb.v(b.ce,b.sf),c(),W.ready=!0,W.ta.forEach(function(z){z()}),W.ta.splice(0,W.ta.length),e(),da=0)}function c(){I=new Float32Array(b.hc);F=new Float32Array(b.hc);f=new Uint8Array(g*g*4);W.get_morphTargetInfluences=function(){return I};W.get_morphTargetInfluencesStabilized=function(){return Jb.Xe()};W.set_morphUpdateCallback=function(z){x=z};W.get_rotation=function(){return v};W.get_positionScale=function(){var z=K.Td.Ue();z.Nb(!1);z=z.qc();d[0]=1-z[1][0];d[1]=
z[2][0];d[2]=z[3][0]*A.G[0];return d};W.get_rotationStabilized=function(){return O};W.switch_sleep=function(z){ma!==ha.vc||z?ma=z?ha.vc:ha.play:e()};W.on_detect=function(z){z(y.$);y.kc.push(z)};W.is_detected=function(){return y.$};W.set_animateDelay=function(z){H=z;Fb.update({ua:H})}}function e(){ma!==ha.play&&(ma=ha.play,Fb.stop(),l())}function l(){var z,P;return Aa(new ua(new oa(function(aa){switch(aa.la){case 1:a:{if("VIDEO"===G.element.nodeName){var R=G.element.currentTime-ya;0>R&&(ya=G.element.currentTime);
if(1E3*R<b.gg)break a;ya+=R}G.ba.refresh();R=xa.$c();R[0]===G.G[0]&&R[1]===G.G[1]||p()}z=Db.We();P=0;case 2:if(!(P<z)){aa.la=4;break}R=K;var na=E;L.set("s63");Xa.Z();R.fd.J(.5*Math.min(G.G[0],G.G[1]),r);G.ba.g(0);R.zb.g(1);b.fb&&L.L("u40",k);U.l(!1,!1);na.T(R.fd);b.cf?R=T.Ff(J,f).then(m):(T.Ef(J,f),m(),R=Promise.resolve());aa.la=3;return{value:R};case 3:++P;aa.la=2;break;case 4:Kb.disableRendering||(R=K,Xa.Z(),Q.J(),L.set("s66"),b.fb&&L.L("u40",k),R.zb.g(0),U.l(!1,!1)),R=Db.Le(),N=3*(1-R)+1*R,Db.Xd(),
W.Ua&&(Xa.bg(),L.set("s62"),G.ba.g(0),U.l(!1,!1),C.enable(C.BLEND),C.blendFunc(C.SRC_ALPHA,C.ONE),Q.g(0),U.l(!1,!1),C.disable(C.BLEND)),C.flush(),ma!==ha.vc&&Fb.Id(l),aa.la=0}})))}function m(){t();if(!b.ye&&y.$){for(var z=0,P=0;3>P;++P)z=n(P+b.O.rotation[0],b.O.rotation[1]),z=(2*z-1)*b.Hf[P],z+=b.If[P],M[P]=z;b.fb&&(P=Da(b.He,ba.V),k=k*(1-P)+(-z+k)*P)}q();z=Hb.Pb();P=Math.max(1,z-ba.sd);var aa=n(b.O.quality[0],b.O.quality[1]);ba.Bd=Ja(b.Cd[0],b.Cd[1],aa);aa=n(b.O.position[0],b.O.position[1]);var R=
n(b.O.position[0]+1,b.O.position[1]),na=n(b.O.position[0]+2,b.O.position[1]);ba.Jd=1-Ja(b.Ed[0],b.Ed[1],Math.sqrt(aa*aa+R*R+na*na)/P);aa=ba.Aa[0]-M[0];R=ba.Aa[1]-M[1];na=ba.Aa[2]-M[2];P=Math.sqrt(aa*aa+R*R+na*na)/P;ba.Aa[0]=M[0];ba.Aa[1]=M[1];ba.Aa[2]=M[2];ba.Fd=1-Ja(b.Dd[0],b.Dd[1],P);ba.V=ba.Bd*ba.Jd*ba.Fd;ba.sd=z;ba.rd[ba.Zb]=ba.V;ba.Zb=(ba.Zb+1)%b.fc;for(z=0;z<b.fc;++z)ba.V=Math.min(ba.rd[z],ba.V);Jb.Yf(I,ba.V,N,F);x&&x(ba.V,N);if(y.$){z=N*Da(b.ee,ba.V);for(P=0;3>P;++P)v[P]=z*M[P]+(1-z)*v[P],
O[P]=v[P];O[2]-=k}else z=Hb.Pb()*b.fe,S[0]=b.Jc[0]*Math.sin(z),S[1]=b.Jc[1]*Math.cos(z),O[0]=S[0],O[1]=S[1],O[2]=S[2]}function q(){var z=n(b.O.cd[0],b.O.cd[1]);y.pb=b.dd*z+(1-b.dd)*y.pb;y.pb>b.Vd+b.Wd&&!y.$?(y.kc.forEach(function(P){P(!0)}),y.$=!0):y.pb<b.Vd-b.Wd&&y.$&&(y.kc.forEach(function(P){P(!1)}),y.$=!1,k=0)}function n(z,P){z+=g*P;return(f[4*z]+f[4*z+1]+f[4*z+2]+f[4*z+3])/1020}function t(){I.forEach(function(z,P){if(y.$){var aa=(b.vd+P)%g,R=b.rf+Math.floor((b.vd+P)/g);R=g-1-R;aa+=g*R;R=f.slice(4*
aa,4*aa+4);aa=(R[0]+R[1]+R[2]+R[3])/1020;R=b.Ge*Math.sqrt((R[0]*R[0]+R[1]*R[1]+R[2]*R[2]+R[3]*R[3])/1020-aa*aa);I[P]=z>aa-R&&z<aa+R?z:aa}else I[P]=0})}function h(z){E=new ob({Oa:z.layers,ub:"gpuRaw",tb:function(P){var aa=K;aa.zb.Od(1);C.viewport(0,0,1,1);L.set("s64");b.fb&&L.L("u40",k);L.L("u41",ba.V);L.Tf("u42",Gb.get(0));U.l(!1,!1);aa.Td.Od(1);L.set("s65");L.L("u41",ba.V);aa.zb.g(0);U.l(!1,!1);J=P}});z=E.Te();z!==r&&(r=z,u(),B());g=E.Ze();a()}function p(){var z=xa.$c();G.G[0]=z[0];G.G[1]=z[1];Ya.hb().width=
z[0];Ya.hb().height=z[1];b.width=z[0];b.height=z[1];z=G.fg;var P=G.G[1]/G.G[0],aa=Ya.W()/Ya.I();P>aa?1>=P?z[0]*=P:z[1]/=P:(z[0]*=P,P=1/aa,z[0]*=P,z[1]*=P);z[1]*=aa;L.M("s66",[{name:"u43",type:"1f",value:aa}]);G.D[0]=0;G.D[1]=0;G.D[2]=0;G.D[3]=0;switch(Kb.rotate){case 0:G.D[0]=z[0];G.D[3]=z[1];break;case 180:G.D[0]=-z[0];G.D[3]=-z[1];break;case 90:G.D[1]=z[0];G.D[2]=-z[1];break;case -90:G.D[1]=-z[0],G.D[2]=z[1]}z=[{type:"mat2",name:"u44",value:G.D}];L.M("s63",z);L.M("s62",z);L.M("s66",[{type:"mat2",
name:"u44",value:90===Math.abs(Kb.rotate)?[0,-G.D[1],-G.D[2],0]:G.D}])}function u(){A.C=b.width;A.ja=b.height;Gb.v({vb:b.Kf,xd:b.Jf,C:A.C,ja:A.ja,Kd:b.Lf,ca:b.ca,sc:!0});A.G=[1,A.C/A.ja]}function B(){L.M("s62",[{type:"1i",name:"u1",value:0}]);L.M("s63",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u40",value:0},{type:"2f",name:"u46",value:A.G}]);L.M("s66",[{type:"1i",name:"u45",value:0},{type:"2f",name:"u46",value:A.G},{type:"1f",name:"u40",value:0},{type:"3f",name:"u47",
value:[0,.5,1]}]);L.M("s64",[{type:"1i",name:"u48",value:0},{type:"1i",name:"u45",value:1},{type:"1f",name:"u49",value:b.Ld[0]},{type:"1f",name:"u50",value:b.Ld[1]},{type:"1f",name:"u51",value:b.$f},{type:"1f",name:"u52",value:Pb},{type:"1f",name:"u53",value:b.Ae},{type:"1f",name:"u40",value:0},{type:"3f",name:"u54",value:[b.ca[0]*A.G[0],b.ca[1]*A.G[1],b.ca[2]]}]);L.M("s65",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u12",value:1},{type:"2f",name:"u55",value:b.de}])}function w(z){var P=new Float32Array([0,
.5,.5,0]);z.fd=Ib.instance({});P={width:1,height:1,isFloat:!0,isPot:!1,array:P};z.zb=Za.instance(P);z.Td=Za.instance(P)}var r=64,H=b.ua,E=null,g=0,K={},Q=null,I=null,F=null,f=null,x=null,J=null,M=[0,0,0],v=[0,0,0],S=[0,0,0],O=[0,0,0],d=[0,0,0],k=0,A={G:null,C:-1,ja:-1},N=1,G={fg:[.5,.5],D:[.5,0,0,.5],element:null,ba:null,G:[-1,-1]},da=0,ha={ue:-4,tf:-3,Zg:-2,vc:-1,play:0},ma=ha.tf,y={pb:0,$:!1,kc:[]},ba={V:1,Jd:1,Bd:1,Fd:1,Aa:[0,0,0],sd:Hb.Pb(),rd:new Float32Array(b.fc),Zb:0},ya=0,xa={v:function(){G.ba=
T.instance({K:G.element,isPot:!1,isFloat:!1,isFlipY:!0});Q=T.instance({isPot:!1,isFloat:!1,width:A.C,height:A.ja});w(K);Fb.v({md:!1,ua:H});Db.v({ec:0,n:b.Fb[1]-b.Fb[0]+1,ac:b.Fb[0]});Nb?h(Nb):Ea(function(z){z=JSON.parse(z);h(z)})},m:function(){Fb.stop();E&&(E.m(),E=null);ma=ha.ue},qe:function(z){W.Hb&&W.Hb();var P={video:{facingMode:{ideal:Kb.facingMode},width:{min:Kb.minWidth,max:Kb.maxWidth,ideal:Kb.idealWidth},height:{min:Kb.minHeight,max:Kb.maxHeight,ideal:Kb.idealHeight}},audio:Kb.isAudio};ub(P,
Kb.deviceId);Ab(function(aa,R){Lb=R;W.Ib&&W.Ib();z(aa)},function(){window.Eb&&window.Eb("WEBCAM_UNAVAILABLE")},P)},td:function(z,P){L.Va([{id:"s62",name:"_",Ca:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",Xa:["a0"],Ga:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u44"],precision:"lowp"},{id:"s63",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
Ca:"attribute vec2 a0;uniform sampler2D u45;uniform mat2 u44;uniform vec2 u46;uniform float u40;const vec2 e=vec2(.25,.5),f=vec2(.5);varying vec2 vv0;void main(){vec4 a=texture2D(u45,e);vec2 d=a.gb,h=a.a*u46;float b=cos(u40),c=sin(u40);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u44*k,gl_Position=vec4(a0,0.,1.);}",Xa:["a0"],Ga:[2],i:["u1","u45","u46","u44","u40"],precision:"lowp"},{id:"s64",name:"_",Ca:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u48,u45;uniform vec3 u42,u54;uniform float u49,u50,u51,u52,u41,u53,u40;varying vec2 vv0;const vec4 e=vec4(.25);void main(){vec4 h=texture2D(u48,vec2(.4375,.9375)),i=texture2D(u48,vec2(.5625,.9375));float j=dot(h-i,e);bool k=j>u52;vec4 a=texture2D(u45,vec2(.5,.5));k?a.r=2.:a.r>u51?a.r=0.:a.r>1.9&&(a.a>u50||a.a<u49)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u42,a.r=1.;else{float l=dot(e,texture2D(u48,vec2(.0625,.9375))),m=dot(e,texture2D(u48,vec2(.1875,.9375))),d=dot(e,texture2D(u48,vec2(.3125,.9375))),f=cos(u40),g=sin(u40);vec2 c=mat2(f,g,-g,f)*vec2(l,m);float b;a.r>1.9?(b=1.-u41,b*=1.-step(abs(c.x),u53)*step(abs(c.y),u53)*step(abs(d),u53)):(b=1.,a.r=0.),a.gba+=vec3(c,d)*u54*a.a*b;}gl_FragColor=a;}",
i:"u48 u45 u42 u49 u50 u51 u52 u54 u41 u53 u40".split(" ")},{id:"s66",name:"_",Ca:"attribute vec2 a0;uniform mat2 u44;varying vec2 vv0;const vec2 f=vec2(.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u44*a0;}",h:"uniform sampler2D u45;uniform vec3 u47;uniform vec2 u46;uniform float u40,u43;varying vec2 vv0;const vec2 l=vec2(1),e=vec2(.5),m=vec2(.25,.5);void main(){float f=cos(u40),g=-sin(u40);mat2 h=mat2(f,g/u43,-g*u43,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u45,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u46,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u47*max(a.x,a.y),1.);}",
i:"u45 u46 u47 u44 u40 u43".split(" "),precision:"lowp"},{id:"s65",name:"_",h:"uniform sampler2D u1,u12;uniform vec2 u55;uniform float u41;const vec4 f=vec4(1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u12,vv0);float c=mix(u55.x,u55.y,u41);gl_FragColor=mix(b,a,c*f);}",i:["u1","u12","u55","u41"]}]);G.element=z;Mb=G.element;p();u();B();xa.v();P&&P()},$c:function(){var z=[-1,-1],P=G.element;"VIDEO"===P.nodeName?(z[0]=P.videoWidth,z[1]=P.videoHeight):(z[0]=P.width,z[1]=P.height);
90===Math.abs(Kb.rotate)&&z.reverse();return z}};Ob.push(xa);return xa}W.onLoad=function(a){W.ready?a():W.ta.push(a)};W.switch_displayVideo=function(a){W.Ua=a;W.Ta&&(W.Ta.style.display=W.Ua?"block":"none")};W.onWebcamAsk=function(a){W.Hb=a};W.onContextLost=function(a){W.Gb=a};W.onWebcamGet=function(a){W.Ib=a};
W.destroy=function(){Fb.m();Mb&&Mb.srcObject&&Mb.srcObject.getTracks().forEach(function(a){a.stop()});Ob.forEach(function(a){a.m()});Ob.splice(0);Ya.m();W.switch_displayVideo(!1);W.initialized=!1;W.ta.splice(0)};W.set_size=function(a,c){b.width=a;b.height=c};W.get_size=function(){return{width:b.width,height:b.height}};W.get_videoStream=function(){return Lb};W.get_video=function(){return Mb};W.get_cv=function(){return Ya.hb()};W.set_color=function(a){L.M("s66",[{type:"3f",name:"u47",value:a}])};
W.init=function(a){var c=Qb(),e=a.callbackReady||function(q){console.log("ERR:",q)},l=a.callbackReady?a.callbackReady.bind(null,!1):null;if(a.canvasId||a.canvas){var m=a.canvas?a.canvas:document.getElementById(a.canvasId);if(m)if(W.initialized)e("ALREADY_INITIALIZED");else{W.initialized=!0;window.Eb=e?function(q){e(q);window.Eb=!1}:!1;a.NNCPath&&(b.Gc=a.NNCPath);"undefined"!==typeof a.NNC&&(Nb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);l&&W.ta.push(l);Pb=a.threshold||Pb;if(!Ya.v({Za:m,width:b.width,
height:b.height,debug:!1,jd:!1,jc:function(){W.Gb&&W.Gb()},premultipliedAlpha:!1}))return e("GL_INCOMPATIBLE"),!1;W.Ta=Ya.hb();W.Ua||(W.Ta.style.display="none");a.videoSettings&&a.videoSettings.videoElement?c.td(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Kb,a.videoSettings),c.qe(function(q){c.td(q,!1)}));return!0}else e("INVALID_CANVAS")}else e("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=W;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();