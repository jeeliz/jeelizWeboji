 /**
 * Jeeliz Weboji - https://github.com/jeeliz/jeelizWeboji
 *
 * Copyright 2020 WebAR.rocks ( https://webar.rocks )
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
*/

var JEELIZFACEEXPRESSIONS=(function(){function ca(){this.Ka=!1;this.ja=null;this.Sd=void 0;this.ha=1;this.Rc=this.he=0;this.Da=null}function ea(a){if(a.Ka)throw new TypeError("Generator is already running");a.Ka=!0}ca.prototype.La=function(a){this.Sd=a};ca.prototype.Oa=function(a){this.Da={ue:a,Ve:!0};this.ha=this.he||this.Rc};ca.prototype.return=function(a){this.Da={return:a};this.ha=this.Rc};function oa(a){this.o=new ca;this.jf=a}
oa.prototype.La=function(a){ea(this.o);if(this.o.ja)return pa(this,this.o.ja.next,a,this.o.La);this.o.La(a);return ra(this)};function ta(a,c){ea(a.o);var d=a.o.ja;if(d)return pa(a,"return"in d?d["return"]:function(h){return{value:h,done:!0}},c,a.o.return);a.o.return(c);return ra(a)}oa.prototype.Oa=function(a){ea(this.o);if(this.o.ja)return pa(this,this.o.ja["throw"],a,this.o.La);this.o.Oa(a);return ra(this)};
function pa(a,c,d,h){try{var u=c.call(a.o.ja,d);if(!(u instanceof Object))throw new TypeError("Iterator result "+u+" is not an object");if(!u.done)return a.o.Ka=!1,u;var k=u.value}catch(n){return a.o.ja=null,a.o.Oa(n),ra(a)}a.o.ja=null;h.call(a.o,k);return ra(a)}
function ra(a){for(;a.o.ha;)try{var c=a.jf(a.o);if(c)return a.o.Ka=!1,{value:c.value,done:!1}}catch(d){a.o.Sd=void 0,a.o.Oa(d)}a.o.Ka=!1;if(a.o.Da){c=a.o.Da;a.o.Da=null;if(c.Ve)throw c.ue;return{value:c.return,done:!0}}return{value:void 0,done:!0}}function va(a){this.next=function(c){return a.La(c)};this.throw=function(c){return a.Oa(c)};this.return=function(c){return ta(a,c)};this[Symbol.iterator]=function(){return this}}
function Ba(a){function c(h){return a.next(h)}function d(h){return a.throw(h)}return new Promise(function(h,u){function k(n){n.done?h(n.value):Promise.resolve(n.value).then(c,d).then(k,u)}k(a.next())})}function Da(a){var c=new XMLHttpRequest;c.open("GET",b.Bc+b.neuralNetworkPath,!0);c.withCredentials=!1;c.onreadystatechange=function(){4!==c.readyState||200!==c.status&&0!==c.status||a(c.responseText)};c.send()}
function Ea(a,c){if(0===c||"object"!==typeof a)return a;a=Object.assign({},a);c=void 0===c||-1===c?-1:c-1;for(var d in a)a[d]=Ea(a[d],c);return a}function Ia(a,c,d){return Math.min(Math.max((d-a)/(c-a),0),1)}
function Ja(a){switch(a){case "relu":return"gl_FragColor=max(vec4(0.,0.,0.,0.),gl_FragColor);";case "elu":return"gl_FragColor=mix(exp(-abs(gl_FragColor))-vec4(1.,1.,1.,1.),gl_FragColor,step(0.,gl_FragColor));";case "elu01":return"gl_FragColor=mix(0.1*exp(-abs(gl_FragColor))-vec4(0.1,0.1,0.1,0.1),gl_FragColor,step(0.,gl_FragColor));";case "arctan":return"gl_FragColor=atan(3.14159265359*texture2D(u0,vUV))/3.14159265359;";case "copy":return"";default:return!1}}
function Ka(a,c){var d=c%8;return a[(c-d)/8]>>7-d&1}function Oa(a,c,d){var h=1,u=0;for(d=c+d-1;d>=c;--d)u+=h*Ka(a,d),h*=2;return u}function Pa(a){a=a.data;a="undefined"===typeof btoa?Buffer.from(a,"base64").toString("latin1"):atob(a);for(var c=a.length,d=new Uint8Array(c),h=0;h<c;++h)d[h]=a.charCodeAt(h);return d}function Qa(a){return"string"===typeof a?JSON.parse(a):a}
function Ra(a){if("undefined"===typeof Qa(a).nb){var c=Qa(a);a=c.ne;var d=c.nf,h=c.n;c=Pa(c);for(var u=new Float32Array(h),k=new Float32Array(d),n=a+d+1,q=0;q<h;++q){var l=n*q,p=0===Ka(c,l)?1:-1,w=Oa(c,l+1,a);l=l+1+a;for(var C=k.length,y=0,D=l;D<l+C;++D)k[y]=Ka(c,D),++y;for(C=l=0;C<d;++C)l+=k[C]*Math.pow(2,-C-1);u[q]=0===l&&0===w?0:p*(1+l)*Math.pow(2,1+w-Math.pow(2,a-1))}a=u}else if(h=Qa(a),a=h.nb,0===a)a=new Uint8Array(h.nb);else{d=h.n;h=Pa(h);c=new Uint32Array(d);for(u=0;u<d;++u)c[u]=Oa(h,u*a,a);
a=c}return a}
var M=function(){function a(r,m,f){m=r.createShader(m);r.shaderSource(m,f);r.compileShader(m);return r.getShaderParameter(m,r.COMPILE_STATUS)?m:null}function c(r,m,f){m=a(r,r.VERTEX_SHADER,m);f=a(r,r.FRAGMENT_SHADER,f);r===H&&q.push(m,f);var G=r.createProgram();r.attachShader(G,m);r.attachShader(G,f);r.linkProgram(G);return G}function d(r){return["float","sampler2D","int"].map(function(m){return"precision "+r+" "+m+";\n"}).join("")}function h(r,m){m.B=m.B?!0:!1;if(!m.B){m.Aa=m.Aa||"precision lowp float;attribute vec2 a0;varying vec2 vv0;void main(){gl_Position=vec4(a0,0.,1.),vv0=a0*.5+vec2(.5);}";m.Ta=
m.Ta||["a0"];m.Ea=m.Ea||[2];m.precision=m.precision||y;m.id=w++;void 0!==m.Gd&&(m.Gd.forEach(function(O,R){m.h=m.h.replace(O,m.tb[R])}),m.Gd.splice(0));m.xc=0;m.Ea.forEach(function(O){m.xc+=4*O});var f=d(m.precision);m.pa=c(r,f+m.Aa,f+m.h);m.v={};m.i.forEach(function(O){m.v[O]=r.getUniformLocation(m.pa,O)});m.attributes={};m.Fa=[];m.Ta.forEach(function(O){var R=r.getAttribLocation(m.pa,O);m.attributes[O]=R;m.Fa.push(R)});if(m.j){r.useProgram(m.pa);p=m;l=m.id;for(var G in m.j)r.uniform1i(m.v[G],m.j[G])}m.oa=
!0}}function u(r){Sa.Gf(x);l!==r.id&&(x.N(),l=r.id,p=r,H.useProgram(r.pa),r.Fa.forEach(function(m){0!==m&&H.enableVertexAttribArray(m)}))}function k(r,m,f){h(r,m,f);r.useProgram(m.pa);r.enableVertexAttribArray(m.attributes.a0);l=-1;return p=m}function n(){return{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1"],j:{u1:0}}}var q=[],l=-1,p=null,w=0,C=!1,y="highp",D=["u1"],v=["u0"],B={u1:0},e={u0:0},J={u1:0,u2:1},K={u1:0,u3:1},g=["u1","u3","u4"],L={u5:0},
t={s0:n(),s1:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:D,j:B,precision:"lowp"},s2:{h:"uniform sampler2D u1,u2;varying vec2 vv0;void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a*b;}",i:["u1","u2"],j:J},s3:{h:"uniform sampler2D u1;uniform vec2 u6,u7;varying vec2 vv0;void main(){vec2 a=vv0*u6+u7;gl_FragColor=texture2D(u1,a);}",i:["u1","u6","u7"],j:B,B:!0},s4:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a.r*f;}",
i:D,j:B},s5:{h:"uniform sampler2D u1,u2;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u2,vv0),b=texture2D(u1,vv0);gl_FragColor=a.a*b.r*f;}",i:["u1","u2"],j:J},s6:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(1.-vv0.x,vv0.y));}",i:D,j:B},s7:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vec2(vv0.x,1.-vv0.y));}",i:D,j:B},s8:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=a*u6;}",
i:["u0","u6"],j:e},s9:{h:"uniform sampler2D u0;uniform float u6;varying vec2 vv0;const vec4 f=vec4(.25,.25,.25,.25),g=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);float b=dot(a*u6,f);gl_FragColor=b*g;}",i:["u0","u6"],j:e},s10:{h:"uniform sampler2D u1;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){float a=.25*dot(e,texture2D(u1,vv0));gl_FragColor=a*e;}",i:D,j:B},s11:{h:"uniform sampler2D u1,u8;uniform float u9;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);gl_FragColor=mix(b,a,u9*f);}",
i:["u1","u8","u9"],j:{u1:0,u8:1}},s12:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;void main(){gl_FragColor=.25*(texture2D(u1,vv0+u10)+texture2D(u1,vv0+u10*vec2(1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,-1.))+texture2D(u1,vv0+u10*vec2(-1.,1.)));}",i:["u1","u10"],j:B},s13:{h:"uniform sampler2D u1;uniform vec4 u11;varying vec2 vv0;float g(float a,float b){a=floor(a)+.5;return floor(a/exp2(b));}float h(float a,float b){return floor(a*exp2(b)+.5);}float i(float a,float b){return mod(a,h(1.,b));}float e(float c,float a,float b){a=floor(a+.5),b=floor(b+.5);return i(g(c,a),b-a);}vec4 j(float a){if(a==0.)return vec4(0.,0.,0.,0.);float k=128.*step(a,0.);a=abs(a);float c=floor(log2(a)),l=c+127.,b=(a/exp2(c)-1.)*8388608.,d=l/2.,m=fract(d)*2.,n=floor(d),o=e(b,0.,8.),p=e(b,8.,16.),q=m*128.+e(b,16.,23.),r=k+n;return vec4(o,p,q,r)/255.;}void main(){float a=dot(texture2D(u1,vv0),u11);gl_FragColor=j(a);}",
i:["u1","u11"],j:B},s14:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=e/(e+exp(-a));gl_FragColor=b;}",i:v,j:e,B:!0},s15:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(0.,0.,0.,0.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=max(f,a);}",i:v,j:e},s16:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0);gl_FragColor=mix(exp(-abs(a))-f,a,step(0.,a));}",i:v,j:e},
s17:{h:"uniform sampler2D u0;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=texture2D(u0,vv0),b=exp(-abs(a))-f;gl_FragColor=mix(.1*b,a,step(0.,a));}",i:v,j:e},s18:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=atan(e*texture2D(u0,vv0))/e;}",i:v,j:e},s19:{h:"uniform sampler2D u0;const float e=3.141593;varying vec2 vv0;void main(){gl_FragColor=2.*atan(e*texture2D(u0,vv0))/e;}",i:v,j:e,B:!0},s20:{h:"uniform sampler2D u0,u12;uniform float u13;const vec2 e=vec2(.5,.5);const float f=1e-5;const vec4 g=vec4(1.,1.,1.,1.),i=vec4(0.,0.,0.,0.);varying vec2 vv0;void main(){vec4 a=texture2D(u12,e);float b=u13*u13;vec4 c=max(b*a,f*g);gl_FragColor=texture2D(u0,vv0)/c;}",
i:["u0","u12","u13"],j:{u0:0,u12:1},B:!0},s21:{h:"uniform sampler2D u1;uniform vec2 u14;varying vec2 vv0;void main(){float a=u14.x*u14.y;vec2 b=floor(vv0*a)/a,c=fract(vv0*a),d=floor(b*u14.y),f=floor(u14.x*fract(b*u14.y)),g=(f*u14.y+d)/a;gl_FragColor=texture2D(u1,g+c/a);}",i:["u1","u14"],j:B},s22:{h:"uniform sampler2D u15,u16,u17;varying vec2 vv0;void main(){vec4 a=texture2D(u17,vv0);vec2 b=a.rg,c=a.ba;vec4 d=texture2D(u15,b),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u15","u16","u17"],j:{u16:0,u15:1,
u17:2},B:!0},s23:{h:"uniform float u18,u19;uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec2 c=fract(vv0*u18),a=vv0;float b=u18*u19;a=(.5+floor(b*vv0))/b;vec4 d=texture2D(u15,a),f=texture2D(u16,c);gl_FragColor=d*f;}",i:["u16","u15","u18","u19"],j:{u16:0,u15:1}},s24:{h:"uniform float u18,u19;uniform sampler2D u15,u16,u20,u21,u22,u23;varying vec2 vv0;const vec4 e=vec4(1.,1.,1.,1.),g=vec4(1e-3,1e-3,1e-3,1e-3);void main(){vec2 c=fract(vv0*u18),d=vv0;float h=u18*u19;d=(.5+floor(h*vv0))/h;vec4 l=texture2D(u15,d),m=texture2D(u16,c),a=texture2D(u23,d);a=floor(.5+a*255.);vec4 n=texture2D(u20,c),o=texture2D(u21,c),p=texture2D(u22,c),i=step(-g,-a),b=e-i,j=b*step(-e-g,-a);b*=e-j;vec4 k=b*step(-2.*e-g,-a);b*=e-k;vec4 q=b,r=i*m+j*n+k*o+q*p;gl_FragColor=l*r;}",
i:"u15 u16 u18 u19 u23 u20 u21 u22".split(" "),j:{u16:0,u15:1,u23:3,u20:4,u21:5,u22:6},B:!0},s25:{h:"uniform sampler2D u15,u16,u3;uniform float u18,u24,u25,u19;uniform vec2 u26;varying vec2 vv0;const vec2 f=vec2(1.),l=vec2(0.);void main(){vec2 c=floor(u24*vv0),d=u24*vv0-c;float g=u18/u24;vec2 h=floor(d*g),i=d*g-h,j=(c+i)/u24;float m=u24*u19/u18;vec2 b=m*h;b=floor(u26*b+.5*(u19-1.)*(f-u26));vec2 a=(b+i*u25)/u19;a+=.25/u19;vec2 k=step(a,f)*step(l,a);vec4 n=texture2D(u15,j),o=texture2D(u16,a),p=n*o,q=texture2D(u3,j);gl_FragColor=(p*u25*u25+q)*k.x*k.y;}",
i:"u15 u16 u18 u24 u25 u19 u3 u26".split(" "),j:{u16:0,u15:1,u3:2}},s26:{h:"uniform sampler2D u15,u16;varying vec2 vv0;void main(){vec4 a=texture2D(u15,vv0),b=texture2D(u16,vv0);gl_FragColor=a*b;}",i:["u15","u16"],j:{u16:0,u15:1},B:!0},s27:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;void main(){gl_FragColor=texture2D(u3,vv0)+u4*texture2D(u1,vv0);}",i:g,j:K},s28:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 e=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 h=mod(gl_FragCoord.xy,vec2(2.)),d=step(h,vec2(.75));float b=d.x+2.*d.y,c=step(2.5,b),g=(1.-c)*step(1.5,b),i=(1.-c)*(1.-g)*step(.5,b);a=mix(a,a.argb,i*e),a=mix(a,a.barg,g*e),a=mix(a,a.gbar,c*e),gl_FragColor=a;}",
i:g,j:K,B:!0},s29:{h:"uniform sampler2D u1,u3;uniform float u4;varying vec2 vv0;const vec4 h=vec4(1.);void main(){vec4 a=texture2D(u3,vv0)+u4*texture2D(u1,vv0);vec2 b=floor(gl_FragCoord.xy);vec3 d=b.x*vec3(1.)+vec3(0.,1.,2.);float c=mod(b.y,2.);vec4 f=vec4(c,(1.-c)*step(mod(d,vec3(3.)),vec3(.5)));mat4 g=mat4(a.rgba,a.gbar,a.barg,a.argb);gl_FragColor=g*f;}",i:g,j:K,B:!0},s30:{h:"varying vec2 vv0;uniform sampler2D u1;const vec4 f=vec4(1.,1.,1.,1.),g=vec4(.299,.587,.114,0.);void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=dot(a,g)*f;}",
i:D,j:B,precision:"lowp"},s31:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(dot(a,f),dot(b,f),dot(c,f),dot(d,f));}",i:["u1","u27"],j:B,precision:"lowp"},s32:{h:"varying vec2 vv0;uniform sampler2D u1;uniform float u27;const vec3 f=vec3(.299,.587,.114);void main(){vec3 a=texture2D(u1,vv0).rgb,b=texture2D(u1,vv0+vec2(0.,u27)).rgb,c=texture2D(u1,vv0+vec2(u27,u27)).rgb,d=texture2D(u1,vv0+vec2(u27,0.)).rgb;gl_FragColor=vec4(a.r,b.g,c.b,dot(d,f));}",
i:["u1","u27"],j:B,precision:"lowp"},s33:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 f=vec4(1.,1.,1.,1.);void main(){vec4 a=vec4(0.);a-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y))*2.,a-=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y))*2.,a+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec4 b=vec4(0.);b-=texture2D(u1,vec2(vv0.x-u28,vv0.y-u28))*1.,b-=texture2D(u1,vec2(vv0.x,vv0.y-u28))*2.,b-=texture2D(u1,vec2(vv0.x+u28,vv0.y-u28))*1.,b+=texture2D(u1,vec2(vv0.x-u28,vv0.y+u28))*1.,b+=texture2D(u1,vec2(vv0.x,vv0.y+u28))*2.,b+=texture2D(u1,vec2(vv0.x+u28,vv0.y+u28))*1.;vec3 c=sqrt(a.rgb*a.rgb+b.rgb*b.rgb);vec4 e=vec4(c,texture2D(u1,vv0).a),g=texture2D(u2,vv0);gl_FragColor=g.a*e.r*f;}",
i:["u1","u2","u28"],j:J,B:!0},s34:{h:"varying vec2 vv0;uniform sampler2D u1,u2;uniform float u28;const vec4 j=vec4(1.,1.,1.,1.);const vec2 k=vec2(1.,1.);void main(){float h=0.;vec2 l=k*u28,a,b;float c,d,i=0.;for(float e=-4.;e<=4.;e+=1.)for(float f=-4.;f<=4.;f+=1.)a=vec2(e,f),c=length(a)/2.,d=exp(-c*c),b=vv0+l*a,h+=d*texture2D(u1,b).r,i+=d;vec4 m=texture2D(u2,vv0);gl_FragColor=m.a*(texture2D(u1,b).r-h/i)*j;}",i:["u1","u2","u28"],j:J,B:!0},s35:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}const vec2 g=vec2(.5,.5),h=vec2(1.,0.),i=vec2(0.,1.);void main(){vec2 a=vv0-u10*g;vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*h),d=texture2D(u5,a+u10*i),j=texture2D(u5,a+u10),k=e(b,c),l=e(d,j);gl_FragColor=e(k,l);}",
i:["u5","u10"],j:L},s36:{h:"uniform sampler2D u5;uniform vec2 u10;varying vec2 vv0;const vec2 k=vec2(1.,0.),l=vec2(0.,1.),m=vec2(2.,0.),n=vec2(0.,2.);vec4 e(vec4 a,vec4 b){vec4 c=step(a,b);return mix(a,b,c);}vec4 f(vec2 a){vec4 b=texture2D(u5,a),c=texture2D(u5,a+u10*k),d=texture2D(u5,a+u10*l),g=texture2D(u5,a+u10),h=e(b,c),i=e(d,g);return e(h,i);}void main(){vec2 a=vv0+u10*vec2(-.55,-1.05);vec4 b=f(a),c=f(a+u10*m),d=f(a+u10*2.),g=f(a+u10*n),h=e(b,c),i=e(d,g);gl_FragColor=e(h,i);}",i:["u5","u10"],
j:L,B:!0},s37:{h:"uniform sampler2D u1;varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0);gl_FragColor=a*a;}",i:["u1"],j:B,precision:"lowp",B:!0},s38:{h:"uniform sampler2D u1;uniform vec2 u10;varying vec2 vv0;const float e=15444.;void main(){vec4 a=1001./e*texture2D(u1,vv0-3.*u10)+2002./e*texture2D(u1,vv0-2.*u10)+3003./e*texture2D(u1,vv0-u10)+3432./e*texture2D(u1,vv0)+3003./e*texture2D(u1,vv0+u10)+2002./e*texture2D(u1,vv0+2.*u10)+1001./e*texture2D(u1,vv0+3.*u10);gl_FragColor=a;}",i:["u10","u1"],
j:B,precision:"lowp",B:!0},s39:{h:"uniform sampler2D u1,u12,u29;varying vec2 vv0;const vec4 f=vec4(1.,1.,1.,1.);const float g=.1;void main(){vec4 a=texture2D(u12,vv0),b=texture2D(u29,vv0),c=texture2D(u1,vv0),d=max(f*g,b-a*a),h=sqrt(d);gl_FragColor=(c-a)/h;}",i:["u1","u12","u29"],j:{u1:0,u12:1,u29:2},B:!0}},F={s40:{h:"uniform float u18,u30;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-5,1e-5);void main(){vec4 sum=texture2D(u3,vv0);float toSparsity=1.1111;vec2 uvFrom,uvWeight,xyPatch=ZERO2,eps2=EPS2/u18,xyTo=floor(vv0*u18+eps2);float weightSize=toSparsity*u18;vec2 halfFromSparsity=ONE2*(toSparsity-1.)/2.;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.)xyPatch.y=patch_y,uvFrom=(xyTo+HALF2+u30*(xyPatch-halfFromSparsity))/u18,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),uvWeight=(xyTo*toSparsity+xyPatch+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:["u18","u15","u16","u3","u30"],tb:["1.1111","gl_FragColor\\*=2.2222;"]},s41:{h:"uniform float u18,u30,u19;uniform sampler2D u15,u16,u3;varying vec2 vv0;const vec2 ZERO2=vec2(0.,0.),ONE2=vec2(1.,1.),HALF2=vec2(.5,.5),EPS2=vec2(1e-4,1e-4);void main(){vec4 sum=texture2D(u3,vv0);float fromSparsity=1.1111,shrinkFactor=3.3333;vec2 uvFrom,uvWeight,xyFrom,xyPatchTo,xyPatch=ZERO2,xyShrink=ZERO2,eps2=EPS2/u19,xyTo=floor(vv0*u18+eps2);float weightSize=fromSparsity*u19;vec2 halfFromSparsity=ONE2*(fromSparsity-1.)/2.;float toSparsity=weightSize/u18;vec2 xyFrom0=xyTo*shrinkFactor;for(float patch_x=0.;patch_x<1.1111;patch_x+=1.){xyPatch.x=patch_x;for(float patch_y=0.;patch_y<1.1111;patch_y+=1.){xyPatch.y=patch_y;for(float shrink_x=0.;shrink_x<3.3333;shrink_x+=1.){xyShrink.x=shrink_x;for(float shrink_y=0.;shrink_y<3.3333;shrink_y+=1.)xyShrink.y=shrink_y,xyFrom=xyFrom0+xyShrink+shrinkFactor*u30*(xyPatch-halfFromSparsity),uvFrom=(xyFrom+HALF2)/u19,uvFrom+=step(uvFrom,-eps2),uvFrom-=step(ONE2-eps2,uvFrom),xyPatchTo=xyPatch*shrinkFactor+xyShrink,uvWeight=(xyTo*toSparsity+xyPatchTo+HALF2)/weightSize,sum+=texture2D(u15,uvWeight)*texture2D(u16,uvFrom);}}}gl_FragColor=sum,gl_FragColor*=2.2222;}",
i:"u18 u19 u15 u16 u3 u30".split(" "),tb:["1.1111","gl_FragColor\\*=2.2222;","3.3333"]}},E=null,N=null,x={mb:function(){return C},u:function(){if(!C){E=Ea(t,2);N=Ea(F,2);y="highp";H.getShaderPrecisionFormat&&(H.getShaderPrecisionFormat(H.FRAGMENT_SHADER,H.MEDIUM_FLOAT),H.getShaderPrecisionFormat(H.FRAGMENT_SHADER,H.LOW_FLOAT));for(var r in E)h(H,E[r],r);M.set("s0");H.enableVertexAttribArray(0);C=!0}},Ra:function(r){r.forEach(function(m){x.Dc(m)})},Dc:function(r){E[r.id]=r;h(H,r,r.id)},Re:function(r,
m,f){m||(m=r);E[m]=Object.create(N[r]);E[m].Xe=!0;N[r].tb&&N[r].tb.forEach(function(G,O){E[m].h=E[m].h.replace(new RegExp(G,"g"),f[O])});h(H,E[m],m)},set:function(r){var m=E[r];m.B&&(m.B=!1,h(H,m,r));u(m)},Ma:function(r){return k(r,n(),"s42")},oc:function(r){return k(r,{h:"void main(){gl_FragColor=vec4(.5,.5,.5,.5);}",i:[],precision:y},"s43")},ve:function(r){return"undefined"===typeof E[r]?!1:E[r].oa},N:function(){-1!==l&&(l=-1,p.Fa.forEach(function(r){0!==r&&H.disableVertexAttribArray(r)}))},pc:function(){var r=
0;p.Fa.forEach(function(m,f){f=p.Ea[f];H.vertexAttribPointer(m,f,H.FLOAT,!1,p.xc,r);r+=4*f})},te:function(){H.enableVertexAttribArray(0)},Na:function(){x.ub(H)},ub:function(r){r.vertexAttribPointer(p.Fa[0],2,r.FLOAT,!1,8,0)},Sg:function(r,m){H.uniform1i(p.v[r],m)},H:function(r,m){H.uniform1f(p.v[r],m)},P:function(r,m,f){H.uniform2f(p.v[r],m,f)},Hf:function(r,m){H.uniform2fv(p.v[r],m)},If:function(r,m){H.uniform3fv(p.v[r],m)},Tg:function(r,m,f,G){H.uniform3f(p.v[r],m,f,G)},Jf:function(r,m,f,G,O){H.uniform4f(p.v[r],
m,f,G,O)},Jd:function(r,m){H.uniform4fv(p.v[r],m)},Ug:function(r,m){H.uniformMatrix2fv(p.v[r],!1,m)},Vg:function(r,m){H.uniformMatrix3fv(p.v[r],!1,m)},Wg:function(r,m){H.uniformMatrix4fv(p.v[r],!1,m)},J:function(r,m){x.set(r);m.forEach(function(f){switch(f.type){case "4f":H.uniform4fv(p.v[f.name],f.value);break;case "3f":H.uniform3fv(p.v[f.name],f.value);break;case "2f":H.uniform2fv(p.v[f.name],f.value);break;case "1f":H.uniform1f(p.v[f.name],f.value);break;case "1i":H.uniform1i(p.v[f.name],f.value);
break;case "mat2":H.uniformMatrix2fv(p.v[f.name],!1,f.value);break;case "mat3":H.uniformMatrix3fv(p.v[f.name],!1,f.value);break;case "mat4":H.uniformMatrix4fv(p.v[f.name],!1,f.value)}})},tg:function(){return"lowp"},m:function(){x.N();H.disableVertexAttribArray(0);for(var r in E){var m=E[r];m.oa&&(m.oa=!1,H.deleteProgram(m.pa));m.Xe&&delete E[r]}q.forEach(function(f){H.deleteShader(f)});q.splice(0);w=0;C=!1;p=null;l=-1}};return x}(),H=null,Xa=function(){function a(v){console.log("ERROR in ContextFF: ",
v);return!1}function c(){return navigator.userAgent&&-1!==navigator.userAgent.indexOf("forceWebGL1")}function d(v,B,e){v.setAttribute("width",B);v.setAttribute("height",e)}function h(v){function B(){Ta.m();Ua.reset();J.getExtension("WEBGL_lose_context").loseContext()}if(c())return!1;var e=document.createElement("canvas");d(e,5,5);var J=null;try{J=e.getContext("webgl2",v)}catch(K){return!1}if(!J)return!1;u(J);Ua.Jc(J);v=Ua.Hb(J);if(!v.ca&&!v.ea)return B(),!1;v=Ta.Fc(J,v);B();return v?!0:!1}function u(v){v.clearColor(0,
0,0,0);v.disable(v.DEPTH_TEST);v.disable(v.BLEND);v.disable(v.DITHER);v.disable(v.STENCIL_TEST);v.disable(v.CULL_FACE);v.GENERATE_MIPMAP_HINT&&v.FASTEST&&v.hint(v.GENERATE_MIPMAP_HINT,v.FASTEST);v.disable(v.SAMPLE_ALPHA_TO_COVERAGE);v.disable(v.SAMPLE_COVERAGE);v.depthFunc(v.LEQUAL);v.clearDepth(1)}var k=null,n=null,q=null,l=null,p=!0,w=null,C=null,y=[],D={D:function(){return k.width},S:function(){return k.height},eb:function(){return k},kg:function(){return H},ga:function(){return p},flush:function(){H.flush()},
Bg:function(){Wa.V();D.uf()},uf:function(){T.reset();U.reset();M.N();M.te();H.disable(H.DEPTH_TEST);H.disable(H.BLEND);U.Va();M.Na()},Be:function(){w||(w=new Uint8Array(k.width*k.height*4));H.readPixels(0,0,k.width,k.height,H.RGBA,H.UNSIGNED_BYTE,w);return w},ng:function(){return k.toDataURL("image/jpeg")},og:function(){Wa.R();n||(n=document.createElement("canvas"),q=n.getContext("2d"));d(n,k.width,k.height);for(var v=D.Be(),B=q.createImageData(n.width,n.height),e=n.width,J=n.height,K=B.data,g=0;g<
J;++g)for(var L=J-g-1,t=0;t<e;++t){var F=4*(g*e+t),E=4*(L*e+t);K[F]=v[E];K[F+1]=v[E+1];K[F+2]=v[E+2];K[F+3]=v[E+3]}q.putImageData(B,0,0);return n.toDataURL("image/png")},mg:function(v){!n&&v&&(n=document.createElement("canvas"),q=n.getContext("2d"));var B=v?n:document.createElement("canvas");d(B,k.width,k.height);(v?q:B.getContext("2d")).drawImage(k,0,0);return B},u:function(v){v=Object.assign({da:null,cc:null,Wa:null,Hc:null,width:512,height:512,premultipliedAlpha:!1,cd:!0,antialias:!1,debug:!1,
fg:!1},v);v.da?(H=v.da,k=v.da.canvas):v.Hc&&!v.Wa?k=document.getElementById(v.Hc):v.Wa&&(k=v.Wa);k||(k=document.createElement("canvas"));k.width=v.width;k.height=v.height;if(H)p=H instanceof WebGL2RenderingContext;else{p=!0;var B={antialias:v.antialias,alpha:!0,preserveDrawingBuffer:!0,premultipliedAlpha:v.premultipliedAlpha,stencil:!1,depth:v.cd,failIfMajorPerformanceCaveat:!0,powerPreference:"high-performance"};navigator&&navigator.userAgent&&-1!==navigator.userAgent.indexOf("noAntialiasing")&&
(B.antialias=!1);var e=h(B);e||!B.antialias||c()||(B.antialias=!1,e=h(B));e&&(H=k.getContext("webgl2",B));H?p=!0:((H=k.getContext("webgl",B))||(H=k.getContext("experimental-webgl",B)),p=!1)}if(!H)return a("WebGL1 and 2 are not enabled");v.cc&&k.addEventListener&&(l=H.getExtension("WEBGL_lose_context"))&&(C=v.cc,k.addEventListener("webglcontextlost",C,!1));if(!Ua.u())return a("Not enough GL capabilities");u(H);M.u();U.u();Ta.Fc(H,Ua.ze());y.forEach(function(J){J(H)});y.splice(0);return!0},$f:function(){return new Promise(function(v){H?
v(H):y.push(v)})},m:function(){H&&(Ua.m(),M.m(),Ta.m());l&&C&&(k.removeEventListener("webglcontextlost",C,!1),l=C=null);H=w=q=n=k=null;y.splice(0)}};return D}(),Sa=function(){function a(){null===c&&("undefined"!==typeof M?c=M:"undefined"!==typeof JEShaders&&(c=JEShaders))}var c=null;return{reset:function(){c=null},Gf:function(d){c!==d&&(c&&c.N(),c=d)},mb:function(){return c.mb()},Na:function(){return c.Na()},ub:function(d){return c.ub(d)},pc:function(){return c.pc()},N:function(){return c.N()},set:function(d){a();
return c.set(d)},Ma:function(d){a();return c.Ma(d)},oc:function(d){a();return c.oc(d)}}}(),T=function(){function a(f){H.bindTexture(H.TEXTURE_2D,f)}function c(f){N[0]=f;f=x[0];var G=f>>16&32768,O=f>>12&2047,R=f>>23&255;return 103>R?G:142<R?G|31744|((255==R?0:1)&&f&8388607):113>R?(O|=2048,G|(O>>114-R)+(O>>113-R&1)):G=(G|R-112<<10|O>>1)+(O&1)}function d(f){var G=new Uint16Array(f.length);f.forEach(function(O,R){G[R]=c(O)});return G}function h(){if(null!==r.Ob)return r.Ob;var f=k(d([.5,.5,.5,.5]),!0);
return null===f?!0:r.Ob=f}function u(){if(null!==r.Pb)return r.Pb;var f=k(new Uint8Array([127,127,127,127]),!1);return null===f?!0:r.Pb=f}function k(f,G){if(!Sa.mb()||!B)return null;var O=null,R=Math.sqrt(f.length/4);try{var Q=H.getError();if("FUCKING_BIG_ERROR"===Q)return!1;O=m.instance({isFloat:!1,K:G,array:f,width:R});Q=H.getError();if(Q!==H.NO_ERROR)return!1}catch(ja){return!1}Wa.R();H.viewport(0,0,R,R);H.clearColor(0,0,0,0);H.clear(H.COLOR_BUFFER_BIT);Sa.set("s0");O.Ua(0);U.l(!0,!0);f=4*R*R;
G=new Uint8Array(f);H.readPixels(0,0,R,R,H.RGBA,H.UNSIGNED_BYTE,G);R=!0;for(Q=0;Q<f;++Q)R=R&&3>Math.abs(G[Q]-127);O.remove();Wa.V();return R}var n=0,q=null,l=0,p=null,w=null,C=null,y=null,D=null,v=null,B=!1,e=[],J={isFloat:!1,isPot:!0,isLinear:!1,isMipmap:!1,isAnisotropicFiltering:!1,isMirrorX:!1,isMirrorY:!1,isSrgb:!1,isKeepArray:!1,isFlipY:null,width:0,height:0,url:null,array:null,data:null,F:null,Wc:null,We:!1,K:!1,ma:null,qb:4,Xb:0},K=!1,g=null,L=null,t=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],
F=!1,E=!1,N=new Float32Array(1),x=new Int32Array(N.buffer),r={Ob:null,Pb:null},m={u:function(){B||(D=[H.RGBA,null,H.RGBA,H.RGBA],v=[H.RGBA,null,H.RGBA,H.RGBA],q=[H.TEXTURE0,H.TEXTURE1,H.TEXTURE2,H.TEXTURE3,H.TEXTURE4,H.TEXTURE5,H.TEXTURE6,H.TEXTURE7],F="undefined"!==typeof JEContext,E="undefined"!==typeof Ua,F&&JEContext.Kg()&&q.push(H.TEXTURE8,H.TEXTURE9),p=[-1,-1,-1,-1,-1,-1,-1,-1],y=[H.UNSIGNED_BYTE,H.FLOAT,H.FLOAT],B=!0)},Qe:function(){if(!w){for(var f=new Float32Array(16384),G=0;16384>G;++G)f[G]=
2*Math.random()-1;w={random:m.instance({isFloat:!0,isPot:!0,array:f,width:64}),Rd:m.instance({isFloat:!1,isPot:!0,width:1,array:new Uint8Array([0,0,0,0])})}}m.Tf()},zg:function(){return w.Rd},Tf:function(){y[1]=Ua.Mb(H)},Ef:function(){v=D=[H.RGBA,H.RGBA,H.RGBA,H.RGBA]},Bd:function(f){M.set("s1");Wa.R();var G=f.D(),O=f.S();H.viewport(0,0,G,O);f.g(0);U.l(!1,!1)},sf:function(f,G){m.Bd(f);H.readPixels(0,0,f.D(),f.S(),H.RGBA,H.UNSIGNED_BYTE,G)},tf:function(f,G){m.Bd(f);return Ua.mc(0,0,f.D(),f.S(),G)},
Qc:function(f,G,O,R,Q,ja,fa){f.activeTexture(f.TEXTURE0);var ma=f.createTexture();f.bindTexture(f.TEXTURE_2D,ma);Q=Q instanceof Float32Array?Q:new Float32Array(Q);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_S,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_WRAP_T,f.CLAMP_TO_EDGE);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MAG_FILTER,f.NEAREST);f.texParameteri(f.TEXTURE_2D,f.TEXTURE_MIN_FILTER,f.NEAREST);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,ja);f.texImage2D(f.TEXTURE_2D,0,f.RGBA,O,R,0,f.RGBA,f.FLOAT,
Q);f.bindTexture(f.TEXTURE_2D,null);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,!1);fa&&(Wa.V(),M.Ma(f));f.viewport(0,0,O,R);f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,G,0);f.bindTexture(f.TEXTURE_2D,ma);fa?U.l(!0,!0):U.ab(f);f.deleteTexture(ma);B&&(p[0]=-1,C=null,n=0)},Eb:function(f){f!==n&&(H.activeTexture(q[f]),n=f)},instance:function(f){var G;function O(){W=void 0!==z.F.videoWidth?z.F.videoWidth:z.F.width;X=void 0!==z.F.videoHeight?z.F.videoHeight:z.F.height}function R(I){var V=
H.getError();if("FUCKING_BIG_ERROR"===V)return!1;H.texImage2D(H.TEXTURE_2D,0,ka,ha,ia,I);V=H.getError();V!==H.NO_ERROR&&ha!==H.RGBA&&(ha=H.RGBA,H.texImage2D(H.TEXTURE_2D,0,ka,ha,ia,I));return!0}function Q(){if(!cb){a(S);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,ua);z.isPot?(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,z.isMirrorX?H.MIRRORED_REPEAT:H.REPEAT),H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,z.isMirrorY?H.MIRRORED_REPEAT:H.REPEAT)):(H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_S,H.CLAMP_TO_EDGE),
H.texParameteri(H.TEXTURE_2D,H.TEXTURE_WRAP_T,H.CLAMP_TO_EDGE));z.isAnisotropicFiltering&&"undefined"!==typeof JESETTINGS&&H.texParameterf(H.TEXTURE_2D,JEContext.qg().TEXTURE_MAX_ANISOTROPY_EXT,JESETTINGS.Wf);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,z.isLinear?H.LINEAR:H.NEAREST);z.isLinear?H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,z.isMipmap&&!ya?H.NEAREST_MIPMAP_LINEAR:H.LINEAR):H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,z.isMipmap&&!ya?H.NEAREST_MIPMAP_NEAREST:H.NEAREST);
ha=D[z.qb-1];ka=v[z.qb-1];ia=y[za];if(Ua.ga()){var I=Ua.Ce();ha===H.RGBA&&ia===H.FLOAT?z.isMipmap||z.isLinear?ka=Ta.Ee(H):Ua.Gc()?I&&(ka=I):ka=H.RGBA16F||H.RGBA:ha===H.RGB&&ia===H.FLOAT&&I&&(ka=I,ha=H.RGBA)}if(z.K&&!z.isFloat||z.isFloat&&z.isMipmap&&Ta.$e())ka=Ua.De(),ia=Ua.Mb(H);z.Xb&&(La=z.Xb);z.isSrgb&&4===z.qb&&(ha=JEContext.xg());if(z.F)R(z.F);else if(z.url)R(na);else if(qa){I=qa;try{"FUCKING_BIG_ERROR"!==H.getError()&&(H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,I),H.getError()!==H.NO_ERROR&&
(H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,null),H.getError()!==H.NO_ERROR&&H.texImage2D(H.TEXTURE_2D,0,H.RGBA,W,X,0,H.RGBA,H.UNSIGNED_BYTE,null)))}catch(Pb){H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,null)}z.isKeepArray||(qa=null)}else I=H.getError(),"FUCKING_BIG_ERROR"!==I&&(H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,null),I=H.getError(),I!==H.NO_ERROR&&(ha=H.RGBA,z.K&&ia!==H.FLOAT&&(ia=H.FLOAT,H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,null))));if(z.isMipmap)if(!ya&&da)da.Kb(),Ma=!0;else if(ya){I=
Math.log2(Math.min(W,X));Ca=Array(1+I);Ca[0]=S;for(var V=1;V<=I;++V){var la=Math.pow(2,V),Z=W/la;la=X/la;var Aa=H.createTexture();a(Aa);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MIN_FILTER,H.NEAREST);H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAG_FILTER,H.NEAREST);H.texImage2D(H.TEXTURE_2D,0,ka,Z,la,0,ha,ia,null);a(null);Ca[V]=Aa}Ma=!0}a(null);p[n]=-1;ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1);Fa=!0;z.ma&&da&&(z.ma(da),z.ma=null)}}function ja(){for(var I=W*X,V=2*I,la=3*I,Z=0;Z<I;++Z)sa[0][Z]=Ga[Z],sa[1][Z]=
Ga[Z+I],sa[2][Z]=Ga[Z+V],sa[3][Z]=Ga[Z+la]}function fa(){var I=W*X*4;wa=[new Uint8Array(I),new Uint8Array(I),new Uint8Array(I),new Uint8Array(I)];sa=[new Float32Array(wa[0].buffer),new Float32Array(wa[1].buffer),new Float32Array(wa[2].buffer),new Float32Array(wa[3].buffer)];Na=new Uint8Array(4*I);Ga=new Float32Array(Na.buffer);Ha=!0}function ma(){G=new Uint8Array(W*X*4);db=new Float32Array(G.buffer);Va=!0}var z=Object.assign({},J,f),ba=l++;null===z.isFlipY&&(z.isFlipY=z.url?!0:!1);z.data&&(z.array=
"string"===typeof z.data?Ra(z.data):z.isFloat?new Float32Array(z.data):new Uint8Array(z.data),z.isFlipY=!1);var za=0,xa=z.F?!0:!1,A=null,P=null,aa=!1;z.K=z.K||z.isFloat;z.K&&(za=1);!z.We&&z.isFloat&&E&&!Ua.Gc()&&(z.isFloat=!1);z.isFloat&&(za=2);z.isAnisotropicFiltering&&F&&!JEContext.Eg()&&(z.isAnisotropicFiltering=!1);var S=z.Wc||H.createTexture(),na=null,qa=!1,W=0,X=0,Fa=!1,cb=!1,Ha=!1,sa=null,wa=null,Na=null,Ga=null,ka=null,ha=null,ia=null,ua=z.isFlipY,wb=(f=z.K&&z.isMipmap)&&Ta.de(),ya=f&&!wb?
!0:!1,Ca=null,La=-1,eb=-1,Ma=!1;var Va=!1;var db=G=null;z.width&&(W=z.width,X=z.height?z.height:W);var da={get:function(){return S},D:function(){return W},S:function(){return X},Ag:function(){return z.url},Fg:function(){return z.isFloat},Hg:function(){return z.K},Ig:function(){return z.isLinear},Kb:function(){H.generateMipmap(H.TEXTURE_2D)},be:function(I,V){ya?(I||(I=da.Uc()),m.Eb(V),a(Ca[I]),p[V]=-1):da.g(V)},Uc:function(){-1===La&&(La=Math.log(W)/Math.log(2));return La},ye:function(I){I||(I=da.Uc());
if(ya){M.set("s12");m.Eb(0);for(var V=W,la=X,Z=1;Z<=I;++Z)V/=2,la/=2,M.P("u10",.25/V,.25/la),H.viewport(0,0,V,la),a(Ca[Z-1]),H.framebufferTexture2D(Wa.gb(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,Ca[Z],0),U.l(!1,1===Z);p[0]=-1}else I!==eb&&(eb=I,H.TEXTURE_MAX_LEVEL&&H.texParameteri(H.TEXTURE_2D,H.TEXTURE_MAX_LEVEL,I)),da.Kb()},Rg:function(I){(xa=!(Array.isArray(I)||I.constructor===Float32Array||I.constructor===Uint8Array))?(qa=null,z.F=I,O()):qa=I},g:function(I){if(!Fa)return!1;m.Eb(I);if(p[I]===ba)return!1;
a(S);p[I]=ba;return!0},Ua:function(I){H.activeTexture(q[I]);n=I;a(S);p[I]=ba},s:function(){C=da;H.framebufferTexture2D(Wa.gb(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,S,0)},M:function(){C=da;H.viewport(0,0,W,X);H.framebufferTexture2D(Wa.gb(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,S,0)},vc:m.vc,Bf:function(I,V){W=I;X=V},resize:function(I,V){da.Bf(I,V);Q()},clone:function(I){I=m.instance({width:W,height:X,K:z.K,isFloat:z.isFloat,isLinear:z.isLinear,isMirrorY:z.isMirrorY,isFlipY:I?!ua:ua,isPot:z.isPot});Sa.set("s0");
Wa.V();I.s();H.viewport(0,0,W,X);da.g(0);U.l(!0,!0);return I},Kf:function(){H.viewport(0,0,W,X)},remove:function(){H.deleteTexture(S);cb=!0;e.splice(e.indexOf(da),1);da=null},refresh:function(){da.Ua(0);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);xa?H.texImage2D(H.TEXTURE_2D,0,ka,ha,ia,z.F):H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,qa);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},lc:function(){Ha||fa();H.readPixels(0,0,W,4*X,H.RGBA,H.UNSIGNED_BYTE,Na);ja();return sa},mf:function(){Ha||fa();return Ua.mc(0,
0,W,4*X,Na).then(function(){ja();return sa})},qf:function(){Va||ma();H.readPixels(0,0,W,X,H.RGBA,H.UNSIGNED_BYTE,G);return db},pf:function(){Va||ma();return Ua.mc(0,0,W,X,G)},Ib:function(I){Wa.R();M.set("s13");da.g(0);if(I)H.viewport(0,0,W,X),M.Jf("u11",.25,.25,.25,.25),U.l(!1,!0);else for(I=0;4>I;++I)H.viewport(0,X*I,W,X),M.Jd("u11",t[I]),U.l(!1,0===I)},wc:function(I){var V=ia===y[0]&&!u();a(S);ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);V?(aa||(A=document.createElement("canvas"),A.width=W,A.height=
X,P=A.getContext("2d"),P.createImageData(W,X),aa=!0),null.data.set(I),P.putImageData(null,0,0),H.texImage2D(H.TEXTURE_2D,0,ka,ha,ia,A)):H.texImage2D(H.TEXTURE_2D,0,ka,W,X,0,ha,ia,I);p[n]=ba;ua&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},$g:function(I,V){a(S);V&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!0);H.texImage2D(H.TEXTURE_2D,0,ka,ha,ia,I);p[n]=ba;V&&H.pixelStorei(H.UNPACK_FLIP_Y_WEBGL,!1)},Pg:function(I,V){var la=W*X,Z=4*la;I=z.K?I?"RGBE":"JSON":"RGBA";V&&(I=V);V=Ua.ga()&&!1;var Aa=null;switch(I){case "RGBE":Aa=
"s44";break;case "JSON":Aa=V?"s0":"s13";break;case "RGBA":case "RGBAARRAY":Aa="s7"}Ha||("RGBA"===I||"RGBE"===I||"RGBAARRAY"===I?(wa=new Uint8Array(Z),Ha=!0):"JSON"!==I||V||fa());Wa.R();M.set(Aa);da.g(0);Z=null;if("RGBA"===I||"RGBE"===I||"RGBAARRAY"===I){H.viewport(0,0,W,X);U.l(!0,!0);H.readPixels(0,0,W,X,H.RGBA,H.UNSIGNED_BYTE,wa);if("RGBAARRAY"===I)return{data:wa};K||(g=document.createElement("canvas"),L=g.getContext("2d"),K=!0);g.width=W;g.height=X;la=L.createImageData(W,X);la.data.set(wa);L.putImageData(la,
0,0);Z=g.toDataURL("image/png")}else if("JSON"===I)if(V)Z=new Float32Array(la),H.viewport(0,0,W,X),U.l(!0,!0),H.readPixels(0,0,W,X,H.RGBA,H.FLOAT,Z);else{for(Z=0;4>Z;++Z)H.viewport(0,X*Z,W,X),M.Jd("u11",t[Z]),U.l(!Z,!Z);da.lc();Z=Array(la);for(V=0;V<la;++V)Z[4*V]=sa[0][V],Z[4*V+1]=sa[1][V],Z[4*V+2]=sa[2][V],Z[4*V+3]=sa[3][V]}return{format:I,data:Z,width:W,height:X,isMirrorY:z.isMirrorY,isFlipY:"RGBA"===I?z.isFlipY:!z.isFlipY}}};z.isMipmap&&!ya&&Fa&&!Ma&&(da.Kb(),Ma=!0);if(z.url)a(S),H.texImage2D(H.TEXTURE_2D,
0,H.RGBA,1,1,0,H.RGBA,H.UNSIGNED_BYTE,null),na=new Image,na.eg="Anonymous",na.crossOrigin="Anonymous",na.src=z.url,na.onload=function(){W=na.width;X=na.height;Q()};else if(z.F){var fb=function(){O();W?Q():setTimeout(fb,1)};fb()}else z.array?(z.K&&!z.isFloat?z.array instanceof Uint16Array?(qa=z.array,Q()):h()?(qa=d(z.array),Q()):(Q(),m.Qc(H,S,da.D(),da.S(),z.array,ua,!0)):(qa=z.isFloat?z.array instanceof Float32Array?z.array:new Float32Array(z.array):z.array instanceof Uint8Array?z.array:new Uint8Array(z.array),
Q()),z.isKeepArray||(qa&&qa!==z.array&&(qa=null),delete z.array)):z.Wc?Fa=!0:Q();da.wg=da.D;z.ma&&Fa&&(z.ma(da),z.ma=null);e.push(da);return da},R:function(f){f!==n&&(H.activeTexture(q[f]),n=f);p[f]=-1;a(null)},Zf:function(f){w.random.g(f)},vc:function(){C=null;H.framebufferTexture2D(Wa.gb(),H.COLOR_ATTACHMENT0,H.TEXTURE_2D,null,0)},reset:function(){0!==n&&H.activeTexture(q[0]);for(var f=0;f<q.length;++f)p[f]=-1;n=-1},Og:function(){n=-1},Pf:function(){for(var f=0;f<q.length;++f)m.R(f)},Sc:function(){w&&
(w.random.remove(),w.Rd.remove())},Zg:function(f,G){if("RGBA"===f.format||"RGBE"===f.format){var O=new Image;O.src=f.data;O.onload=function(){m.instance({isMirrorY:f.isMirrorY,isFlipY:f.isFlipY,isFloat:!1,F:O,ma:function(R){if("RGBA"===f.format)G(R);else{var Q=f.width,ja=f.height,fa=m.instance({isMirrorY:f.isMirrorY,isFloat:!0,width:Q,height:ja,isFlipY:f.isFlipY});Wa.V();H.viewport(0,0,Q,ja);M.set("s45");fa.s();R.g(0);U.l(!0,!0);m.R(0);G(fa);Ua.flush();setTimeout(R.remove,50)}}})}}else"JSON"===f.format?
G(m.instance({isFloat:!0,isFlipY:f.isFlipY,width:f.width,height:f.height,array:new Float32Array(f.data)})):G(!1)},ie:d,m:function(){C&&(Wa.V(),m.vc(),Wa.R());m.Pf();e.slice(0).forEach(function(f){f.remove()});e.splice(0);B=!1;l=0;"undefined"!==typeof Ta&&Ta.m();w=null}};return m}(),Ya={instance:function(a){var c=[T.instance(a),T.instance(a)],d=[c[1],c[0]],h=d,u={Id:function(k){h[1].s();h[0].g(k);u.Md()},Af:function(k){h[1].M();h[0].g(k);u.Md()},Md:function(){h=h===c?d:c},refresh:function(){h[0].refresh();
h[1].refresh()},g:function(k){h[0].g(k)},Ua:function(k){h[0].Ua(k)},Yf:function(k){h[1].g(k)},Je:function(){return h[0]},ug:function(){return h[1]},wc:function(k){h[0].wc(k);h[1].wc(k)},remove:function(){h[0].remove();h[1].remove();h=null},sync:function(){u.Af(0);M.set("s0");U.l(!1,!1)}};return u}},U=function(){function a(l){var p={$:null,indices:null};p.$=l.createBuffer();l.bindBuffer(l.ARRAY_BUFFER,p.$);l.bufferData(l.ARRAY_BUFFER,new Float32Array([-1,-1,3,-1,-1,3]),l.STATIC_DRAW);p.indices=l.createBuffer();
l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,p.indices);l.bufferData(l.ELEMENT_ARRAY_BUFFER,new Uint16Array([0,1,2]),l.STATIC_DRAW);return p}var c=null,d=0,h=!1,u=[],k=-2,n=-2,q={reset:function(){n=k=-2},u:function(){h||(c=a(H),q.Va(),h=!0)},instance:function(l){var p=d++,w=l.indices?l.indices.length:0,C="undefined"===typeof l.mode?H.STATIC_DRAW:l.mode,y=H.createBuffer();H.bindBuffer(H.ARRAY_BUFFER,y);H.bufferData(H.ARRAY_BUFFER,l.$ instanceof Float32Array?l.$:new Float32Array(l.$),C);k=p;var D=null,v=null,
B=null;if(l.indices){D=H.createBuffer();H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,D);var e=null;65536>l.indices.length?(e=Uint16Array,v=H.UNSIGNED_SHORT,B=2):(e=Uint32Array,v=H.UNSIGNED_INT,B=4);e=l.indices instanceof e?l.indices:new e(l.indices);H.bufferData(H.ELEMENT_ARRAY_BUFFER,e,C);n=p}var J={ce:function(K){k!==p&&(H.bindBuffer(H.ARRAY_BUFFER,y),k=p);K&&Sa.pc()},$d:function(){n!==p&&(H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,D),n=p)},bind:function(K){J.ce(K);J.$d()},gg:function(){H.drawElements(H.TRIANGLES,
w,v,0)},hg:function(K,g){H.drawElements(H.TRIANGLES,K,v,g*B)},remove:function(){H.deleteBuffer(y);l.indices&&H.deleteBuffer(D);J=null}};u.push(J);return J},Va:function(){-1!==k&&(H.bindBuffer(H.ARRAY_BUFFER,c.$),k=-1);-1!==n&&(H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,c.indices),n=-1)},l:function(l,p){l&&U.Va();p&&Sa.Na();H.drawElements(H.TRIANGLES,3,H.UNSIGNED_SHORT,0)},ab:function(l){l=l||H;var p=a(l);l.bindBuffer(l.ARRAY_BUFFER,p.$);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,p.indices);Sa.ub(l);l.clear(l.COLOR_BUFFER_BIT);
l.drawElements(l.TRIANGLES,3,l.UNSIGNED_SHORT,0);l.flush();l.bindBuffer(l.ARRAY_BUFFER,null);l.bindBuffer(l.ELEMENT_ARRAY_BUFFER,null);l.deleteBuffer(p.$);l.deleteBuffer(p.indices);q.reset();h&&(q.Va(),Sa.Na())},Sc:function(){var l=H,p=c;l.deleteBuffer(p.$);l.deleteBuffer(p.indices)},m:function(){q.Sc();u.forEach(function(l){l.remove()});H.bindBuffer(H.ARRAY_BUFFER,null);H.bindBuffer(H.ELEMENT_ARRAY_BUFFER,null);q.reset();h=!1;u.splice(0);d=0}};return q}(),Wa=function(){var a=null,c=null,d=null,h=
!1,u=[],k={G:-2,Pc:1},n={mb:function(){return h},u:function(){if(!h){a=H.createFramebuffer();var q=Ua.ga();c=q&&H.DRAW_FRAMEBUFFER?H.DRAW_FRAMEBUFFER:H.FRAMEBUFFER;d=q&&H.READ_FRAMEBUFFER?H.READ_FRAMEBUFFER:H.FRAMEBUFFER;h=!0}},rg:function(){return c},Fe:function(){return d},gb:function(){return H.FRAMEBUFFER},vg:function(){return k},jg:function(){return a},instance:function(q){void 0===q.bd&&(q.bd=!1);var l=q.za?q.za:null,p=q.width,w=void 0!==q.height?q.height:q.width,C=a,y=null,D=!1,v=!1,B=0;l&&
(p=p?p:l.D(),w=w?w:l.S());var e={Hd:function(){D||(C=H.createFramebuffer(),D=!0,B=k.Pc++)},Ud:function(){e.Hd();e.s();y=H.createRenderbuffer();H.bindRenderbuffer(H.RENDERBUFFER,y);H.renderbufferStorage(H.RENDERBUFFER,H.DEPTH_COMPONENT16,p,w);H.framebufferRenderbuffer(c,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,y);H.clearDepth(1)},bind:function(J,K){B!==k.G&&(H.bindFramebuffer(c,C),k.G=B);l&&l.s();K&&H.viewport(0,0,p,w);J&&H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT)},Xf:function(){B!==k.G&&(H.bindFramebuffer(c,
C),k.G=B)},clear:function(){H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT)},cg:function(){H.clear(H.COLOR_BUFFER_BIT)},dg:function(){H.clear(H.DEPTH_BUFFER_BIT)},Kf:function(){H.viewport(0,0,p,w)},s:function(){B!==k.G&&(H.bindFramebuffer(c,C),k.G=B)},rtt:function(J){l=J;k.G!==B&&(H.bindFramebuffer(H.FRAMEBUFFER,C),k.G=B);J.s()},R:function(){H.bindFramebuffer(c,null);k.G=-1},resize:function(J,K){p=J;w=K;y&&(H.bindRenderbuffer(H.RENDERBUFFER,y),H.renderbufferStorage(H.RENDERBUFFER,H.DEPTH_COMPONENT16,
p,w))},remove:function(){C===a||v||(H.bindFramebuffer(c,C),H.framebufferTexture2D(c,H.COLOR_ATTACHMENT0,H.TEXTURE_2D,null,0),y&&H.framebufferRenderbuffer(c,H.DEPTH_ATTACHMENT,H.RENDERBUFFER,null),H.bindFramebuffer(c,null),H.deleteFramebuffer(C),y&&H.deleteRenderbuffer(y));v=!0}};q.bd&&e.Ud();u.push(e);return e},R:function(){H.bindFramebuffer(c,null);k.G=-1},Qf:function(){H.bindFramebuffer(c,null);H.clear(H.COLOR_BUFFER_BIT|H.DEPTH_BUFFER_BIT);Ua.Kd();k.G=-1},reset:function(){k.G=-2},V:function(){0!==
k.G&&(H.bindFramebuffer(c,a),k.G=0)},clear:function(){Ua.Kd();H.clear(H.COLOR_BUFFER_BIT)},m:function(){n.R();u.forEach(function(q){q.remove()});null!==a&&(H.deleteFramebuffer(a),a=null);n.reset();h=!1;u.splice(0);k.Pc=1}};return n}(),Ua=function(){function a(){q="undefined"===typeof Xa?JEContext:Xa;l=!0}function c(g,L){for(var t=0;t<g.length;++t){var F=L.getExtension(g[t]);if(F)return F}return null}function d(){null!==e.xb&&(clearTimeout(e.xb),e.xb=null);e.ta=!1}function h(g){if(0===e.na.length){e.T=
H.PIXEL_PACK_BUFFER;e.na.splice(0);e.hb.splice(0);for(var L=0;L<e.Ga;++L)e.na.push(H.createBuffer()),e.hb.push(-1);e.ba=0;e.bc=0}H.bindBuffer(e.T,e.na[e.ba]);g.byteLength!==e.hb[e.ba]&&(H.bufferData(e.T,g.byteLength,H.STREAM_READ),e.hb[e.ba]=g.byteLength);e.Cg=!0}function u(){H.bindBuffer(e.T,null)}function k(){e.sa.forEach(function(g){H.deleteSync(g)});e.sa.splice(0)}function n(){e.ba=(e.ba+1)%e.Ga;++e.bc}var q=null,l=!1,p={dd:!1,rc:null,sc:null,gd:!1,Ze:!1,tc:null,hd:!1,uc:null,ed:!1,Fb:null,Te:!1,
Gb:null,Ue:!1},w=null,C={ca:!0,ea:!0,Jb:!0,Ad:!1},y=null,D=!0,v=null,B=null,e={je:1,Ga:-1,ba:0,bc:0,ta:!1,na:[],sa:[],hb:[],T:null,xb:null},J="undefined"===typeof window?{}:window,K={u:function(){if(l)return!0;K.reset();l||a();var g=H;if(!w.dd){w.rc=K.Mc(g);J.GL_EXT_FLOAT=w.rc;w.gd=w.rc?!0:!1;if(w.gd||K.ga())w.sc=K.Nc(g),w.Ze=w.sc?!0:!1,J.GL_EXT_FLOATLINEAR=w.sc;w.dd=!0}if(!w.ed){w.tc=K.Za(g);w.tc&&(w.hd=!0,J.GL_EXT_HALFFLOAT=w.tc);if(w.hd||K.ga())w.uc=K.Oc(g),J.GL_EXT_HALFFLOATLINEAR=w.uc;w.Dg=w.uc?
!0:!1;w.ed=!0}w.Fb=K.Kc(g);w.Te=w.Fb?!0:!1;J.GL_EXT_COLORBUFFERFLOAT=w.Fb;w.Gb=K.Lc(g);w.Ue=w.Gb?!0:!1;J.GL_EXT_COLORBUFFERHALFFLOAT=w.Gb;Wa.u();T.u();if(!K.me())return!1;U.u();T.Qe();return!0},reset:function(){w=Object.assign({},p);y=Object.assign({},C)},D:function(){l||a();return q.D()},S:function(){l||a();return q.S()},ga:function(){l||a();return q.ga()},Jc:function(g){K.Kc(g);K.Lc(g);K.Mc(g);K.Nc(g);K.Za(g);K.Oc(g)},Kc:c.bind(null,["EXT_color_buffer_float","WEBGL_color_buffer_float","OES_color_buffer_float"]),
Lc:c.bind(null,["EXT_color_buffer_half_float","WEBGL_color_buffer_half_float","OES_color_buffer_half_float"]),Mc:c.bind(null,["OES_texture_float","MOZ_OES_texture_float","WEBKIT_OES_texture_float"]),Nc:c.bind(null,["OES_texture_float_linear","MOZ_OES_texture_float_linear","WEBKIT_OES_texture_float_linear"]),Za:c.bind(null,["OES_texture_half_float","MOZ_OES_texture_half_float","WEBKIT_OES_texture_half_float"]),Oc:c.bind(null,["OES_texture_half_float_linear","MOZ_OES_texture_half_float_linear","WEBKIT_OES_texture_half_float_linear"]),
Mb:function(g){var L=K.Za(g);return L&&L.HALF_FLOAT_OES?L.HALF_FLOAT_OES:g.HALF_FLOAT||g.FLOAT},Ce:function(){return B||H.RGBA32F||H.RGBA},De:function(){return v||H.RGBA16F||H.RGBA},ze:function(){return y},Gc:function(){return y.ca},bg:function(){return y.ea},ag:function(){return y.Jb},ee:function(){return y.Ad&&D},Qd:function(g){D=g;!g&&e.ta&&(k(),H.bindBuffer(e.T,null),e.ta=!1)},Jg:function(){return e.ta},wb:function(g,L,t){function F(){g.bindTexture(g.TEXTURE_2D,null);g.bindFramebuffer(E,null);
g.deleteTexture(r);g.deleteFramebuffer(x)}var E=g.FRAMEBUFFER,N=g.NEAREST,x=g.createFramebuffer();g.bindFramebuffer(E,x);var r=g.createTexture();g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,r);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,!1);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,N);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,N);g.texImage2D(g.TEXTURE_2D,
0,L,3,3,0,g.RGBA,t,null);g.framebufferTexture2D(g.FRAMEBUFFER,g.COLOR_ATTACHMENT0,g.TEXTURE_2D,r,0);if(g.checkFramebufferStatus(g.READ_FRAMEBUFFER||g.FRAMEBUFFER)!==g.FRAMEBUFFER_COMPLETE)return F(),!1;Sa.oc(g);g.clearColor(0,0,0,0);g.viewport(0,0,3,3);g.disable(g.DEPTH_TEST);g.clear(g.COLOR_BUFFER_BIT);U.ab(g);g.bindFramebuffer(E,null);Sa.Ma(g);g.activeTexture(g.TEXTURE0);g.bindTexture(g.TEXTURE_2D,r);U.ab(g);L=new Uint8Array(36);g.readPixels(0,0,3,3,g.RGBA,g.UNSIGNED_BYTE,L);F();for(t=0;36>t;++t)if(3!==
t%4&&3<Math.abs(L[t]-127))return!1;return!0},Hb:function(g){var L={ca:!1,ea:!1};g.disable(g.BLEND);g.clearColor(0,0,0,0);g.clear(g.COLOR_BUFFER_BIT);g.RGBA32F&&K.wb(g,g.RGBA32F,g.FLOAT)&&(L.ca=!0,B=g.RGBA32F);!L.ca&&K.wb(g,g.RGBA,g.FLOAT)&&(L.ca=!0,B=g.RGBA);var t=K.Mb(g);v=null;g.RGBA16F&&K.wb(g,g.RGBA16F,t)&&(L.ea=!0,v=g.RGBA16F);!L.ea&&K.wb(g,g.RGBA,t)&&(L.ea=!0,v=g.RGBA);return L},oe:function(){var g=Wa.instance({width:2});g.Hd();var L=T.instance({width:2,isFloat:!0,qb:3});g.s();L.s();K.flush();
H.checkFramebufferStatus(Wa.Fe())!==H.FRAMEBUFFER_COMPLETE?(T.Ef(),y.Jb=!1):y.Jb=!0;g.remove();L.remove()},pe:function(){var g=!1;K.ga()&&(g="PIXEL_PACK_BUFFER STREAM_READ SYNC_GPU_COMMANDS_COMPLETE WAIT_FAILED fenceSync deleteSync createBuffer".split(" ").every(function(L){return"undefined"!==typeof H[L]}));y.Ad=g},me:function(){var g=K.Hb(H);Object.assign(y,g);if(!y.ca&&!y.ea)return!1;K.oe();K.pe();return!0},rf:function(g,L,t,F,E){H.readPixels(g,L,t,F,H.RGBA,H.UNSIGNED_BYTE,E);return Promise.resolve(E,
!1)},mc:function(g,L,t,F,E,N,x){if(!K.ee())return K.rf(g,L,t,F,E);e.Ga=x||e.je;h(E);H.readPixels(g,L,t,F,H.RGBA,H.UNSIGNED_BYTE,0);e.sa[e.ba]=H.fenceSync(H.SYNC_GPU_COMMANDS_COMPLETE,0);K.flush();var r=!1;return new Promise(function(m,f){function G(){if(!e.ta)return d(),u(),n(),f(),!1;var O=(e.ba+1)%e.Ga;switch(H.clientWaitSync(e.sa[O],0,0)){case H.TIMEOUT_EXPIRED:case H.WAIT_FAILED:break;default:return d(),H.deleteSync(e.sa[O]),e.sa[O]=null,H.bindBuffer(e.T,e.na[O]),H.getBufferSubData(e.T,0,E),u(),
n(),m(E,r),!0}e.xb=setTimeout(G,0);return!1}d();e.bc+1<e.Ga?(u(),n(),m(E,!1)):(e.ta=!0,G()||!N||r||(r=!0,N()))})},Kd:function(){H.viewport(0,0,K.D(),K.S())},flush:function(){H.flush()},m:function(){d();k();T.m();Wa.m();U.m();e.na.forEach(function(g){H.deleteBuffer(g)});e.na.splice(0);Sa.reset();l=!1}};return K}(),Ta=function(){function a(t,F,E,N){e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,N?e.NEAREST_MIPMAP_NEAREST:e.LINEAR);var x=null;if(null!==E)try{x=e.getError();if("FUCKING_BIG_ERROR"===
x)return!1;e.texImage2D(e.TEXTURE_2D,0,t,4,4,0,e.RGBA,F,E);x=e.getError();if(x!==e.NO_ERROR)return!1}catch(r){return!1}N&&e.generateMipmap(e.TEXTURE_2D);e.clear(e.COLOR_BUFFER_BIT);U.ab(e);x=e.getError();if("FUCKING_BIG_ERROR"===x)return!1;e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,w);x=e.getError();x===e.INVALID_OPERATION&&"undefined"!==typeof e.PIXEL_PACK_BUFFER&&(e.bindBuffer(e.PIXEL_PACK_BUFFER,null),e.readPixels(0,0,2,2,e.RGBA,e.UNSIGNED_BYTE,w),x=e.getError());if(x!==e.NO_ERROR)return!1;E=
!0;for(N=0;16>N;++N)E=E&&4>Math.abs(w[N]-127);E&&(l.td=F,l.ad=t);return E}function c(t,F){return J.ca&&a(t,e.FLOAT,new Float32Array(C),F)?(q=n.Cc,!0):!1}function d(t,F,E){if(!J.ea)return!1;var N=T.ie(C),x=Ua.Za(e);if(x&&x.HALF_FLOAT_OES&&a(t,x.HALF_FLOAT_OES,N,F)||e.HALF_FLOAT&&a(t,e.HALF_FLOAT,N,F))return q=n.Ca,!0;N=new Float32Array(C);if(a(t,e.FLOAT,N,F))return q=n.Ca,!0;e.bindTexture(e.TEXTURE_2D,E);e.texImage2D(e.TEXTURE_2D,0,e.RGBA,2,2,0,e.RGBA,e.UNSIGNED_BYTE,null);e.bindFramebuffer(l.Xa,L);
T.Qc(e,E,2,2,N,!1,!1);e.bindFramebuffer(l.Xa,null);e.bindTexture(e.TEXTURE_2D,E);return a(t,null,null,F)?(q=n.Ca,!0):!1}function h(t,F,E){p=!0;if(d(t,!0,E)||c(F,!0))return!0;p=!1;return d(t,!1,E)||c(F,!1)?!0:!1}function u(t){if(q===n.N){e=t||H;q=n.RGBA8;p=!0;Ua.Jc(e);J||(J=Ua.Hb(e));Wa.reset();L=e.createFramebuffer();l.Xa=e.DRAW_FRAMEBUFFER||e.FRAMEBUFFER;e.bindFramebuffer(l.Xa,null);e.clearColor(0,0,0,0);e.viewport(0,0,2,2);M.N();K=M.Ma(e);t=e.createTexture();e.activeTexture(e.TEXTURE0);e.bindTexture(e.TEXTURE_2D,
t);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT);e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST);g=t;var F=t=e.RGBA,E=e.RGBA16F,N=e.RGBA32F;N&&(t=N);E&&(F=E);if((E||N)&&h(F,t,g))return k(),!0;t=F=e.RGBA;if(h(F,t,g))return k(),!0;q=n.RGBA8;k();return!1}}function k(){e.deleteProgram(K.pa);e.deleteTexture(g);g=K=null}for(var n={N:-1,Cc:3,Ca:2,RGBA8:0},q=n.N,l={td:null,ad:null,Xa:null},p=!0,w=new Uint8Array(16),C=Array(64),
y=0;4>y;++y)for(var D=0;4>D;++D){var v=0===(D+y)%2?1:0,B=4*y+D;C[4*B]=v;C[4*B+1]=v;C[4*B+2]=v;C[4*B+3]=v}var e=null,J=null,K=null,g=null,L=null;return{de:function(t){u(t);return p},Fc:function(t,F){q===n.N&&(typeof("undefined"!==F)&&(J=F),u(t));return q!==n.RGBA8},Gg:function(t){u(t);return q===n.Cc},$e:function(t){u(t);return q===n.Ca},sg:function(t){u(t);return l.td},Ee:function(t){u(t);return l.ad},m:function(){e=null;p=!0;q=n.N;J=null}}}(),gb={instance:function(a){var c=null,d=!1,h=!1,u=null,
k=!1,n=!1,q=null,l="undefined"===typeof a.preprocessing?!1:a.preprocessing,p="undefined"===typeof a.preprocessingSize?a.size:a.preprocessingSize;a.mask&&(d=!0,b&&void 0!==b.Zd&&(a.mask=b.Zd+a.mask),c=T.instance({isFloat:!1,url:a.mask}));var w=!1;a.customInputShader&&(w="s46",M.Dc({name:"_",id:w,h:a.customInputShader,Yg:["uSource"],precision:"lowp"}),M.J(w,[{type:"1i",name:"_",value:0}]));switch(l){case "sobel":q="s33";k=!0;break;case "meanNormalization":q="s34";k=!0;break;case "grayScale":q="s30";
k=!1;break;case "grayScaleTilt":q="s31";n=!0;k=!1;break;case "rgbGrayTilt":q="s32";n=!0;k=!1;break;case "copy":q=w?w:"s0";break;case "inputLightRegulation":q=w?w:"s30";u=Za.instance({$c:p,sd:a.size,pd:a.nBlurPass,U:!1});h=!0;break;case "inputMix0":q="none";u=$a.instance({A:p,ia:a.varianceMin,aa:a.blurKernelSizePx,gain:a.gain||1,U:!1});h=!0;break;case "inputMix1":q="none";u=ab.instance({A:p,ia:a.varianceMin,aa:a.blurKernelSizePx,gain:a.gain||1,U:!1});h=!0;break;case "inputCut4":q="none";u=bb.instance({A:p,
ia:a.varianceMin,aa:a.blurKernelSizePx,gain:a.gain||1,Ia:a.isNormalized||!1,kc:a.overlap||0,U:!1});p*=u.Ge();h=!0;break;case "direct":case "none":q="abort";break;default:q="s4"}p=Math.ceil(p);n&&M.J(q,[{name:"u27",type:"1f",value:a.tilt}]);d&&(q+="Mask");var C=T.instance({isFloat:!1,isPot:!1,width:a.size}),y={D:function(){return a.size},He:function(){return p},Nb:function(){return y.D()},Ne:function(){return h?u.Ha():C},O:function(D){Wa.V();"abort"!==q&&("none"!==q&&(M.set(q),k&&M.H("u28",1/a.size),
C.M(),d&&c.g(1),U.l(!1,!1),C.g(0),D=C),h&&u.process(D))},m:function(){C.remove();d&&c.remove()}};return y}},mb={instance:function(a){function c(F){u.forEach(function(E,N){k[N][0]=F[0][E];k[N][1]=F[1][E];k[N][2]=F[2][E];k[N][3]=F[3][E]});return k}a.normalize=a.normalize||!1;var d={input:null,bias:null,Qb:null,xa:null,ic:null,fc:null,hc:null},h=null,u=[],k=[],n=!1,q=null,l=!0,p=-1,w=a.isReorganize?a.isReorganize:!1,C=a.kernelsCount?!0:!1,y=["s27","s28","s29"][a.shiftRGBAMode||0],D={isEnabled:!1};a.Ye?
(a.sparsity="undefined"!==typeof a.sparsity?a.sparsity:a.sb.Nb(),l=!1):"full"===a.connectivityUp&&(a.sparsity=a.sb.Nb());var v={elu:"s16",elu01:"s17",relu:"s15",arctan:"s18",arctan2:"s19",sigmoid:"s14",copy:"s0"}[a.activation],B=a.sparsity*a.sparsity,e=!1,J=a.size,K="";if(a.maxPooling){switch(a.maxPooling.size){case 2:K="s35";break;case 4:K="s36"}e=!0;J/=a.maxPooling.size;d.fc=T.instance({isFloat:!0,isPot:!1,width:J})}var g=-1,L=null;l&&(d.xa=T.instance({isFloat:!0,isPot:!1,width:a.size}));d.bias=
T.instance(a.bias);var t={D:function(){return a.size},Nb:function(){return J},Tc:function(){return a.classesCount},ae:function(F){h.g(F)},hf:function(){a.remap&&a.remap.isEnabled&&(D={isEnabled:!0,af:T.instance(a.remap.maskTexture),pb:a.remap.layers.map(function(F){return a.parent.Ke(F)}),depth:a.remap.depth})},Ff:function(){switch(a.connectivityUp){case "direct":L=hb.instance(a.connectivity);break;case "square":L=ib.instance(a.connectivity);break;case "squareFast":L=jb.instance(a.connectivity,a.activation);
break;case "full":L=kb.instance(a.connectivity);break;case "conv":p=a.kernelsCount,L=lb.instance(a.connectivity),w&&(d.ic=T.instance({width:J,isFloat:!0,isFlipY:!1,isPot:!1}))}if(L.ya){var F=a.size*a.sparsity;g=Math.log(F/a.size)/Math.log(2);d.input=T.instance({isMipmap:!0,isFloat:!0,isPot:!0,width:F,Xb:g});d.Qb=T.instance({isFloat:!0,isPot:!0,width:a.size})}},O:function(F,E){h=F;L.ya?(d.input.M(),C&&d.bias.g(2),L.O(D),d.input.g(0),d.input.ye(g),d.Qb.M(),C?M.set("s0"):(M.set(y),M.H("u4",B),d.bias.g(1)),
d.input.be(g,0),U.l(!1,!1),M.set(v),d.xa.s(),d.Qb.g(0),U.l(!1,!1)):(d.xa.M(),d.bias.g(1),L.O());if(l)return E=d.xa,e&&(d.fc.M(),E.g(0),M.set(K),M.P("u10",1/a.size,1/a.size),U.l(!1,!1),E=d.fc),w&&(d.ic.s(),M.set("s21"),M.P("u14",p,J/p),E.g(0),U.l(!1,!1),E=d.ic),E.g(0),E;var N=d.xa;a.normalize&&(F=N,M.set("gpuRawAvg"===n?"s9":"s8"),M.H("u6",1/a.size),d.hc.M(),F.g(0),U.l(!1,!1),N=d.hc);F=null;switch(n){case "cpuRGBA2Float":N.Ib(!1);E?F=t.kf(N).then(q):(N=t.lf(N),q(N));break;case "cpuMeanFloat":N.Ib(!0);
if(E)F=N.pf().then(q);else{N=N.qf();for(var x=0;x<N.length;++x);q(N)}break;case "gpuRawAvg":case "gpuRaw":N.g(0);case "none":null!==q&&q(N)}E&&null===F&&(F=Promise.resolve());return F},ke:function(F){var E=!1;F&&(n=F.jc||"none",q=F.ec||null,E=F.rd?!0:!1);d.xa=T.instance({isFloat:!0,isPot:!0,isLinear:E,isMipmap:!1,width:a.size});F="undefined"!==typeof a.classesCount&&a.classesCount?a.classesCount:a.size*a.size;for(var N=E=0,x=0;E<F;++E)u.push(N+(a.size-1-x)*a.size),k.push([-1,-1,-1,-1]),++N,N===a.size&&
(N=0,++x);a.normalize&&(d.hc=T.instance({isFloat:!0,isPot:!0,width:a.size}))},kf:function(F){return F.mf().then(c)},lf:function(F){F=F.lc();c(F);return k},m:function(){for(var F in d){var E=d[F];E&&E.remove()}L&&(L.m(),L=null)}};a.sb&&t.Ff(a.sb);return t}};
function nb(a){var c=null,d=null,h=null,u=0,k=this;this.u=function(n){this.Df(n.pb);h.ke({jc:n.jc,rd:n.rd||!1,ec:n.ec})};this.Ke=function(n){return c[n]};this.Df=function(n){var q=null;u=n.length;c=n.map(function(l,p){l=Object.assign({},l,{index:p,parent:k,sb:q,Ye:p===u-1});return q=p=0===p?gb.instance(l):mb.instance(l)});d=c[0];h=c[u-1];c.forEach(function(l,p){0!==p&&l.hf()})};this.O=function(n){n.g(0);var q=n;c.forEach(function(l){q=l.O(q,!1)});return q};this.Ie=function(){return d.He()};this.Oe=
function(){return h.D()};this.Ha=function(){return h.Ne()};this.Tc=function(){return h.Tc()};this.m=function(){c&&(c.forEach(function(n){n.m()}),h=d=c=null,u=0)};"undefined"!==typeof a&&this.u(a)}
var hb={instance:function(a){var c=T.instance(a.weights);return{ya:!0,fb:function(){return 1},m:function(){c.remove()},Pe:function(){return c},O:function(){M.set("s26");c.g(1);U.l(!1,!1)}}}},kb={instance:function(a){var c=a.fromLayerSize,d=T.instance(a.weights);return{ya:!0,fb:function(){return c},m:function(){d.remove()},O:function(h){if(h.isEnabled){M.set("s24");h.af.g(3);for(var u=Math.min(h.pb.length,h.depth),k=0;k<u;++k)h.pb[k].ae(4+k)}else M.set("s23");M.H("u18",a.toLayerSize);M.H("u19",a.fromLayerSize);
d.g(1);U.l(!1,!1)}}}},ib={instance:function(a){for(var c=a.fromLayerSize,d=a.toLayerSize,h=a.toSparsity,u=h*d,k=u/c,n=c/d,q=0,l=0,p=0,w=Array(h*d*h*d*4),C=Array(h*d*h*d*4),y=Array(c*c),D=0;D<y.length;++D)y[D]=0;D=Math.floor(h/2);for(var v=.5/d,B=.5/c,e=.5/u,J=0;J<d;++J)for(var K=Math.round(J*n),g=0;g<d;++g){var L=Math.round(g*n),t=J/d,F=g/d;t+=v;F+=v;for(var E=0;E<h;++E){var N=K+E-D;0>N&&(N+=c);N>=c&&(N-=c);for(var x=0;x<h;++x){var r=q/u,m=l/u,f=L+x-D;0>f&&(f+=c);f>=c&&(f-=c);var G=N/c,O=f/c;m=1-
m-1/u;G+=B;O+=B;r+=e;m+=e;var R=J*h+E,Q=g*h+x;Q=d*h-Q-1;R=Q*d*h+R;w[4*R]=r;w[4*R+1]=m;w[4*R+2]=G;w[4*R+3]=O;O=y[f*c+N]++;R=O%k;G=N*k+R;f=f*k+(O-R)/k;f=c*k-1-f;f=f*c*k+G;C[4*f]=r;C[4*f+1]=m;C[4*f+2]=t;C[4*f+3]=F;++q>=u&&(q=0,++l);++p}}}y=null;var ja=T.instance(a.weights);delete a.weights.data;var fa=T.instance({width:u,isFloat:!0,array:new Float32Array(C),isPot:!0});C=null;var ma=T.instance({width:u,isFloat:!0,array:new Float32Array(w),isPot:!0});w=null;return{ya:!0,fb:function(){return k},m:function(){fa.remove();
ma.remove();ja.remove()},O:function(){M.set("s22");ja.g(1);ma.g(2);U.l(!1,!1)}}}},lb={instance:function(a){var c=a.kernelsCount,d=a.toSparsity,h=d*a.toLayerSize/a.fromLayerSize,u=a.inputScale||[1,1],k=T.instance(a.weights);return{ya:!0,fb:function(){return h},yg:function(){return d},Pe:function(){return k},m:function(){k.remove()},O:function(){M.set("s25");M.Hf("u26",u);M.H("u24",c);M.H("u25",d);M.H("u18",a.toLayerSize);M.H("u19",a.fromLayerSize);k.g(1);U.l(!1,!1)}}}},jb={instance:function(a,c){var d=
a.fromLayerSize,h=a.toLayerSize,u=a.toSparsity,k=a.stride?a.stride:1,n=u*h/d,q=h<d,l=d/h,p=T.instance(a.weights),w="s47"+[d.toString(),h.toString(),u.toString(),k.toString(),c].join("_");M.ve(w)||(a=Ja(c),h=[{type:"1f",name:"u18",value:h},{type:"1f",name:"u30",value:k}],q&&h.push({type:"1f",name:"u19",value:d}),d=[(q?n:u).toFixed(1),a],q&&d.push(l.toFixed(1)),M.Re(q?"s41":"s40",w,d),M.J(w,h.concat([{type:"1i",name:"u16",value:0},{type:"1i",name:"u3",value:1},{type:"1i",name:"u15",value:3}])));return{ya:!1,
fb:function(){return n},m:function(){p.remove()},O:function(){M.set(w);p.g(3);U.l(!1,!1)}}}},Za={instance:function(a){var c=a.pd?a.pd:3,d=a.$c?a.$c:64,h=a.sd?a.sd:64,u=a.U?!0:!1;a={isFloat:!1,width:d,isPot:!1,isFlipY:!1};var k=T.instance(a),n=T.instance(a),q=T.instance(a),l=T.instance(a),p=T.instance({isFloat:!0,width:h,isPot:!1,isFlipY:!1}),w=1/d;return{process:function(C){M.set("s37");l.s();U.l(u,!1);M.set("s38");for(var y=0;y<c;++y)k.s(),M.P("u10",w,0),U.l(u,!1),q.s(),l.g(0),U.l(u,!1),n.s(),k.g(0),
M.P("u10",0,w),U.l(u,!1),l.s(),q.g(0),U.l(u,!1),y!==c-1&&n.g(0);M.set("s39");p.s();C.g(0);n.g(1);l.g(2);U.l(u,!1);p.g(0)},Ha:function(){return p}}}},$a={instance:function(a){function c(w){return T.instance({isFloat:w,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ia:.1,aa:9,A:128,gain:1,U:!1},a),h=c(!1),u=[c(!1),c(!1),c(!1)],k=[c(!1),c(!1),c(!1)],n=c(!0),q=[h,k[0],k[1]];a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){float b=0.,c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).r,c+=f;}b/=c,gl_FragColor=vec4(b,0.,0.,1.);}".replace("1.1111",
Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var l="uniform sampler2D u32,u33,u34,u35;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec3 a=texture2D(u32,vv0).rgb;float c=texture2D(u33,vv0).r,d=texture2D(u34,vv0).r,i=texture2D(u35,vv0).r,j=a.r*a.r;vec3 b=vec3(c,d,i),k=max(g*f,abs(vec3(j)-b*b)),l=sqrt(k);gl_FragColor=vec4(a.r,h*(a-b)/l);}".replace("1.1111",d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),p={u1:0};M.Ra([{id:"s49",
name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 b=texture2D(u1,vv0).rgb;float a=dot(b,f);gl_FragColor=vec4(a,a,a,a);}",j:p,i:["u1"],precision:"lowp"},{id:"s50",name:"_",h:a,j:p,i:["u1","u31"],precision:"lowp"},{id:"s51",name:"_",h:l,j:{u32:0,u33:1,u34:2,u35:3},i:["u32","u33","u34","u35"],precision:"highp"}]);return{process:function(){M.set("s49");h.M();U.l(d.U,!1);M.set("s50");for(var w=0;3>w;++w)M.P("u31",1,0),u[w].s(),q[w].g(0),
U.l(!1,!1),M.P("u31",0,1),k[w].s(),u[w].g(0),U.l(!1,!1);M.set("s51");n.s();h.g(0);k[0].g(1);k[1].g(2);k[2].g(3);U.l(!1,!1);n.g(0)},Ha:function(){return n}}}},ab={instance:function(a){function c(p){return T.instance({isFloat:p,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ia:.1,aa:9,A:128,gain:1,U:!1},a),h=c(!1),u=c(!1),k=c(!1),n=c(!0);a="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec3 b=vec3(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j).rgb,c+=f;}b/=c,gl_FragColor=vec4(b,1.);}".replace("1.1111",
Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6));var q="uniform sampler2D u0,u36;const float f=1.1111;const vec3 g=vec3(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0);vec3 c=texture2D(u36,vv0).rgb;float d=a.a*a.a;vec3 b=c.rgb,i=max(g*f,abs(vec3(d)-b*b)),j=sqrt(i);gl_FragColor=vec4(a.a,h*(a.rgb-b)/j);}".replace("1.1111",d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4)),l={u1:0};M.Ra([{id:"s52",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;const vec3 f=vec3(.2126,.7152,.0722),g=vec3(1.);void main(){vec3 a=texture2D(u1,vv0).rgb;float b=dot(a,f);gl_FragColor=vec4(a.rgb,b);}",
j:l,i:["u1"],precision:"lowp"},{id:"s53",name:"_",h:a,j:l,i:["u1","u31"],precision:"lowp"},{id:"s54",name:"_",h:q,j:{u0:0,u36:1},i:["u0","u36"],precision:"highp"}]);return{process:function(){M.set("s52");h.M();U.l(d.U,!1);M.set("s53");M.P("u31",1,0);u.s();h.g(0);U.l(!1,!1);M.P("u31",0,1);k.s();u.g(0);U.l(!1,!1);M.set("s54");n.s();h.g(0);k.g(1);U.l(!1,!1);n.g(0)},Ha:function(){return n}}}},bb={instance:function(a){function c(w){return T.instance({isFloat:w,width:d.A,isPot:!1,isFlipY:!1})}var d=Object.assign({ia:.1,
aa:9,A:128,gain:1,kc:0,Ia:!1,U:!1},a),h=c(!1),u=null,k=null,n=null;d.Ia&&(u=c(!1),k=c(!1),n=c(!0));a={u1:0};var q=[{id:"s55",name:"_",h:"uniform sampler2D u1;const float f=1.1111;varying vec2 vv0;const vec3 e=vec3(.2126,.7152,.0722);void main(){vec2 a=vv0*.5*(f+1.);float b=.5*(1.-f),c=dot(texture2D(u1,a).rgb,e),d=dot(texture2D(u1,a+vec2(0.,b)).rgb,e),h=dot(texture2D(u1,a+vec2(b,0.)).rgb,e),i=dot(texture2D(u1,a+vec2(b,b)).rgb,e);gl_FragColor=vec4(c,d,h,i);}".replace("1.1111",d.kc.toFixed(4)),j:a,i:["u1"],
precision:"lowp"}];if(d.Ia){var l="uniform sampler2D u1;const float e=1.1111,g=2.2222;uniform vec2 u31;varying vec2 vv0;void main(){vec4 b=vec4(0.);float c=0.;for(float a=-e;a<=e;a+=1.){vec2 i=u31*a,j=vv0+i*g;float d=1.2*a/e,f=exp(-d*d);b+=f*texture2D(u1,j),c+=f;}gl_FragColor=b/c;}".replace("1.1111",Math.round((d.aa-1)/2).toFixed(2)).replace("2.2222",(1/d.A).toFixed(6)),p="uniform sampler2D u0,u36;const float f=1.1111;const vec4 g=vec4(1.);const float h=2.2222;varying vec2 vv0;void main(){vec4 a=texture2D(u0,vv0),c=texture2D(u36,vv0),d=a*a,b=c,i=max(g*f,abs(d-b*b)),j=sqrt(i);gl_FragColor=h*(a-b)/j;}".replace("1.1111",
d.ia.toFixed(4)).replace("2.2222",d.gain.toFixed(4));q.push({id:"s56",name:"_",h:l,j:a,i:["u1","u31"],precision:"lowp"},{id:"s57",name:"_",h:p,j:{u0:0,u36:1},i:["u0","u36"],precision:"highp"})}M.Ra(q);return{process:function(){M.set("s55");h.M();U.l(d.U,!1);d.Ia?(M.set("s56"),M.P("u31",1,0),u.s(),h.g(0),U.l(!1,!1),M.P("u31",0,1),k.s(),u.g(0),U.l(!1,!1),M.set("s57"),n.s(),h.g(0),k.g(1),U.l(!1,!1),n.g(0)):h.g(0)},Ge:function(){return 2-d.kc},Ha:function(){return d.Ia?n:h}}}};
function ob(a,c){a[c]=!0;a.setAttribute(c,"true")}function pb(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}function qb(){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);return a&&a.length&&2<a.length?[parseInt(a[1],10),parseInt(a[2],10),parseInt(a[3]||0,10)]:[0,0,0]}function rb(){var a=navigator.userAgent.toLowerCase();return-1!==a.indexOf("safari")&&-1===a.indexOf("chrome")?!0:!1}
function sb(){return navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?!0:!1}
function tb(a){if(!a)return a;var c=null;if(a.video){var d=function(h){return h&&"object"===typeof h?Object.assign({},h):h};c={};"undefined"!==typeof a.video.width&&(c.width=d(a.video.width));"undefined"!==typeof a.video.height&&(c.height=d(a.video.height));"undefined"!==typeof a.video.facingMode&&(c.facingMode=d(a.video.facingMode))}c={audio:a.audio,video:c};"undefined"!==typeof a.deviceId&&ub(c,a.deviceId);return c}
function ub(a,c){c&&(a.video=a.video||{},a.video.deviceId={exact:c},a.video.facingMode&&delete a.video.facingMode)}function vb(a){var c=a.video.width;a.video.width=a.video.height;a.video.height=c;return a}
function xb(a){function c(y){return[480,576,640,648,720,768,800,960,1080,1152,1280,1366,1920].sort(function(D,v){return Math.abs(D-y)-Math.abs(v-y)})}function d(y){var D=tb(a);y=y(D);u.push(y);h(y)}function h(y){if(y.video&&y.video.facingMode&&y.video.facingMode.exact){var D=y.video.facingMode.exact;y=tb(y);delete y.video.facingMode.exact;y.video.facingMode.ideal=D;u.push(y)}}var u=[];if(!a||!a.video)return u;h(a);if(a.video.width&&a.video.height){if(a.video.width.ideal&&a.video.height.ideal){var k=
c(a.video.width.ideal).slice(0,3),n=c(a.video.height.ideal).slice(0,3),q={},l=0;for(q.la=void 0;l<k.length;q={la:q.la},++l){q.la=k[l];var p={},w=0;for(p.ka=void 0;w<n.length;p={ka:p.ka},++w)if(p.ka=n[w],q.la!==a.video.width.ideal||p.ka!==a.video.height.ideal){var C=Math.max(q.la,p.ka)/Math.min(q.la,p.ka);C<4/3-.1||C>16/9+.1||d(function(y,D){return function(v){v.video.width.ideal=y.la;v.video.height.ideal=D.ka;return v}}(q,p))}}}d(function(y){return vb(y)})}a.video.width&&a.video.height&&(a.video.width.ideal&&
a.video.height.ideal&&d(function(y){delete y.video.width.ideal;delete y.video.height.ideal;return y}),d(function(y){delete y.video.width;delete y.video.height;return y}));a.video.facingMode&&(d(function(y){delete y.video.facingMode;return y}),a.video.width&&a.video.height&&d(function(y){vb(y);delete y.video.facingMode;return y}));u.push({audio:a.audio,video:!0});return u}
function yb(a){try{var c=window.matchMedia("(orientation: portrait)").matches?!0:!1}catch(h){c=window.innerHeight>window.innerWidth}if(c&&a&&a.video){c=a.video.width;var d=a.video.height;c&&d&&c.ideal&&d.ideal&&c.ideal>d.ideal&&(a.video.height=c,a.video.width=d)}}
function Ab(a){a.volume=0;ob(a,"muted");if(rb()){if(1===a.volume){var c=function(){a.volume=0;window.removeEventListener("mousemove",c,!1);window.removeEventListener("touchstart",c,!1)};window.addEventListener("mousemove",c,!1);window.addEventListener("touchstart",c,!1)}setTimeout(function(){a.volume=0;ob(a,"muted")},5)}}
function Bb(a,c,d,h){function u(n){k||(k=!0,d(n))}var k=!1;navigator.mediaDevices.getUserMedia(h).then(function(n){function q(){setTimeout(function(){if(a.currentTime){var p=a.videoHeight;if(0===a.videoWidth||0===p)u("VIDEO_NULLSIZE");else{var w={fe:null,Lf:null,bf:null};try{var C=n.getVideoTracks()[0];C&&(w.bf=C,w.fe=C.getCapabilities(),w.Lf=C.getSettings())}catch(y){}rb()||pb()?a.parentNode&&null!==a.parentNode?(k||c(a,n,w),setTimeout(function(){a.play()},100)):(document.body.appendChild(a),Ab(a),
setTimeout(function(){a.style.transform="scale(0.0001,0.0001)";a.style.position="fixed";a.style.bottom="0px";a.style.right="0px";Ab(a);setTimeout(function(){a.play();k||c(a,n,w)},100)},80)):k||c(a,n,w)}}else u("VIDEO_NOTSTARTED")},700)}function l(){a.removeEventListener("loadeddata",l,!1);var p=a.play();Ab(a);"undefined"===typeof p?q():p.then(function(){q()}).catch(function(){u("VIDEO_PLAYPROMISEREJECTED")})}"undefined"!==typeof a.srcObject?a.srcObject=n:(a.src=window.URL.createObjectURL(n),a.videoStream=
n);Ab(a);a.addEventListener("loadeddata",l,!1)}).catch(function(n){u(n)})}
function Cb(a,c,d){var h=sb()?document.createElement("video"):!1;if(h)if(sb()){if(d&&d.video&&pb()){var u=qb();0!==u[0]&&(12>u[0]||12===u[0]&&2>u[1])&&yb(d)}ob(h,"autoplay");ob(h,"playsinline");d&&d.audio?h.volume=0:ob(h,"muted");Bb(h,a,function(){function k(q){if(0===q.length)c("INVALID_FALLBACKCONSTRAINTS");else{var l=q.shift();Bb(h,a,function(){k(q)},l)}}var n=xb(d);k(n)},d)}else c&&c("MEDIASTREAMAPI_NOTFOUND");else c&&c("VIDEO_NOTPROVIDED")}
var Db=function(){function a(B,e,J,K,g,L,t){if(!D)if(t===L.length)g();else{switch(L[t]){case "A":J();break;case "D":B();break;case "S":e().then(function(F,E){v.Pd();a(B,e,J,E?null:K,g,L,++t)}).catch(function(F){console.log("An error occurred in the WebAR loop: ",F);g()});return;case "R":K&&K()}a(B,e,J,K,g,L,++t)}}var c={n:5,Zb:1,nd:0,cb:[35,49],Ya:[2,200],k:.7,Sf:200,gf:.05},d=-1,h=null,u=-1,k=-1,n=0,q=-1,l=-1,p=0,w=0,C=c.Ya[1],y=Math.log(2),D=!0,v={Le:function(){switch(d){case -1:return-1;case 0:return l+
h.nd;case 1:return p}},Ae:function(B){return Math.pow(Math.min(Math.max(q,0),h.n-1)/(h.n-1),B||1)},u:function(B){h=Object.assign({},c,B);q=l=h.Zb;d=0;v.reset()},Pd:function(B){B=("undefined"===typeof B?Date.now():B)||0;var e=Math.min(Math.max(B-w,h.Ya[0]),h.Ya[1]);C=e;w=B;var J=-1===u?0:h.k;u=Math.min(Math.max(1E3/e,5),120)*(1-J)+u*J;B-k>h.Sf&&5<++n&&(e=h.k,q=q*(1-e)+(u<h.cb[0]?l-1:u>h.cb[1]?l+1:l)*e,Math.abs(q-l)>1-h.gf&&(e=Math.min(Math.max(Math.round(q),0),h.n-1),e!==l&&(q=l=e,u=(h.cb[1]-h.cb[0])/
2)),k=B)},Cd:function(B,e,J,K,g,L){D=!1;a(B,e,J,K,g,L,0)},stop:function(){D=!0},Cf:function(B){p=B;d=1},Rf:function(){d=0;v.reset()},reset:function(){C=c.Ya[1];k=u=-1;n=0},Xg:function(B,e,J){J=Math.exp(-y*C/J);return(1-J)*B+J*e},pg:function(){return C}};return v}(),Eb=function(){function a(){d(B+D.Yb);e.port.postMessage("DONE")}function c(){L.Sa=0===D.ra?K(d):K(h)}function d(x){g.ua&&null!==v&&(x-=B,x=Math.min(Math.max(x,D.Ic[0]),D.Ic[1]),B+=x,k(),t.isEnabled&&t.Ja&&g.Y&&B-t.Ub>D.Ac&&(p(),t.Ub=B),
v(B))}function h(x){g.ua&&(L.timeout=setTimeout(d.bind(null,x),D.ra))}function u(){v=null;g.ua=!1;k()}function k(){L.Sa&&(window.cancelAnimationFrame(L.Sa),L.Sa=null);L.timeout&&(window.clearTimeout(L.timeout),L.timeout=null)}function n(x){x&&!g.Y?(g.Y=!0,J&&Db.Rf(),e.port.postMessage("STOP"),Ua.Qd(!0),c()):!x&&g.Y&&(g.Y=!1,J&&Db.Cf(1),Ua.Qd(!1),e.port.postMessage("START"))}function q(x){x.target.hidden?E():F()}function l(x,r,m){r=x.createShader(r);x.shaderSource(r,m);x.compileShader(r);return r}
function p(){t.Ja=!1;var x=t.da,r=t.ib,m=t.jb,f=t.T;x.uniform1f(t.Xc,Math.random());t.va?r.beginQueryEXT(f,m):x.beginQuery(f,m);x.drawElements(x.POINTS,1,x.UNSIGNED_SHORT,0);t.va?r.endQueryEXT(f):x.endQuery(f);Ua.flush();C().then(function(G){0===G||isNaN(G)?(t.isEnabled=!1,console.log("WARNING in benchmark_GPUClock: WebGL timer queries is not working properly. timeElapsedNs =",G)):(G=D.Td*D.zc*1E3/G,t.yb=(t.yb+1)%D.Ba,t.Wb[t.yb]=G,++t.jd>D.Ba&&(t.ob.set(t.Wb),t.ob.sort(function(O,R){return O-R}),
G=t.ob[Math.floor(D.Ba/2)],t.$a=Math.max(t.$a,G),D.yc(G/t.$a)),t.Ja=!0)}).catch(function(){t.Ja=!0})}function w(x){var r=t.da,m=t.ib,f=t.jb;f=t.va?m.ig(f,m.QUERY_RESULT_AVAILABLE_EXT):r.getQueryParameter(f,r.QUERY_RESULT_AVAILABLE);r=r.getParameter(m.GPU_DISJOINT_EXT);f?x(!r):setTimeout(w.bind(null,x),.1)}function C(){return new Promise(function(x,r){w(function(m){if(m){m=t.da;var f=t.ib,G=t.jb;m=t.va?f.getQueryObjectEXT(G,f.QUERY_RESULT_EXT):m.getQueryParameter(G,m.QUERY_RESULT);x(m)}else r()})})}
var y={fd:!0,Ic:[1,200],Yb:20,ra:0,zc:50,Td:240,Ac:3E3,Ba:3,yc:null},D=null,v=null,B=0,e=null,J=!1,K=null,g={oa:!1,Y:!0,Tb:!1,Sb:!1,Rb:!1,ua:!1},L={Sa:null,timeout:null},t={isEnabled:!1,Ja:!1,da:null,ib:null,jb:null,T:null,Xc:null,va:!0,Ub:0,jd:0,Wb:null,ob:null,yb:0,$a:0},F=n.bind(null,!0),E=n.bind(null,!1),N={u:function(x){D=Object.assign(y,x);Object.assign(g,{Y:!0,oa:!0,ua:!1});K=window.requestPostAnimationFrame||window.requestAnimationFrame;if(null!==D.yc){x=document.createElement("canvas");x.setAttribute("width",
"1");x.setAttribute("height","1");var r={antialias:!1};x=x.getContext("webgl2",r)||x.getContext("webgl",r);if(r=x.getExtension("EXT_disjoint_timer_query")||x.getExtension("EXT_disjoint_timer_query_webgl2")){t.da=x;t.ib=r;t.isEnabled=!0;t.va=r.beginQueryEXT?!0:!1;var m=l(x,x.VERTEX_SHADER,"attribute vec4 a0;void main(){gl_Position=a0;}"),f=l(x,x.FRAGMENT_SHADER,"precision lowp float;uniform float u37;void main(){vec4 a=u37*vec4(1.,2.,3.,4.);for(int b=0;b<666;b+=1)a=cos(a);gl_FragColor=a;}".replace("666",
D.zc.toString())),G=x.createProgram();x.attachShader(G,m);x.attachShader(G,f);x.linkProgram(G);m=x.getAttribLocation(G,"a0");t.Xc=x.getUniformLocation(G,"u37");x.useProgram(G);x.enableVertexAttribArray(m);G=x.createBuffer();x.bindBuffer(x.ARRAY_BUFFER,G);x.bufferData(x.ARRAY_BUFFER,new Float32Array([.5,.5,0,1]),x.STATIC_DRAW);x.vertexAttribPointer(m,4,x.FLOAT,!1,16,0);G=x.createBuffer();x.bindBuffer(x.ELEMENT_ARRAY_BUFFER,G);x.bufferData(x.ELEMENT_ARRAY_BUFFER,new Uint16Array([0]),x.STATIC_DRAW);
x.disable(x.DEPTH_TEST);x.disable(x.DITHER);x.disable(x.STENCIL_TEST);x.viewport(0,0,1,1);G=t.va?r.createQueryEXT():x.createQuery();t.jb=G;t.T=r.TIME_ELAPSED_EXT||x.TIME_ELAPSED;t.Ub=-D.Ac;t.Wb=new Float32Array(D.Ba);t.ob=new Float32Array(D.Ba);t.$a=0;t.yb=0;t.jd=0;t.Ja=!0}}if(D.fd){x=!1;try{if("undefined"===typeof SharedWorker){var O=URL.createObjectURL(new Blob(["let handler = null;\n      self.addEventListener('message', function(e){\n        if (handler !== null){\n          clearTimeout(handler);\n          handler = null;\n        }\n        switch (e.data) {\n          case 'START':\n          case 'DONE':\n            handler = setTimeout(function(){\n              self.postMessage('TICK');\n            }, "+
D.Yb.toString()+");\n            break;\n          case 'STOP':\n            break;\n        };\n      }, false);"],{type:"text/javascript"})),R=new Worker(O);R.addEventListener("message",a);e={ud:R,port:R};g.Tb=!0}else{var Q=URL.createObjectURL(new Blob(["let handler = null;\n      onconnect = function(e) {\n        const port = e.ports[0];\n        port.addEventListener('message', function(e) {\n          \n          if (handler !== null){\n            clearTimeout(handler);\n            handler = null;\n          }\n          switch (e.data) {\n            case 'START':\n            case 'DONE':\n              handler = setTimeout(function(){\n                port.postMessage('TICK');\n              }, "+
D.Yb.toString()+");\n              break;\n            case 'STOP':\n              break;\n          };\n          \n        });\n        \n        port.start();\n      } // end onconnect()"],{type:"text/javascript"})),ja=new SharedWorker(Q);ja.port.start();ja.port.addEventListener("message",a);e={ud:ja,port:ja.port};g.Sb=!0}x=!0}catch(fa){}x&&("onvisibilitychange"in document?document.addEventListener("visibilitychange",q):(window.addEventListener("blur",E),window.addEventListener("focus",F)),window.addEventListener("pagehide",
E),window.addEventListener("pageshow",F),g.Rb=!0)}J="undefined"!==typeof Db},m:function(){u();g.Rb&&("onvisibilitychange"in document?document.removeEventListener("visibilitychange",q):(window.removeEventListener("blur",E),window.removeEventListener("focus",F)),window.removeEventListener("pagehide",E),window.removeEventListener("pageshow",F),g.Rb=!1);g.Sb?(e.port.close(),g.Sb=!1):g.Tb&&(e.ud.terminate(),g.Tb=!1);Object.assign(g,{Y:!0,oa:!1,ua:!1});v=null},Lg:function(){return g.Y},update:function(x){Object.assign(D,
x)},Cd:function(x){g.oa||N.u({});k();g.ua=!0;v=x;g.Y&&c()},stop:u};return N}(),Fb=function(){function a(C,y){var D=C[0]-.5;C=C[1]-.5;var v=y[0]-.5;y=y[1]-.5;return D*D+C*C-(v*v+y*y)}var c={qd:4,rb:[1.5,1.5,2],Z:[.1,.1,.1],Ed:1,A:-1,fa:-1,Nf:2,ff:1,nc:!0,se:.8},d=null,h=[],u=[],k=[],n=[0],q=[.5,.5,1],l=null,p=0,w=[0,0,0];return{u:function(C){d=Object.assign({},c,C);h.splice(0);u.splice(0);k.splice(0);p=0;C=d.rb[0]*d.Z[0];var y=d.rb[1]*d.Z[1],D=1/(1+d.rb[2]*d.Z[2]),v=d.Ed*Math.min(d.A,d.fa),B=v/d.A;
v/=d.fa;var e=.5*d.se;e*=e;for(var J=0;J<d.qd;++J){var K=[];u.push(K);var g=Math.pow(D,J),L=B*g,t=v*g;g=L*d.ff;k.push(g);var F=L*C,E=t*y;L/=2;t/=2;for(var N=1+(1-L-L)/F,x=1+(1-t-t)/E,r=0;r<x;++r)for(var m=t+r*E,f=m-.5,G=0;G<N;++G){var O=L+G*F,R=O-.5;R*R+f*f>e||(O=[O,m,g],h.push(O),K.push(O))}d.nc&&K.sort(a);l=h}d.nc&&h.sort(a)},get:function(C){var y=l.length;if(0===y)return q;for(;C>=n.length;)n.push(0);n[C]>=y&&(n[C]=0);var D=l[Math.floor(n[C])%y];n[C]=(n[C]+1/d.Nf)%y;if(0===p)return D;w[0]=D[0];
w[1]=D[1];w[2]=p;return w},Ng:function(C){C>=n.length||(n[C]=Math.floor(Math.random()*l.length))},Qg:function(C){p=C;if(0===p)l=h;else{for(var y=k.length,D=y-1,v=0;v<y;++v)if(k[v]<=C){D=v;break}l=u[D]}},reset:function(){for(var C=h.length/n.length,y=0;y<n.length;++y)n[y]=Math.floor(y*C);p=0;l=h}}}(),Gb={Lb:function(){return Date.now()},lg:function(){return performance.now()}},Hb=function(){var a=0,c=null,d=null,h=null,u=null;return{u:function(k,n){a=k.length;c=n;d=k;h=new Float32Array(a);u=new Float32Array(a)},
Me:function(){return u},Mf:function(k,n,q){k.forEach(function(l,p){var w=Math.min(1,d[p]*q*(n+.33*(1-n)));l=w*l+(1-w)*h[p];h[p]=l;l=c[p](l);l=Math.min(Math.max(l,0),1);u[p]=l})}}}(),Y={VERSION:"1.3.6",qa:[],Cb:!1,Db:!1,Bb:!1,Qa:!0,Pa:!1,ready:!1,initialized:!1},Ib={facingMode:"user",idealWidth:800,idealHeight:600,minWidth:240,maxWidth:1280,minHeight:240,maxHeight:1280,rotate:0,isAudio:!0,disableRendering:!1},b={neuralNetworkPath:"jeelizFaceExpressionsNNC.json",
Bc:"../../",ra:0,width:512,height:512,Of:40,Fd:[.6,5.8],Z:[.07,.07,.15],zf:.7,xf:2,yf:[2,2,2],bb:!0,xe:.1,threshold:.8,Nd:.7,Od:.03,re:.06,we:.02,Wd:[1,.05],Vf:10,Se:!1,Ab:[2,7],L:{Yc:[3,7],quality:[0,6],position:[0,7],rotation:[5,7]},ac:11,od:1,cf:1,Xd:[.1,.01],vf:[.4,-.7,-.4],wf:[.3,0,0],qe:!1,Yd:.001,Ec:[Math.PI/10,Math.PI/6],wd:[.1,.4],xd:[.009,.02],yd:[.1,.2],$b:5,Zc:.1,Vd:[.2,.2,.15,.15,.15,.15,.5,.2,.3,.3,.2],df:[Ia.bind(null,.1,.7),Ia.bind(null,.1,.7),Ia.bind(null,.05,.4),Ia.bind(null,.05,
.4),Ia.bind(null,.05,.6),Ia.bind(null,.05,.6),Ia.bind(null,.1,.5),Ia.bind(null,.3,.7),Ia.bind(null,.7,.8),Ia.bind(null,.7,.8),Ia.bind(null,.15,.6)]};Y.get_nMorphs=function(){return b.ac};var Jb=null,Kb=null,Lb=null,Mb=[],Nb=b.threshold;
function Ob(){function a(){1===++ja&&(Hb.u(b.Vd,b.df),c(),Y.ready=!0,Y.qa.forEach(function(A){A()}),Y.qa.splice(0,Y.qa.length),d(),ja=0)}function c(){g=new Float32Array(b.ac);L=new Float32Array(b.ac);t=new Uint8Array(e*e*4);Y.get_morphTargetInfluences=function(){return g};Y.get_morphTargetInfluencesStabilized=function(){return Hb.Me()};Y.set_morphUpdateCallback=function(A){F=A};Y.get_rotation=function(){return x};Y.get_positionScale=function(){var A=J.Ld.Je();A.Ib(!1);A=A.lc();f[0]=1-A[1][0];f[1]=
A[2][0];f[2]=A[3][0]*O.I[0];return f};Y.get_rotationStabilized=function(){return m};Y.switch_sleep=function(A){ma!==fa.qc||A?ma=A?fa.qc:fa.play:d()};Y.on_detect=function(A){A(z.X);z.dc.push(A)};Y.is_detected=function(){return z.X};Y.set_animateDelay=function(A){v=A;Eb.update({ra:v})}}function d(){ma!==fa.play&&(ma=fa.play,Eb.stop(),h())}function h(){var A,P;return Ba(new va(new oa(function(aa){switch(aa.ha){case 1:a:{if("VIDEO"===Q.element.nodeName){var S=Q.element.currentTime-za;0>S&&(za=Q.element.currentTime);
if(1E3*S<b.Vf)break a;za+=S}Q.za.refresh();S=xa.Vc();S[0]===Q.I[0]&&S[1]===Q.I[1]||p()}A=Db.Le();P=0;case 2:if(!(P<A)){aa.ha=4;break}S=J;var na=B;M.set("s59");Wa.V();S.kb.M();Q.za.g(0);S.vb.g(1);b.bb&&M.H("u38",G);U.l(!1,!1);S.kb.g(0);na.O(S.kb);b.Se?S=T.tf(E,t).then(u):(T.sf(E,t),u(),S=Promise.resolve());aa.ha=3;return{value:S};case 3:++P;aa.ha=2;break;case 4:Ib.disableRendering||(S=J,Wa.V(),K.M(),M.set("s62"),b.bb&&M.H("u38",G),S.vb.g(0),U.l(!1,!1)),S=Db.Ae(),R=3*(1-S)+1*S,Db.Pd(),Y.Qa&&(Wa.Qf(),
M.set("s58"),Q.za.g(0),U.l(!1,!1),H.enable(H.BLEND),H.blendFunc(H.SRC_ALPHA,H.ONE),K.g(0),U.l(!1,!1),H.disable(H.BLEND)),H.flush(),ma!==fa.qc&&Eb.Cd(h),aa.ha=0}})))}function u(){q();if(!b.qe&&z.X){for(var A=0,P=0;3>P;++P)A=n(P+b.L.rotation[0],b.L.rotation[1]),A=(2*A-1)*b.vf[P],A+=b.wf[P],N[P]=A;b.bb&&(P=b.xe,G=G*(1-P)+(-A+G)*P)}k();A=Gb.Lb();P=A-ba.ld;var aa=n(b.L.quality[0],b.L.quality[1]);ba.vd=Ia(b.wd[0],b.wd[1],aa);aa=n(b.L.position[0],b.L.position[1]);var S=n(b.L.position[0]+1,b.L.position[1]),
na=n(b.L.position[0]+2,b.L.position[1]);ba.Dd=1-Ia(b.yd[0],b.yd[1],Math.sqrt(aa*aa+S*S+na*na)/P);aa=ba.wa[0]-N[0];S=ba.wa[1]-N[1];na=ba.wa[2]-N[2];P=Math.sqrt(aa*aa+S*S+na*na)/P;ba.wa[0]=N[0];ba.wa[1]=N[1];ba.wa[2]=N[2];ba.zd=1-Ia(b.xd[0],b.xd[1],P);ba.W=ba.vd*ba.Dd*ba.zd;ba.ld=A;ba.kd[ba.Vb]=ba.W;ba.Vb=(ba.Vb+1)%b.$b;for(A=0;A<b.$b;++A)ba.W=Math.min(ba.kd[A],ba.W);Hb.Mf(g,ba.W,R,L);F&&F(ba.W,R);if(z.X){A=ba.W;P=b.Xd;A=R*(P[0]*(1-A)+P[1]*A);for(P=0;3>P;++P)x[P]=A*N[P]+(1-A)*x[P],m[P]=x[P];m[2]-=G}else A=
Gb.Lb()*b.Yd,r[0]=b.Ec[0]*Math.sin(A),r[1]=b.Ec[1]*Math.cos(A),m[0]=r[0],m[1]=r[1],m[2]=r[2]}function k(){var A=n(b.L.Yc[0],b.L.Yc[1]);z.lb=b.Zc*A+(1-b.Zc)*z.lb;z.lb>b.Nd+b.Od&&!z.X?(z.dc.forEach(function(P){P(!0)}),z.X=!0):z.lb<b.Nd-b.Od&&z.X&&(z.dc.forEach(function(P){P(!1)}),z.X=!1,G=0)}function n(A,P){A+=e*P;return(t[4*A]+t[4*A+1]+t[4*A+2]+t[4*A+3])/1020}function q(){g.forEach(function(A,P){if(z.X){var aa=(b.od+P)%e,S=b.cf+Math.floor((b.od+P)/e);S=e-1-S;aa+=e*S;S=t.slice(4*aa,4*aa+4);aa=(S[0]+
S[1]+S[2]+S[3])/1020;S=b.we*Math.sqrt((S[0]*S[0]+S[1]*S[1]+S[2]*S[2]+S[3]*S[3])/1020-aa*aa);g[P]=A>aa-S&&A<aa+S?A:aa}else g[P]=0})}function l(A){B=new nb({pb:A.layers,jc:"gpuRaw",ec:function(P){var aa=J;aa.vb.Id(1);H.viewport(0,0,1,1);M.set("s60");b.bb&&M.H("u38",G);M.H("u39",ba.W);M.If("u40",Fb.get(0));U.l(!1,!1);aa.Ld.Id(1);M.set("s61");M.H("u39",ba.W);aa.vb.g(0);U.l(!1,!1);E=P}});A=B.Ie();A!==D&&(D=A,w(),J.kb.resize(D,D),C());e=B.Oe();a()}function p(){var A=xa.Vc();Q.I[0]=A[0];Q.I[1]=A[1];Xa.eb().width=
A[0];Xa.eb().height=A[1];b.width=A[0];b.height=A[1];A=Q.Uf;var P=Q.I[1]/Q.I[0],aa=Xa.S()/Xa.D();P>aa?1>=P?A[0]*=P:A[1]/=P:(A[0]*=P,P=1/aa,A[0]*=P,A[1]*=P);A[1]*=aa;M.J("s62",[{name:"u41",type:"1f",value:aa}]);Q.C[0]=0;Q.C[1]=0;Q.C[2]=0;Q.C[3]=0;switch(Ib.rotate){case 0:Q.C[0]=A[0];Q.C[3]=A[1];break;case 180:Q.C[0]=-A[0];Q.C[3]=-A[1];break;case 90:Q.C[1]=A[0];Q.C[2]=-A[1];break;case -90:Q.C[1]=-A[0],Q.C[2]=A[1]}A=[{type:"mat2",name:"u42",value:Q.C}];M.J("s59",A);M.J("s58",A);M.J("s62",[{type:"mat2",
name:"u42",value:90===Math.abs(Ib.rotate)?[0,-Q.C[1],-Q.C[2],0]:Q.C}])}function w(){O.A=b.width;O.fa=b.height;Fb.u({rb:b.yf,qd:b.xf,A:O.A,fa:O.fa,Ed:b.zf,Z:b.Z,nc:!0});O.I=[1,O.A/O.fa]}function C(){M.J("s58",[{type:"1i",name:"u1",value:0}]);M.J("s59",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u43",value:1},{type:"1f",name:"u38",value:0},{type:"2f",name:"u44",value:O.I}]);M.J("s62",[{type:"1i",name:"u43",value:0},{type:"2f",name:"u44",value:O.I},{type:"1f",name:"u38",value:0},{type:"3f",name:"u45",
value:[0,.5,1]}]);M.J("s60",[{type:"1i",name:"u46",value:0},{type:"1i",name:"u43",value:1},{type:"1f",name:"u47",value:b.Fd[0]},{type:"1f",name:"u48",value:b.Fd[1]},{type:"1f",name:"u49",value:b.Of},{type:"1f",name:"u50",value:Nb},{type:"1f",name:"u51",value:b.re},{type:"1f",name:"u38",value:0},{type:"3f",name:"u52",value:[b.Z[0]*O.I[0],b.Z[1]*O.I[1],b.Z[2]]}]);M.J("s61",[{type:"1i",name:"u1",value:0},{type:"1i",name:"u8",value:1},{type:"2f",name:"u53",value:b.Wd}])}function y(A){var P=new Float32Array([0,
.5,.5,0]);A.kb=T.instance({isPot:!0,isFloat:!1,width:D});P={width:1,height:1,isFloat:!0,isPot:!1,array:P};A.vb=Ya.instance(P);A.Ld=Ya.instance(P)}var D=64,v=b.ra,B=null,e=0,J={},K=null,g=null,L=null,t=null,F=null,E=null,N=[0,0,0],x=[0,0,0],r=[0,0,0],m=[0,0,0],f=[0,0,0],G=0,O={I:null,A:-1,fa:-1},R=1,Q={Uf:[.5,.5],C:[.5,0,0,.5],element:null,za:null,I:[-1,-1]},ja=0,fa={le:-4,ef:-3,Mg:-2,qc:-1,play:0},ma=fa.ef,z={lb:0,X:!1,dc:[]},ba={W:1,Dd:1,vd:1,zd:1,wa:[0,0,0],ld:Gb.Lb(),kd:new Float32Array(b.$b),
Vb:0},za=0,xa={u:function(){Q.za=T.instance({F:Q.element,isPot:!1,isFloat:!1,isFlipY:!0});K=T.instance({isPot:!1,isFloat:!1,width:O.A,height:O.fa});y(J);Eb.u({fd:!1,ra:v});Db.u({Zb:0,n:b.Ab[1]-b.Ab[0]+1,nd:b.Ab[0]});Lb?l(Lb):Da(function(A){A=JSON.parse(A);l(A)})},m:function(){Eb.stop();B&&(B.m(),B=null);ma=fa.le},ge:function(A){Y.Cb&&Y.Cb();var P={video:{facingMode:{ideal:Ib.facingMode},width:{min:Ib.minWidth,max:Ib.maxWidth,ideal:Ib.idealWidth},height:{min:Ib.minHeight,max:Ib.maxHeight,ideal:Ib.idealHeight}},
audio:Ib.isAudio};ub(P,Ib.deviceId);Cb(function(aa,S){Jb=S;Y.Db&&Y.Db();A(aa)},function(){window.zb&&window.zb("WEBCAM_UNAVAILABLE")},P)},md:function(A,P){M.Ra([{id:"s58",name:"_",Aa:"attribute vec2 a0;uniform mat2 u42;varying vec2 vv0;const vec2 f=vec2(.5,.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u42*a0;}",Ta:["a0"],Ea:[2],h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",i:["u1","u42"],precision:"lowp"},{id:"s59",name:"_",h:"uniform sampler2D u1;varying vec2 vv0;void main(){gl_FragColor=texture2D(u1,vv0);}",
Aa:"attribute vec2 a0;uniform sampler2D u43;uniform mat2 u42;uniform vec2 u44;uniform float u38;const vec2 e=vec2(.25,.5),f=vec2(.5,.5);varying vec2 vv0;void main(){vec4 a=texture2D(u43,e);vec2 d=a.gb,h=a.a*u44;float b=cos(u38),c=sin(u38);vec2 i=mat2(b,c,-c,b)*a0,j=d+i*.5*h,k=j-.5;vv0=f+2.*u42*k,gl_Position=vec4(a0,0.,1.);}",Ta:["a0"],Ea:[2],i:["u1","u43","u44","u42","u38"],precision:"lowp"},{id:"s60",name:"_",Aa:"attribute vec2 a0;void main(){gl_Position=vec4(a0,0.,1.);}",h:"uniform sampler2D u46,u43;uniform vec3 u40,u52;uniform float u47,u48,u49,u50,u39,u51,u38;varying vec2 vv0;const vec4 e=vec4(.25,.25,.25,.25);void main(){vec4 h=texture2D(u46,vec2(.4375,.9375)),i=texture2D(u46,vec2(.5625,.9375));float j=dot(h-i,e);bool k=j>u50;vec4 a=texture2D(u43,vec2(.5,.5));k?a.r=2.:a.r>u49?a.r=0.:a.r>1.9&&(a.a>u48||a.a<u47)?a.r=0.:a.r>1.9?a.r+=1.:0.;if(a.r<.9)a.gba=u40,a.r=1.;else{float l=dot(e,texture2D(u46,vec2(.0625,.9375))),m=dot(e,texture2D(u46,vec2(.1875,.9375))),d=dot(e,texture2D(u46,vec2(.3125,.9375))),f=cos(u38),g=sin(u38);vec2 c=mat2(f,g,-g,f)*vec2(l,m);float b;a.r>1.9?(b=1.-u39,b*=1.-step(abs(c.x),u51)*step(abs(c.y),u51)*step(abs(d),u51)):(b=1.,a.r=0.),a.gba+=vec3(c,d)*u52*a.a*b;}gl_FragColor=a;}",
i:"u46 u43 u40 u47 u48 u49 u50 u52 u39 u51 u38".split(" ")},{id:"s62",name:"_",Aa:"attribute vec2 a0;uniform mat2 u42;varying vec2 vv0;const vec2 f=vec2(.5,.5);void main(){gl_Position=vec4(a0,0.,1.),vv0=f+u42*a0;}",h:"uniform sampler2D u43;uniform vec3 u45;uniform vec2 u44;uniform float u38,u41;varying vec2 vv0;const vec2 l=vec2(1.,1.),e=vec2(.5,.5),m=vec2(.25,.5);void main(){float f=cos(u38),g=-sin(u38);mat2 h=mat2(f,g/u41,-g*u41,f);vec2 b=h*(vv0-e);vec4 i=texture2D(u43,m);vec2 c=h*(i.gb-e);float n=i.a;vec2 d=.5*n*u44,o=c+d,p=c-d,j=step(p,b)*step(b,o);float q=j.x*j.y;vec2 a=abs(c-b)/d;a=pow(a,3.*l),gl_FragColor=vec4(q*u45*max(a.x,a.y),1.);}",
i:"u43 u44 u45 u42 u38 u41".split(" "),precision:"lowp"},{id:"s61",name:"_",h:"uniform sampler2D u1,u8;uniform vec2 u53;uniform float u39;const vec4 f=vec4(1.,1.,1.,1.);varying vec2 vv0;void main(){vec4 a=texture2D(u1,vv0),b=texture2D(u8,vv0);float c=mix(u53.x,u53.y,u39);gl_FragColor=mix(b,a,c*f);}",i:["u1","u8","u53","u39"]}]);Q.element=A;Kb=Q.element;p();w();C();xa.u();P&&P()},Vc:function(){var A=[-1,-1],P=Q.element;"VIDEO"===P.nodeName?(A[0]=P.videoWidth,A[1]=P.videoHeight):(A[0]=P.width,A[1]=
P.height);90===Math.abs(Ib.rotate)&&A.reverse();return A}};Mb.push(xa);return xa}Y.onLoad=function(a){Y.ready?a():Y.qa.push(a)};Y.switch_displayVideo=function(a){Y.Qa=a;Y.Pa&&(Y.Pa.style.display=Y.Qa?"block":"none")};Y.onWebcamAsk=function(a){Y.Cb=a};Y.onContextLost=function(a){Y.Bb=a};Y.onWebcamGet=function(a){Y.Db=a};
Y.destroy=function(){Eb.m();Kb&&Kb.srcObject&&Kb.srcObject.getTracks().forEach(function(a){a.stop()});Mb.forEach(function(a){a.m()});Mb.splice(0);Xa.m();Y.switch_displayVideo(!1);Y.initialized=!1;Y.qa.splice(0)};Y.set_size=function(a,c){b.width=a;b.height=c};Y.get_size=function(){return{width:b.width,height:b.height}};Y.get_videoStream=function(){return Jb};Y.get_video=function(){return Kb};Y.get_cv=function(){return Xa.eb()};Y.set_color=function(a){M.J("s62",[{type:"3f",name:"u45",value:a}])};
Y.init=function(a){var c=Ob(),d=a.callbackReady||function(k){console.log("ERR:",k)},h=a.callbackReady?a.callbackReady.bind(null,!1):null;if(a.canvasId||a.canvas){var u=a.canvas?a.canvas:document.getElementById(a.canvasId);if(u)if(Y.initialized)d("ALREADY_INITIALIZED");else{Y.initialized=!0;window.zb=d?function(k){d(k);window.zb=!1}:!1;a.NNCPath&&(b.Bc=a.NNCPath);"undefined"!==typeof a.NNC&&(Lb="string"===typeof a.NNC?JSON.parse(a.NNC):a.NNC);h&&Y.qa.push(h);Nb=a.threshold||Nb;if(!Xa.u({Wa:u,width:b.width,
height:b.height,debug:!1,cd:!1,cc:function(){Y.Bb&&Y.Bb()},premultipliedAlpha:!1}))return d("GL_INCOMPATIBLE"),!1;Y.Pa=Xa.eb();Y.Qa||(Y.Pa.style.display="none");a.videoSettings&&a.videoSettings.videoElement?c.md(a.videoSettings.videoElement,!1):(a.videoSettings&&Object.assign(Ib,a.videoSettings),c.ge(function(k){c.md(k,!1)}));return!0}else d("INVALID_CANVAS")}else d("NO_CANVASID")};window.JEELIZFACEEXPRESSIONS=Y;
;return JEELIZFACEEXPRESSIONS||window.JEELIZFACEEXPRESSIONS;})();